{"version":3,"sources":["webpack:///src/app/paginas/administrar-clientes/ver-cliente/modificar-visita/modificar-visita.page.html","webpack:///src/app/paginas/administrar-clientes/ver-cliente/ver-visita/ver-visita.page.html","webpack:///src/app/paginas/administrar-clientes/servicios/api-clientes.service.ts","webpack:///src/app/paginas/administrar-clientes/ver-cliente/modificar-visita/modificar-visita.page.scss","webpack:///src/app/paginas/administrar-clientes/ver-cliente/modificar-visita/modificar-visita.page.ts","webpack:///src/app/paginas/administrar-clientes/ver-cliente/ver-visita/ver-visita.page.scss","webpack:///src/app/paginas/administrar-clientes/ver-cliente/ver-visita/ver-visita.page.ts"],"names":["ApiClientesService","http","apiDir","requestOptions","headers","get","id","datos","post","data","console","log","toPromise","id_equipo","id_servicio","id_visita","estado","params","Promise","resolve","reject","subscribe","response","error","id_producto","parametros","bodyP","id_sucursal","id_cliente","id_plano","providedIn","ModificarVisitaPage","api","api_tecnicos","api_clientes","navParams","ModalController","api_visitas","serviciosConEquipos","serviciosElegidos","serviciosParaEnviar","grupoWorkStation","grupoWorkStationElegidos","show","servicios_elegidosAux","id_cliente_elegido","sucursal_elegida","dayNames","monthNames","mostrar_servicios","listado_servicios","result","actualizar_informacion","then","warn","listado_equipos","res","equipos","servicio","equipo","push","length","nombre_equipo","listado_tecnicos","fecha_actual","format","informacion_visita","visita","visitas","sucursalesCliente","informacion_cliente","listado_sucursales_cliente","sucursales","datosSucursal","selectSucursal","listado_grupoWorkstations","flag","array","i","first","forEach","element","id_equipo_grupo","codigo_qr_equipo","estado_servicio","nombre_servicio","qr","nombre_equipo_grupo","id_tecnico","tecnico","workstation","modificar_visita","fecha_elegida","location","reload","servicioID","arrayWorkstation","val","toString","includes","checkExist","resp","find","undefined","dismiss","selector","template","VerVisitaPage","modalController","loadingController","pdf_generado","validDate","create","message","loader","present","crear_pdf","ver_pdf","url","win","window","open","focus","Date","horario_salida","valueOf","servicios2","servicios","servicioAux","id_formulario","aux","aux2","index","some","tecnicos","filter","index2","element2","nombreTecnico","nombre_tecnico","apellido_tecnico","component","cssClass","componentProps","modal","onDidDismiss"],"mappings":"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","file":"default~paginas-administrar-clientes-ver-cliente-ver-cliente-module~paginas-administrar-visitas-admi~5d227966-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>Modificar Visita</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"close()\\\">\\r\\n        <ion-icon name=\\\"close-outline\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n  <!-- <ion-button (click)=\\\"onClick()\\\" expand=\\\"block\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\r\\n      Click me\\r\\n  </ion-button> -->\\r\\n\\r\\n  <ion-item>\\r\\n      <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar servicios a ofrecer</ion-label>\\r\\n      <ion-select [disabled]=\\\"sucursal_elegida == null\\\" [(ngModel)]=\\\"servicios_elegidosAux\\\"multiple=\\\"true\\\" (ionChange)=\\\"serviciosElegidosChange()\\\">\\r\\n          <ion-select-option *ngFor=\\\"let servicio of listado_servicios\\\" value=\\\"{{servicio.id_servicio}}\\\">{{servicio.nombre_servicio}}</ion-select-option>\\r\\n      </ion-select>\\r\\n  </ion-item>\\r\\n\\r\\n  <div *ngFor=\\\"let servicio of serviciosElegidos\\\" style=\\\"text-align: center;\\\">\\r\\n      <h2 style=\\\"text-align: center;\\\">{{servicio.nombre_servicio}}</h2>\\r\\n      <div *ngFor=\\\"let equipo of servicio.equipos\\\">\\r\\n          <ion-label fixed style=\\\"text-align: center;color: var(--ion-color-secondary);font-weight: bold;\\\">{{equipo.nombre_equipo}}</ion-label>\\r\\n          <ion-item style=\\\"margin-top: 10px;\\\">\\r\\n              <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar técnico a cargo</ion-label>\\r\\n              <ion-select [(ngModel)]=\\\"equipo.tecnico\\\">\\r\\n                  <ion-select-option *ngFor=\\\"let tecnico of listado_tecnicos\\\" value=\\\"{{tecnico.id_tecnico}}\\\">{{tecnico.nombre_tecnico}} {{tecnico.apellido_tecnico}}</ion-select-option>\\r\\n              </ion-select>\\r\\n          </ion-item>\\r\\n      </div>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"show\\\">\\r\\n      <div *ngFor=\\\"let servicio of grupoWorkStationElegidos\\\" style=\\\"text-align: center;\\\">\\r\\n          <h2 style=\\\"text-align: center;\\\">{{servicio.nombre_equipo_grupo}}</h2>\\r\\n          <div *ngFor=\\\"let equipo of servicio.equipos\\\">\\r\\n              <ion-label fixed style=\\\"text-align: center;color: var(--ion-color-secondary);font-weight: bold;\\\">{{equipo.nombre_equipo}}: {{equipo.nombre_servicio}}</ion-label>\\r\\n          </div>\\r\\n          <ion-item style=\\\"margin-top: 10px;\\\">\\r\\n              <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar técnico a cargo</ion-label>\\r\\n              <ion-select [(ngModel)]=\\\"servicio.tecnico\\\">\\r\\n                  <ion-select-option *ngFor=\\\"let tecnico of listado_tecnicos\\\" value=\\\"{{tecnico.id_tecnico}}\\\">{{tecnico.nombre_tecnico}} {{tecnico.apellido_tecnico}}</ion-select-option>\\r\\n              </ion-select>\\r\\n          </ion-item>\\r\\n      </div>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <!-- <ion-item>\\r\\n      <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar técnico a cargo</ion-label>\\r\\n      <ion-select [(ngModel)]=\\\"tecnico_elegido\\\">\\r\\n          <ion-select-option *ngFor=\\\"let tecnico of listado_tecnicos\\\" value=\\\"{{tecnico.id_tecnico}}\\\">{{tecnico.nombre_tecnico}} {{tecnico.apellido_tecnico}}</ion-select-option>\\r\\n      </ion-select>\\r\\n  </ion-item> -->\\r\\n\\r\\n  <ion-item>\\r\\n      <ion-label fixed style=\\\"text-align: center;\\\">Elegir una fecha</ion-label>\\r\\n      <ion-datetime [(ngModel)]=\\\"fecha_elegida\\\" [doneText]=\\\"'Listo'\\\"\\r\\n      [cancelText]=\\\"'Cancelar'\\\" [monthNames]=\\\"monthNames\\\" [dayNames]=\\\"dayNames\\\" displayFormat=\\\"DDDD D MMMM YYYY HH:mm\\\" min=\\\"{{fecha_actual}}\\\" max=\\\"2022\\\" value=\\\"{{fecha_actual}}\\\"></ion-datetime>\\r\\n  </ion-item>\\r\\n\\r\\n  <div style=\\\"width: 100%; text-align: center;\\\">\\r\\n      <ion-button (click)=\\\"programarVisita()\\\">Modificar</ion-button>\\r\\n  </div>\\r\\n\\r\\n      \\r\\n  <div style=\\\"margin-top: 25px\\\">\\r\\n      <img class=\\\"imagen_empresa\\\" src='../../../assets/LogoCPA-01.png'>\\r\\n  </div>\\r\\n\\r\\n</ion-content>\\r\\n\";","export default \"<ion-header>\\r\\n  <ion-toolbar style=\\\"text-align: center;\\\" color=\\\"primary\\\">\\r\\n    <ion-title>visita</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"close()\\\">\\r\\n        <ion-icon name=\\\"close-outline\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n  <div *ngIf=\\\"!visita\\\" style=\\\"text-align: center;\\\">\\r\\n    <ion-spinner></ion-spinner>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"visita\\\">\\r\\n    <div *ngIf=\\\"visita.visitas.horario_salida != 'NULL'\\\">\\r\\n      <ion-item lines=\\\"full\\\">\\r\\n        <ion-label *ngIf=\\\"validDate\\\"><b>Fecha de concluida la visita:</b> {{visita.visitas.horario_salida | date: 'dd/MM/yyyy hh:mm a'}}</ion-label>\\r\\n        <ion-label *ngIf=\\\"!validDate\\\"><b>Fecha de concluida la visita:</b> {{visita.visitas.horario_salida}}</ion-label>\\r\\n      </ion-item>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"visita.visitas.horario_salida == 'NULL'\\\">\\r\\n      <ion-item>\\r\\n        <ion-label><b>Fecha estimada de la visita:</b> {{visita.visitas.fecha_visita | date: 'dd/MM/yyyy hh:mm'}}</ion-label>\\r\\n      </ion-item>\\r\\n    </div>\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-label><b>Cliente:</b> {{visita.visitas.razon_social_cliente}}</ion-label>\\r\\n    </ion-item>\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-label><b>Sucursal:</b> {{visita.visitas.razon_social_sucursal}}</ion-label>\\r\\n    </ion-item>\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-label><b>Servicios ofrecidos:</b>\\r\\n        <div *ngFor=\\\"let servicio of visita.servicios2; let i = index\\\" style=\\\"margin-left:10px; margin-top: 10px\\\">\\r\\n          <div style=\\\"cursor: pointer;\\\" *ngIf=\\\"visita.visitas.estado_visitas == 'finalizada'\\\" (click)=\\\"editarServicio(servicio.id_servicio, servicio.id_formulario)\\\">\\r\\n            <ion-icon name=\\\"document-outline\\\" color=\\\"primary\\\"></ion-icon>\\r\\n            {{servicio.nombre_servicio}}{{\\\" - \\\" + servicio?.tecnicos}}\\r\\n            <ion-icon name=\\\"create-outline\\\" style=\\\"cursor: pointer;\\\" *ngIf=\\\"visita.visitas.estado_visitas == 'finalizada'\\\" ></ion-icon>  \\r\\n          </div>\\r\\n          <div *ngIf=\\\"visita.visitas.estado_visitas != 'finalizada'\\\">\\r\\n            <ion-icon name=\\\"document-outline\\\" color=\\\"primary\\\"></ion-icon>\\r\\n            {{servicio.nombre_servicio}}{{\\\" - \\\" + servicio?.tecnicos}}\\r\\n            <ion-icon name=\\\"create-outline\\\" style=\\\"cursor: pointer;\\\" *ngIf=\\\"visita.visitas.estado_visitas == 'finalizada'\\\" ></ion-icon>  \\r\\n          </div>\\r\\n        </div>\\r\\n      </ion-label>\\r\\n    </ion-item>\\r\\n    <div *ngIf=\\\"(visita.visitas.horario_salida != 'NULL') && (visita.visitas.estado_visitas != 'en proceso')\\\">\\r\\n      <div *ngIf=\\\"!pdf_generado && visita.visitas.pdfGenerado == 0\\\">\\r\\n        <ion-button expand=\\\"full\\\" (click)=\\\"generar_pdf()\\\">Generar PDF</ion-button>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"pdf_generado || visita.visitas.pdfGenerado == 1\\\">\\r\\n        <ion-button expand=\\\"full\\\" (click)=\\\"ver_pdf()\\\" color=\\\"success\\\">Ver PDF</ion-button>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"pdf_generado || visita.visitas.pdfGenerado == 1\\\">\\r\\n        <ion-button expand=\\\"full\\\" (click)=\\\"generar_pdf()\\\">Volver a generar PDF</ion-button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"visita.visitas.horario_salida == 'NULL'\\\">\\r\\n      <ion-button expand=\\\"full\\\" (click)=\\\"modificar_visita()\\\">Modificar visita</ion-button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div>\\r\\n    <img class=\\\"imagen_empresa\\\" src='../../../assets/LogoCPA-01.png'>\\r\\n  </div>\\r\\n\\r\\n\\r\\n</ion-content>\\r\\n\\r\\n\\r\\n\";","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http'\r\nimport { HttpClientModule } from '@angular/common/http'\r\nimport {version} from '../../../../environments/version'\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ApiClientesService {\r\n  private requestOptions\r\n  headers : any\r\n\r\n  private apiDir = \"http://157.230.90.222:3000\";\r\n\r\n\r\n  constructor(public http: HttpClient) {\r\n    this.requestOptions = {\r\n      headers : new HttpHeaders({\r\n        'Content-Type': 'application/json',\r\n        'version': version\r\n      })\r\n    };\r\n   }\r\n   \r\n  listado_clientes(){\r\n    return this.http.get(this.apiDir+'/clientes',this.requestOptions);\r\n  }\r\n\r\n  informacion_cliente(id){\r\n    return this.http.get(this.apiDir+'/clientes/id/'+id,this.requestOptions);\r\n  }\r\n\r\n  alta_sucursal(datos){\r\n    return this.http.post(this.apiDir+'/sucursales/crear',datos,this.requestOptions);\r\n  }\r\n\r\n  informacion_sucursal(id){\r\n    return this.http.get(this.apiDir+'/sucursales/id/'+id,this.requestOptions);\r\n  }\r\n\r\n  async informacion_visita(id){\r\n    var data = await this.http.get(this.apiDir+'/visitas/id/'+id,this.requestOptions);\r\n    console.log(this.apiDir+'/visitas/id/'+id,this.requestOptions)\r\n    return data.toPromise()\r\n  }\r\n\r\n  listado_workstations(id){\r\n    return this.http.get(this.apiDir+'/servicios/equipos/sucursal/'+id,this.requestOptions);\r\n  }\r\n  listado_grupoWorkstations(id){\r\n    return this.http.get(this.apiDir+'/servicios/gruposEquipos/sucursal/'+id,this.requestOptions);\r\n  }\r\n\r\n  borrar_equipo(id_equipo){\r\n    return this.http.post(this.apiDir+'/servicios/eliminarEquipos/'+id_equipo,null,this.requestOptions);\r\n  }\r\n\r\n  listado_productosServicio(id_servicio){\r\n    return this.http.get(this.apiDir+'/productos/idServicio/'+id_servicio,this.requestOptions);\r\n  }\r\n\r\n  cambiar_estado_visita(id_visita, estado){\r\n    console.log(this.apiDir+'/visitas/cambiarEstado',this.requestOptions);\r\n    var params = {id_visita:id_visita, estado:estado}\r\n    return new Promise((resolve, reject) => {\r\n      this.http.post(this.apiDir+'/visitas/cambiarEstado', params, this.requestOptions)       \r\n      .subscribe(response => {\r\n        resolve(response);\r\n      }, (error) => {\r\n        reject(error);\r\n      });\r\n    });\r\n    \r\n  }\r\n\r\n  eliminar_Grupo_workstation(id_producto){\r\n    console.log('delete2',id_producto)\r\n    return this.http.post(this.apiDir+'/servicios/eliminarGrupoEquipos/'+id_producto,this.requestOptions);\r\n  }\r\n\r\n  subir_planos(parametros){\r\n    return this.http.post(this.apiDir+'/planos/crear', parametros, this.requestOptions)\r\n  }\r\n\r\n  upload(params,bodyP = {}){\r\n    return new Promise((resolve, reject) => {\r\n      this.http.post(this.apiDir + params,bodyP)\r\n      // this.http.post(this.url + params, bodyP,{headers: header})\r\n        .subscribe(response => {\r\n          resolve(response);\r\n        }, (error) => {\r\n          reject(error);\r\n        });\r\n    });\r\n  }\r\n\r\n  ver_sucursal(id_sucursal){\r\n    return this.http.get(this.apiDir+'/sucursales/id/'+id_sucursal,this.requestOptions)\r\n  }\r\n\r\n  crear_pdf(id_visita){\r\n    return this.http.post(this.apiDir+'/pdf/create-pdf',id_visita,this.requestOptions);\r\n  }\r\n\r\n  ver_pdf(id_visita){\r\n    return this.http.get(this.apiDir+'/pdf/fetch-pdf/'+id_visita,this.requestOptions);\r\n  }\r\n\r\n  modificar_cliente(parametros){\r\n    return this.http.post(this.apiDir+'/clientes/actualizar',parametros,this.requestOptions)\r\n  }\r\n\r\n  subir_logo_cliente(parametros){\r\n    return this.http.post(this.apiDir+'/clientes/actualizarLogo', parametros, this.requestOptions);\r\n  }\r\n  eliminar_Logo_Cliente(parametros){\r\n    return this.http.post(this.apiDir+'/clientes/eliminarLogo', parametros, this.requestOptions);\r\n  }\r\n  eliminar_cliente(id_cliente){\r\n    return this.http.post(this.apiDir+'/clientes/eliminar/'+id_cliente,this.requestOptions)\r\n  }\r\n\r\n  eliminar_sucursal(id_sucursal){\r\n    return this.http.post(this.apiDir+'/sucursales/eliminar/'+id_sucursal,this.requestOptions)\r\n  }\r\n\r\n  eliminar_plano(id_plano){\r\n    return this.http.post(this.apiDir+'/planos/eliminar/'+id_plano,this.requestOptions)\r\n  }\r\n\r\n  modificar_sucursal(parametros){\r\n    return this.http.post(this.apiDir+'/sucursales/actualizar',parametros,this.requestOptions)\r\n  }\r\n\r\n  estadisticas(parametros){\r\n    return this.http.post(this.apiDir+'/clientes/estadisticas/',parametros,this.requestOptions);\r\n  }\r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2luYXMvYWRtaW5pc3RyYXItY2xpZW50ZXMvdmVyLWNsaWVudGUvbW9kaWZpY2FyLXZpc2l0YS9tb2RpZmljYXItdmlzaXRhLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { NavParams, ModalController } from '@ionic/angular';\r\nimport { ApiClientesService } from '../../servicios/api-clientes.service'\r\nimport { ApiVisitasService } from '../../../programar-visita/servicios/api-visitas.service'\r\nimport { ServicioTecnicosService } from '../../../administrar-tecnicos/servicios/servicio-tecnicos.service'\r\nimport * as moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'app-modificar-visita',\r\n  templateUrl: './modificar-visita.page.html',\r\n  styleUrls: ['./modificar-visita.page.scss'],\r\n})\r\nexport class ModificarVisitaPage implements OnInit {\r\n\r\n  public equipos;\r\n  public serviciosConEquipos = [];\r\n  public serviciosElegidos = [];\r\n  public serviciosParaEnviar = [];\r\n  public grupoWorkStation = []\r\n  public grupoWorkStationElegidos = []\r\n  public show = false\r\n  public id_visita = this.navParams.get('id_visita');\r\n  visita;\r\n  servicios_elegidosAux: string[] = [];\r\n  id_cliente_elegido: any = null;\r\n  sucursal_elegida: any = null;\r\n  fecha_elegida: any;\r\n  tecnico_elegido: any;\r\n\r\n  listado_clientes: any;\r\n  listado_sucursales_cliente: any;\r\n  listado_servicios: any;\r\n  listado_tecnicos: any;\r\n\r\n  fecha_actual: any;\r\n  dayNames= ['Domingo','Lunes','Martes','Miercoles','Jueves','Viernes','Sabado']\r\n  monthNames = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre']\r\n\r\n  constructor(private api: ApiVisitasService, private api_tecnicos: ServicioTecnicosService, private api_clientes:ApiClientesService, public navParams: NavParams, private ModalController: ModalController, private api_visitas: ApiVisitasService) { \r\n   \r\n  }\r\n\r\n\r\n  async ngOnInit() {\r\n    await this.api.mostrar_servicios().subscribe((data) =>{\r\n      this.listado_servicios = data;\r\n      this.listado_servicios = this.listado_servicios.result;\r\n      console.log(this.listado_servicios,'servicios')\r\n      this.actualizar_informacion().then(id =>{\r\n        console.warn(this.sucursal_elegida)\r\n        this.api.listado_equipos(this.sucursal_elegida).subscribe((res:any)=>{  \r\n          this.equipos = res.result;  \r\n          console.log(this.equipos,'equipos')  \r\n          for ( let servicio of this.listado_servicios){  \r\n            servicio.equipos = [];\r\n            for ( let equipo of this.equipos){  \r\n              if(equipo.id_servicio == servicio.id_servicio){  \r\n                servicio.equipos.push(equipo);\r\n              }\r\n            }  \r\n            if (servicio.equipos.length < 1){  \r\n              servicio.equipos.push({id_equipo: 0, id_servicio:servicio.id_servicio, nombre_equipo: 'Servicio principal'});\r\n            }  \r\n          }\r\n          console.log(this.listado_servicios,'servicios completos');  \r\n        })\r\n      })\r\n    }), (error => {\r\n      console.log(error)\r\n    }); \r\n   \r\n\r\n    this.api_tecnicos.listado_tecnicos().subscribe(data => {\r\n      this.listado_tecnicos = data;\r\n      this.listado_tecnicos = this.listado_tecnicos.result;\r\n      console.log(this.listado_tecnicos)\r\n    }, (error => {\r\n      console.log(error)\r\n    }))\r\n\r\n    this.fecha_actual = moment().format();\r\n\r\n  }\r\n\r\n  async actualizar_informacion(){\r\n    await this.api_clientes.informacion_visita(this.id_visita).then((data) => {\r\n      this.visita = data;\r\n      this.visita = this.visita.result;\r\n      this.id_cliente_elegido = this.visita.visitas.id_cliente\r\n      this.sucursal_elegida = this.visita.visitas.id_sucursal\r\n      this.sucursalesCliente(this.id_cliente_elegido)\r\n      // console.log('IDS:  ',this.visita, this.sucursal_elegida)\r\n      return this.visita.visitas.id_sucursal\r\n    }), (error => {\r\n      console.log(error)\r\n    })\r\n  }\r\n\r\n  sucursalesCliente(id_cliente){\r\n    this.api.informacion_cliente(id_cliente).subscribe(data => {\r\n      this.listado_sucursales_cliente = data\r\n      console.log(data)\r\n      this.listado_sucursales_cliente = this.listado_sucursales_cliente.result.sucursales.datosSucursal\r\n      // this.sucursal_elegida = null;\r\n      this.id_cliente_elegido = id_cliente;\r\n      this.selectSucursal()\r\n      console.log(this.listado_sucursales_cliente)\r\n    }), (error => {\r\n      console.log(error)\r\n    })\r\n  }\r\n\r\n  selectSucursal(){\r\n    this.api.listado_grupoWorkstations(this.sucursal_elegida).subscribe((data:any) =>{\r\n      // console.log('Grupo1', data.result)\r\n      var flag = 0\r\n      var array = []\r\n      var i = 0\r\n      var first = true\r\n      data.result.forEach((element) => {\r\n        if(element.id_equipo_grupo == flag){\r\n          // console.log(element.id_equipo_grupo, ' ' ,flag)\r\n          array[i].equipos.push({id_equipo: element.id_equipo, id_servicio:element.id_servicio,id_sucursal:element.id_sucursal, nombre_equipo:element.nombre_equipo,codigo_qr_equipo:element.codigo_qr_equipo,estado_servicio:element.estado_servicio,nombre_servicio:element.nombre_servicio, qr:element.qr})\r\n        }else{\r\n          if(!first){\r\n            i++\r\n          }\r\n          flag = element.id_equipo_grupo\r\n          array.push({nombre_equipo_grupo:element.nombre_equipo_grupo,id_equipo_grupo:element.id_equipo_grupo,equipos:[]})\r\n          array[i].equipos.push({id_equipo: element.id_equipo, id_servicio:element.id_servicio,id_sucursal:element.id_sucursal, nombre_equipo:element.nombre_equipo,codigo_qr_equipo:element.codigo_qr_equipo,estado_servicio:element.estado_servicio,nombre_servicio:element.nombre_servicio,qr:element.qr})\r\n          first = false\r\n        }\r\n      });\r\n      this.grupoWorkStation = array\r\n      // console.log('grupo2: ', this.grupoWorkStation)\r\n    })\r\n  }\r\n\r\n  programarVisita(){\r\n    for(let servicio of this.serviciosElegidos){\r\n      for(let equipo of servicio.equipos){\r\n        this.serviciosParaEnviar.push({id_servicio: servicio.id_servicio, id_tecnico: equipo.tecnico, id_equipo: equipo.id_equipo})\r\n      }\r\n    }\r\n    for(let workstation of this.grupoWorkStationElegidos){\r\n      for(let equipo of workstation.equipos){\r\n        this.serviciosParaEnviar.push({id_servicio: equipo.id_servicio, id_tecnico: workstation.tecnico, id_equipo: equipo.id_equipo})\r\n      }\r\n    }\r\n    console.log(this.serviciosParaEnviar);\r\n\r\n    this.api_visitas.modificar_visita({'id_cliente': this.id_cliente_elegido,\r\n    'id_sucursal': this.sucursal_elegida,\r\n    'servicios': this.serviciosParaEnviar,\r\n    'fecha_visita': this.fecha_elegida,\r\n    'id':this.visita.visitas.id_visita\r\n  }).subscribe(data => {\r\n      console.log(data)\r\n      location.reload();\r\n    }), (error =>{\r\n      console.log(error)\r\n    })\r\n    // this.api.crear_visita({'id_cliente': this.id_cliente_elegido,\r\n    //                       'id_sucursal': this.sucursal_elegida,\r\n    //                       'servicios': this.serviciosParaEnviar,\r\n    //                       'fecha_visita': this.fecha_elegida}).subscribe(data => {\r\n    //                           console.log(data)\r\n    //                           location.reload();\r\n    //                        }), (error =>{\r\n    //                          console.log(error)\r\n    //                        })\r\n  }\r\n\r\n  serviciosElegidosChange(){\r\n    this.serviciosElegidos = [];\r\n    for (let servicioID of this.servicios_elegidosAux){\r\n      for(let servicio of this.listado_servicios){\r\n        if(servicio.id_servicio == servicioID && servicio.qr == 0){\r\n          this.serviciosElegidos.push(servicio);\r\n        }\r\n      }\r\n    }\r\n    var arrayWorkstation:any = [{nombre_equipo_grupo:null, id_equipo_grupo:null, tecnico: null ,equipos:[]}]\r\n    var i = 0\r\n    var first = true\r\n    console.log(this.servicios_elegidosAux)\r\n    this.grupoWorkStation.forEach((workstation:any) =>{\r\n      workstation.equipos.forEach((servicio) => {\r\n        var val = servicio.id_servicio.toString()\r\n        if(this.servicios_elegidosAux.includes(val)){\r\n          if(this.checkExist(arrayWorkstation,workstation.nombre_equipo_grupo) || arrayWorkstation[0].nombre_equipo_grupo == null){\r\n              if(!first){\r\n                console.log('1')\r\n                i = i + 1\r\n                first = false\r\n                arrayWorkstation.push({nombre_equipo_grupo:workstation.nombre_equipo_grupo, id_equipo_grupo:workstation.id_equipo_grupo, tecnico: null ,equipos:[servicio]})\r\n              }else{\r\n                first = false\r\n                // console.log('2')\r\n                arrayWorkstation = [{nombre_equipo_grupo:workstation.nombre_equipo_grupo, id_equipo_grupo:workstation.id_equipo_grupo, tecnico: null ,equipos:[servicio]}]  \r\n              }\r\n          }else{\r\n            console.log('3')\r\n            arrayWorkstation[i].equipos.push(servicio)\r\n          }\r\n        }\r\n      });\r\n    })\r\n    this.grupoWorkStationElegidos = arrayWorkstation\r\n    this.show = true\r\n    if(this.grupoWorkStationElegidos[0].nombre_equipo_grupo == null){\r\n      this.show = false\r\n    }\r\n    console.log('Servicio elegidos: ',arrayWorkstation)\r\n  }\r\n\r\n  checkExist(array,nombre_equipo_grupo){\r\n    var resp = []\r\n    resp = array.find(resp =>\r\n      (resp.nombre_equipo_grupo == nombre_equipo_grupo)\r\n    )\r\n    if(resp == undefined){\r\n      return true\r\n    }else{\r\n      return false\r\n    }\r\n  }\r\n\r\n  close(){\r\n    this.ModalController.dismiss()\r\n  }\r\n\r\n  \r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2luYXMvYWRtaW5pc3RyYXItY2xpZW50ZXMvdmVyLWNsaWVudGUvdmVyLXZpc2l0YS92ZXItdmlzaXRhLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { NavParams, ModalController, LoadingController } from '@ionic/angular';\r\nimport { EditarVisitaComponent } from 'src/app/modals/editar-visita/editar-visita.component';\r\nimport { VerServicioVisitaComponent } from 'src/app/modals/ver-servicio-visita/ver-servicio-visita.component';\r\nimport { ApiClientesService } from '../../servicios/api-clientes.service'\r\nimport { ModificarVisitaPage } from '../modificar-visita/modificar-visita.page'\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-ver-visita',\r\n  templateUrl: './ver-visita.page.html',\r\n  styleUrls: ['./ver-visita.page.scss'],\r\n})\r\nexport class VerVisitaPage implements OnInit {\r\n\r\n  public id_visita = this.navParams.get('id_visita');\r\n  public visita: any;\r\n  public url;\r\n  public pdf_generado:boolean = false;\r\n  public validDate = true;\r\n\r\n  constructor(private navParams: NavParams, private api_visitas: ApiClientesService, private modalController: ModalController, public loadingController: LoadingController) { }\r\n\r\n  \r\n\r\n  ngOnInit() {\r\n    this.actualizar_informacion()\r\n  }\r\n\r\n  async generar_pdf(){\r\n    var loader = await this.loadingController.create({ message: \"Generando PDF\" });\r\n     loader.present();\r\n\r\n    console.log(this.id_visita)\r\n    this.api_visitas.crear_pdf({id_visita:this.id_visita}).subscribe(data => {\r\n      console.log(data)\r\n      this.pdf_generado = true;\r\n      loader.dismiss()\r\n    }, error => {\r\n      console.log(error)\r\n      loader.dismiss()\r\n    })\r\n  }\r\n\r\n  ver_pdf(){\r\n    this.api_visitas.ver_pdf(this.id_visita).subscribe(data => {\r\n      this.url = data;\r\n      console.log(this.url.url)\r\n      var win = window.open(this.url.url, '_blank');\r\n      win.focus();  \r\n    }, error => {\r\n      console.log(error)\r\n    })\r\n  }\r\n\r\n  close(){\r\n    this.modalController.dismiss()\r\n  }\r\n\r\n  actualizar_informacion(){\r\n    this.api_visitas.informacion_visita(this.id_visita).then(data => {\r\n      this.visita = data;\r\n      this.visita = this.visita.result;\r\n      if (new Date (this.visita.visitas.horario_salida).valueOf()) {\r\n        this.visita.visitas.horario_salida = new Date (this.visita.visitas.horario_salida)\r\n      }else{\r\n        this.validDate = false;\r\n      }\r\n      console.log(this.visita)\r\n      if (this.visita) {\r\n        this.visita.servicios2 = [];\r\n        for(let servicio of this.visita.servicios){\r\n          if(!this.visita?.servicios2.find(servicioAux => servicioAux.nombre_servicio == servicio.nombre_servicio)){\r\n            if (servicio.id_servicio == 22 || servicio.id_servicio == 20){\r\n              this.visita.servicios2.push({nombre_servicio: servicio.nombre_servicio, id_servicio:servicio.id_servicio, id_formulario:null});\r\n            }else{\r\n              this.visita.servicios2.push(servicio); \r\n            }\r\n          }\r\n        }\r\n        var aux = []\r\n        var aux2 = []\r\n        for (let index = 0; index < this.visita.servicios.length; index++) {\r\n          const element = this.visita.servicios[index];\r\n          if (!aux.some(servicio => servicio.id_servicio == element.id_servicio)) {\r\n            aux.push(element)\r\n          }\r\n        }\r\n        for (let index = 0; index < aux.length; index++) {\r\n          const element = aux[index];\r\n          aux[index].tecnicos = [];\r\n          aux[index] = this.visita.servicios.filter(servicio => servicio.id_servicio == element.id_servicio)\r\n          console.log(element)\r\n        }\r\n        for (let index = 0; index < this.visita.servicios.length; index++) {\r\n          const element = this.visita.servicios[index];\r\n          if (!aux2.some(servicio => servicio.tecnico?.id_tecnico == element.tecnico?.id_tecnico)) {\r\n            aux2.push(element.tecnico)\r\n          }\r\n        }\r\n        for (let index = 0; index < aux2.length; index++) {\r\n          const element = aux2[index];\r\n          for (let index2 = 0; index2 < aux.length; index2++) {\r\n            const element2 = aux[index2];\r\n            if ((element2.find(servicio => servicio.tecnico == element) && (!element2[0].tecnicos.some(tecnico => tecnico.id_tecnico == element.id_tecnico)))){\r\n              aux[index2][0].tecnicos.push(element)\r\n            }\r\n          }\r\n        }\r\n        for (let index = 0; index < this.visita.servicios2.length; index++) {\r\n          const element = this.visita.servicios2[index];\r\n          var nombreTecnico = \"\";\r\n          for (let tecnico of aux[index][0].tecnicos) {\r\n            if (nombreTecnico){\r\n              nombreTecnico = nombreTecnico + \", \" +tecnico.nombre_tecnico + \" \" + tecnico.apellido_tecnico;\r\n            }else{\r\n              nombreTecnico = tecnico.nombre_tecnico + \" \" + tecnico.apellido_tecnico;\r\n            }\r\n          }\r\n          element.tecnicos  = nombreTecnico\r\n        }    \r\n      }\r\n    }), (error => {\r\n      console.log(error)\r\n    })\r\n  }\r\n\r\n  async modificar_visita(){\r\n    const modal = await this.modalController.create({\r\n      component: ModificarVisitaPage,\r\n      cssClass: 'my-custom-class',\r\n      componentProps: {\r\n        'id_visita': this.id_visita\r\n      }\r\n    });\r\n    modal.onDidDismiss().then(data =>{\r\n      this.actualizar_informacion();\r\n    })\r\n    return await modal.present();\r\n  }\r\n\r\n  async editarServicio(id_servicio, id_formulario) {\r\n    if (id_formulario) {\r\n      const modal = await this.modalController.create({\r\n        component: EditarVisitaComponent,\r\n        componentProps: { id_servicio: id_servicio, id_visita:this.id_visita, id_formulario: id_formulario }\r\n        });\r\n      \r\n        await modal.present();\r\n    }else{ \r\n      const modal = await this.modalController.create({\r\n      component: VerServicioVisitaComponent,\r\n      componentProps: { id_servicio: id_servicio, visita:this.visita}\r\n      });\r\n      \r\n      await modal.present();\r\n    }\r\n    \r\n  \r\n  }\r\n}\r\n"]}