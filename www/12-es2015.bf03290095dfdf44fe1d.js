(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"1mX4":function(i,o,e){"use strict";e.d(o,"a",(function(){return a}));var t=e("fXoL"),n=e("TEn/"),s=e("jCJ1"),c=e("ofXK"),r=e("3Pt+");function l(i,o){if(1&i){const i=t.Nb();t.Mb(0,"ion-content"),t.Mb(1,"ion-item",2),t.Mb(2,"ion-label",3),t.ic(3," Razon social: "),t.Lb(),t.Mb(4,"ion-input",4),t.Ub("ngModelChange",(function(o){return t.ec(i),t.Wb().razon_social=o})),t.Lb(),t.Lb(),t.Mb(5,"ion-item",2),t.Mb(6,"ion-label",3),t.ic(7," Telefono: (solo numeros) "),t.Lb(),t.Mb(8,"ion-input",4),t.Ub("ngModelChange",(function(o){return t.ec(i),t.Wb().telefono=o})),t.Lb(),t.Lb(),t.Mb(9,"ion-item",2),t.Mb(10,"ion-label",3),t.ic(11," Email: "),t.Lb(),t.Mb(12,"ion-input",4),t.Ub("ngModelChange",(function(o){return t.ec(i),t.Wb().email=o})),t.Lb(),t.Lb(),t.Mb(13,"ion-item",2),t.Mb(14,"ion-label",3),t.ic(15," Direccion: "),t.Lb(),t.Mb(16,"ion-input",4),t.Ub("ngModelChange",(function(o){return t.ec(i),t.Wb().direccion=o})),t.Lb(),t.Lb(),t.Mb(17,"div",5),t.Mb(18,"ion-button",6),t.Ub("click",(function(){return t.ec(i),t.Wb().modificar_sucursal()})),t.ic(19,"Modificar"),t.Lb(),t.Lb(),t.Mb(20,"div",7),t.Kb(21,"img",8),t.Lb(),t.Lb()}if(2&i){const i=t.Wb();t.zb(4),t.bc("ngModel",i.razon_social),t.zb(4),t.bc("ngModel",i.telefono),t.zb(4),t.bc("ngModel",i.email),t.zb(4),t.bc("ngModel",i.direccion)}}let a=(()=>{class i{constructor(i,o,e){this.navParams=i,this.api=o,this.modalCtrl=e,this.id_sucursal=this.navParams.get("id_sucursal")}ngOnInit(){this.api.ver_sucursal(this.id_sucursal).subscribe(i=>{console.log(i),this.sucursal=i,this.sucursal=this.sucursal.result,this.razon_social=this.sucursal.sucursal[0].razon_social_sucursal,this.email=this.sucursal.sucursal[0].email_sucursal,this.telefono=this.sucursal.sucursal[0].telefono_sucursal,this.direccion=this.sucursal.sucursal[0].direccion_sucursal,this.id_cliente=this.sucursal.sucursal[0].id_cliente},i=>{console.log(i)})}modificar_sucursal(){this.objeto={id_cliente:this.id_cliente,id_sucursal:this.id_sucursal,razon_social_sucursal:this.razon_social,direccion_sucursal:this.direccion,telefono_sucursal:this.telefono,email_sucursal:this.email},console.log(this.objeto),this.api.modificar_sucursal(this.objeto).subscribe(i=>{console.log(i),this.modalCtrl.dismiss({dismissed:!0})},i=>{console.log(i)})}}return i.\u0275fac=function(o){return new(o||i)(t.Jb(n.D),t.Jb(s.a),t.Jb(n.B))},i.\u0275cmp=t.Db({type:i,selectors:[["app-modificar-sucursal"]],decls:5,vars:1,consts:[["color","primary",2,"text-align","center"],[4,"ngIf"],["lines","full"],[1,"titulos"],[3,"ngModel","ngModelChange"],[2,"width","100%","text-align","center","margin-top","10px"],[3,"click"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"]],template:function(i,o){1&i&&(t.Mb(0,"ion-header"),t.Mb(1,"ion-toolbar",0),t.Mb(2,"ion-title"),t.ic(3,"Modificar sucursal"),t.Lb(),t.Lb(),t.Lb(),t.hc(4,l,22,4,"ion-content",1)),2&i&&(t.zb(4),t.bc("ngIf",o.sucursal))},directives:[n.k,n.y,n.x,c.j,n.g,n.n,n.o,n.m,n.I,r.d,r.e,n.c],styles:[""]}),i})()},OAWW:function(i,o,e){"use strict";e.d(o,"a",(function(){return v}));var t=e("wd/R"),n=e("fXoL"),s=e("89nv"),c=e("u//c"),r=e("jCJ1"),l=e("TEn/"),a=e("3Pt+"),b=e("ofXK");function u(i,o){if(1&i&&(n.Mb(0,"ion-select-option",13),n.ic(1),n.Lb()),2&i){const i=o.$implicit;n.cc("value",i.id_servicio),n.zb(1),n.jc(i.nombre_servicio)}}function d(i,o){if(1&i&&(n.Mb(0,"ion-select-option",13),n.ic(1),n.Lb()),2&i){const i=o.$implicit;n.cc("value",i.id_tecnico),n.zb(1),n.lc("",i.nombre_tecnico," ",i.apellido_tecnico,"")}}function p(i,o){if(1&i){const i=n.Nb();n.Mb(0,"div"),n.Mb(1,"ion-label",16),n.ic(2),n.Lb(),n.Mb(3,"ion-item",17),n.Mb(4,"ion-label",4),n.ic(5,"Seleccionar t\xe9cnico a cargo"),n.Lb(),n.Mb(6,"ion-select",18),n.Ub("ngModelChange",(function(e){return n.ec(i),o.$implicit.tecnico=e})),n.hc(7,d,2,3,"ion-select-option",6),n.Lb(),n.Lb(),n.Lb()}if(2&i){const i=o.$implicit,e=n.Wb(2);n.zb(2),n.jc(i.nombre_equipo),n.zb(4),n.bc("ngModel",i.tecnico),n.zb(1),n.bc("ngForOf",e.listado_tecnicos)}}function h(i,o){if(1&i&&(n.Mb(0,"div",14),n.Mb(1,"h2",14),n.ic(2),n.Lb(),n.hc(3,p,8,3,"div",15),n.Lb()),2&i){const i=o.$implicit;n.zb(2),n.jc(i.nombre_servicio),n.zb(1),n.bc("ngForOf",i.equipos)}}function g(i,o){if(1&i&&(n.Mb(0,"div"),n.Mb(1,"ion-label",16),n.ic(2),n.Lb(),n.Lb()),2&i){const i=o.$implicit;n.zb(2),n.lc("",i.nombre_equipo,": ",i.nombre_servicio,"")}}function m(i,o){if(1&i&&(n.Mb(0,"ion-select-option",13),n.ic(1),n.Lb()),2&i){const i=o.$implicit;n.cc("value",i.id_tecnico),n.zb(1),n.lc("",i.nombre_tecnico," ",i.apellido_tecnico,"")}}function _(i,o){if(1&i){const i=n.Nb();n.Mb(0,"div",14),n.Mb(1,"h2",14),n.ic(2),n.Lb(),n.hc(3,g,3,2,"div",15),n.Mb(4,"ion-item",17),n.Mb(5,"ion-label",4),n.ic(6,"Seleccionar t\xe9cnico a cargo"),n.Lb(),n.Mb(7,"ion-select",18),n.Ub("ngModelChange",(function(e){return n.ec(i),o.$implicit.tecnico=e})),n.hc(8,m,2,3,"ion-select-option",6),n.Lb(),n.Lb(),n.Lb()}if(2&i){const i=o.$implicit,e=n.Wb(2);n.zb(2),n.jc(i.nombre_equipo_grupo),n.zb(1),n.bc("ngForOf",i.equipos),n.zb(4),n.bc("ngModel",i.tecnico),n.zb(1),n.bc("ngForOf",e.listado_tecnicos)}}function f(i,o){if(1&i&&(n.Mb(0,"div"),n.hc(1,_,9,4,"div",7),n.Lb()),2&i){const i=n.Wb();n.zb(1),n.bc("ngForOf",i.grupoWorkStationElegidos)}}let v=(()=>{class i{constructor(i,o,e,t,n,s){this.api=i,this.api_tecnicos=o,this.api_clientes=e,this.navParams=t,this.ModalController=n,this.api_visitas=s,this.serviciosConEquipos=[],this.serviciosElegidos=[],this.serviciosParaEnviar=[],this.grupoWorkStation=[],this.grupoWorkStationElegidos=[],this.show=!1,this.id_visita=this.navParams.get("id_visita"),this.servicios_elegidosAux=[],this.id_cliente_elegido=null,this.sucursal_elegida=null,this.dayNames=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],this.monthNames=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]}ngOnInit(){this.api.mostrar_servicios().subscribe(i=>{this.listado_servicios=i,this.listado_servicios=this.listado_servicios.result,console.log(this.listado_servicios,"servicios"),this.api.listado_equipos().subscribe(i=>{this.equipos=i.result,console.log(this.equipos,"equipos");for(let o of this.listado_servicios){o.equipos=[];for(let i of this.equipos)i.id_servicio==o.id_servicio&&o.equipos.push(i);o.equipos.length<1&&o.equipos.push({id_equipo:0,id_servicio:o.id_servicio,nombre_equipo:"Servicio principal"})}console.log(this.listado_servicios,"servicios completos")})}),this.api_tecnicos.listado_tecnicos().subscribe(i=>{this.listado_tecnicos=i,this.listado_tecnicos=this.listado_tecnicos.result,console.log(this.listado_tecnicos)},i=>{console.log(i)}),this.fecha_actual=t().format(),this.actualizar_informacion()}actualizar_informacion(){this.api_clientes.informacion_visita(this.id_visita).subscribe(i=>{this.visita=i,this.visita=this.visita.result,this.id_cliente_elegido=this.visita.visitas.id_cliente,this.sucursal_elegida=this.visita.visitas.id_sucursal,this.sucursalesCliente(this.id_cliente_elegido),console.log("IDS:  ",this.visita,this.sucursal_elegida)})}sucursalesCliente(i){this.api.informacion_cliente(i).subscribe(o=>{this.listado_sucursales_cliente=o,console.log(o),this.listado_sucursales_cliente=this.listado_sucursales_cliente.result.sucursales.datosSucursal,this.id_cliente_elegido=i,this.selectSucursal(),console.log(this.listado_sucursales_cliente)})}selectSucursal(){this.api.listado_grupoWorkstations(this.sucursal_elegida).subscribe(i=>{var o=0,e=[],t=0,n=!0;i.result.forEach(i=>{i.id_equipo_grupo==o?e[t].equipos.push({id_equipo:i.id_equipo,id_servicio:i.id_servicio,id_sucursal:i.id_sucursal,nombre_equipo:i.nombre_equipo,codigo_qr_equipo:i.codigo_qr_equipo,estado_servicio:i.estado_servicio,nombre_servicio:i.nombre_servicio,qr:i.qr}):(n||t++,o=i.id_equipo_grupo,e.push({nombre_equipo_grupo:i.nombre_equipo_grupo,id_equipo_grupo:i.id_equipo_grupo,equipos:[]}),e[t].equipos.push({id_equipo:i.id_equipo,id_servicio:i.id_servicio,id_sucursal:i.id_sucursal,nombre_equipo:i.nombre_equipo,codigo_qr_equipo:i.codigo_qr_equipo,estado_servicio:i.estado_servicio,nombre_servicio:i.nombre_servicio,qr:i.qr}),n=!1)}),this.grupoWorkStation=e})}programarVisita(){for(let i of this.serviciosElegidos)for(let o of i.equipos)this.serviciosParaEnviar.push({id_servicio:i.id_servicio,id_tecnico:o.tecnico,id_equipo:o.id_equipo});for(let i of this.grupoWorkStationElegidos)for(let o of i.equipos)this.serviciosParaEnviar.push({id_servicio:o.id_servicio,id_tecnico:i.tecnico,id_equipo:o.id_equipo});console.log(this.serviciosParaEnviar),this.api_visitas.modificar_visita({id_cliente:this.id_cliente_elegido,id_sucursal:this.sucursal_elegida,servicios:this.serviciosParaEnviar,fecha_visita:this.fecha_elegida,id:this.visita.visitas.id_visita}).subscribe(i=>{console.log(i),location.reload()})}serviciosElegidosChange(){this.serviciosElegidos=[];for(let t of this.servicios_elegidosAux)for(let i of this.listado_servicios)i.id_servicio==t&&0==i.qr&&this.serviciosElegidos.push(i);var i=[{nombre_equipo_grupo:null,id_equipo_grupo:null,tecnico:null,equipos:[]}],o=0,e=!0;console.log(this.servicios_elegidosAux),this.grupoWorkStation.forEach(t=>{t.equipos.forEach(n=>{var s=n.id_servicio.toString();this.servicios_elegidosAux.includes(s)&&(this.checkExist(i,t.nombre_equipo_grupo)||null==i[0].nombre_equipo_grupo?e?(e=!1,i=[{nombre_equipo_grupo:t.nombre_equipo_grupo,id_equipo_grupo:t.id_equipo_grupo,tecnico:null,equipos:[n]}]):(console.log("1"),o+=1,e=!1,i.push({nombre_equipo_grupo:t.nombre_equipo_grupo,id_equipo_grupo:t.id_equipo_grupo,tecnico:null,equipos:[n]})):(console.log("3"),i[o].equipos.push(n)))})}),this.grupoWorkStationElegidos=i,this.show=!0,null==this.grupoWorkStationElegidos[0].nombre_equipo_grupo&&(this.show=!1),console.log("Servicio elegidos: ",i)}checkExist(i,o){return null==i.find(i=>i.nombre_equipo_grupo==o)}close(){this.ModalController.dismiss()}}return i.\u0275fac=function(o){return new(o||i)(n.Jb(s.a),n.Jb(c.a),n.Jb(r.a),n.Jb(l.D),n.Jb(l.B),n.Jb(s.a))},i.\u0275cmp=n.Db({type:i,selectors:[["app-modificar-visita"]],decls:24,vars:12,consts:[["color","primary"],["slot","end"],[3,"click"],["name","close-outline"],["fixed","",2,"text-align","center"],["multiple","true",3,"disabled","ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["style","text-align: center;",4,"ngFor","ngForOf"],[4,"ngIf"],["displayFormat","DDDD D MMMM YYYY HH:mm","max","2022",3,"ngModel","doneText","cancelText","monthNames","dayNames","min","value","ngModelChange"],[2,"width","100%","text-align","center"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"],[3,"value"],[2,"text-align","center"],[4,"ngFor","ngForOf"],["fixed","",2,"text-align","center","color","var(--ion-color-secondary)","font-weight","bold"],[2,"margin-top","10px"],[3,"ngModel","ngModelChange"]],template:function(i,o){1&i&&(n.Mb(0,"ion-header"),n.Mb(1,"ion-toolbar",0),n.Mb(2,"ion-title"),n.ic(3,"Modificar Visita"),n.Lb(),n.Mb(4,"ion-buttons",1),n.Mb(5,"ion-button",2),n.Ub("click",(function(){return o.close()})),n.Kb(6,"ion-icon",3),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Mb(7,"ion-content"),n.Mb(8,"ion-item"),n.Mb(9,"ion-label",4),n.ic(10,"Seleccionar servicios a ofrecer"),n.Lb(),n.Mb(11,"ion-select",5),n.Ub("ngModelChange",(function(i){return o.servicios_elegidosAux=i}))("ionChange",(function(){return o.serviciosElegidosChange()})),n.hc(12,u,2,2,"ion-select-option",6),n.Lb(),n.Lb(),n.hc(13,h,4,2,"div",7),n.hc(14,f,2,1,"div",8),n.Mb(15,"ion-item"),n.Mb(16,"ion-label",4),n.ic(17,"Elegir una fecha"),n.Lb(),n.Mb(18,"ion-datetime",9),n.Ub("ngModelChange",(function(i){return o.fecha_elegida=i})),n.Lb(),n.Lb(),n.Mb(19,"div",10),n.Mb(20,"ion-button",2),n.Ub("click",(function(){return o.programarVisita()})),n.ic(21,"Modificar"),n.Lb(),n.Lb(),n.Mb(22,"div",11),n.Kb(23,"img",12),n.Lb(),n.Lb()),2&i&&(n.zb(11),n.bc("disabled",null==o.sucursal_elegida)("ngModel",o.servicios_elegidosAux),n.zb(1),n.bc("ngForOf",o.listado_servicios),n.zb(1),n.bc("ngForOf",o.serviciosElegidos),n.zb(1),n.bc("ngIf",o.show),n.zb(4),n.cc("min",o.fecha_actual),n.cc("value",o.fecha_actual),n.bc("ngModel",o.fecha_elegida)("doneText","Listo")("cancelText","Cancelar")("monthNames",o.monthNames)("dayNames",o.dayNames))},directives:[l.k,l.y,l.x,l.d,l.c,l.l,l.g,l.n,l.o,l.r,l.H,a.d,a.e,b.i,b.j,l.h,l.s],styles:[""]}),i})()},aaHe:function(i,o,e){"use strict";e.d(o,"a",(function(){return u}));var t=e("mrSG"),n=e("fXoL"),s=e("+1S5"),c=e("TEn/"),r=e("3Pt+"),l=e("ofXK");function a(i,o){if(1&i&&(n.Mb(0,"div"),n.Mb(1,"ion-select-option",6),n.ic(2),n.Lb(),n.Lb()),2&i){const i=n.Wb().$implicit;n.zb(1),n.cc("value",i.id_servicio),n.zb(1),n.jc(i.nombre_servicio)}}function b(i,o){if(1&i&&(n.Mb(0,"div"),n.hc(1,a,3,2,"div",5),n.Lb()),2&i){const i=o.$implicit;n.zb(1),n.bc("ngIf",1==i.qr)}}let u=(()=>{class i{constructor(i,o,e,t){this.api_servicios=i,this.navParams=o,this.modalCtrl=e,this.alertController=t,this.id_sucursal=this.navParams.get("id_sucursal"),this.id_equipo_grupo=this.navParams.get("id_equipo_grupo")}ngOnInit(){console.log(this.id_sucursal),this.api_servicios.mostrar_servicios().subscribe(i=>{this.servicios=i,this.servicios=this.servicios.result,console.log(this.servicios)})}alta_workstation(){this.id_servicio?(this.object={nombre_equipos:this.nombre_workstation,id_servicio:this.id_servicio,id_sucursal:this.id_sucursal,id_equipo_grupo:this.id_equipo_grupo},this.api_servicios.alta_workstation(this.object).subscribe(i=>{console.log(i),this.modalCtrl.dismiss({dismissed:!0})})):this.presentAlert()}presentAlert(){return Object(t.a)(this,void 0,void 0,(function*(){const i=yield this.alertController.create({message:"Para crear la workstation debes seleccionar el servicio que cumple",buttons:["OK"]});yield i.present()}))}}return i.\u0275fac=function(o){return new(o||i)(n.Jb(s.a),n.Jb(c.D),n.Jb(c.B),n.Jb(c.a))},i.\u0275cmp=n.Db({type:i,selectors:[["app-alta-workstation"]],decls:13,vars:3,consts:[["lines","full"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[2,"text-align","center"],["expand","full",3,"click"],[4,"ngIf"],[3,"value"]],template:function(i,o){1&i&&(n.Mb(0,"ion-content"),n.Mb(1,"ion-item",0),n.Mb(2,"ion-label"),n.ic(3,"Nombre del workstation: "),n.Lb(),n.Mb(4,"ion-input",1),n.Ub("ngModelChange",(function(i){return o.nombre_workstation=i})),n.Lb(),n.Lb(),n.Mb(5,"ion-item",0),n.Mb(6,"ion-label"),n.ic(7,"Servicio que cumple"),n.Lb(),n.Mb(8,"ion-select",1),n.Ub("ngModelChange",(function(i){return o.id_servicio=i})),n.hc(9,b,2,1,"div",2),n.Lb(),n.Lb(),n.Mb(10,"div",3),n.Mb(11,"ion-button",4),n.Ub("click",(function(){return o.alta_workstation()})),n.ic(12,"Dar de alta"),n.Lb(),n.Lb(),n.Lb()),2&i&&(n.zb(4),n.bc("ngModel",o.nombre_workstation),n.zb(4),n.bc("ngModel",o.id_servicio),n.zb(1),n.bc("ngForOf",o.servicios))},directives:[c.g,c.n,c.o,c.m,c.I,r.d,r.e,c.r,c.H,l.i,c.c,l.j,c.s],styles:["ion-content[_ngcontent-%COMP%]{--background:#dfdfdf;border:2px solid #000}"]}),i})()},cZ9Q:function(i,o,e){"use strict";e.d(o,"a",(function(){return C}));var t=e("mrSG"),n=e("aaHe"),s=e("fXoL"),c=e("TEn/"),r=e("jCJ1"),l=e("X9o6"),a=e("+1S5"),b=e("ofXK");function u(i,o){if(1&i){const i=s.Nb();s.Mb(0,"ion-icon",27),s.Ub("click",(function(){return s.ec(i),s.Wb(2).deleteImprimirQrSucursal()})),s.Lb()}if(2&i){const i=s.Wb(2);s.bc("title","Eliminar QR de la lista ("+i.showDeleteQrSucursal.count+")")}}function d(i,o){1&i&&(s.Mb(0,"div"),s.Mb(1,"ion-item"),s.Mb(2,"ion-label",28),s.ic(3,"No se encontraron WorkStation"),s.Lb(),s.Lb(),s.Lb())}function p(i,o){1&i&&(s.Mb(0,"div"),s.Mb(1,"ion-item"),s.Mb(2,"ion-label",28),s.ic(3,"No se encontraron equipos"),s.Lb(),s.Lb(),s.Lb())}function h(i,o){if(1&i){const i=s.Nb();s.Mb(0,"ion-icon",27),s.Ub("click",(function(){s.ec(i);const o=s.Wb(2),e=o.$implicit,t=o.index,n=s.Wb(2).index;return s.Wb(3).deleteImprimirQr(e,t,n)})),s.Lb()}if(2&i){const i=s.Wb(2).index,o=s.Wb(2).index,e=s.Wb(3);s.bc("title","Eliminar QR de la lista ("+e.showDeleteQr[o][i].count+")")}}function g(i,o){if(1&i){const i=s.Nb();s.Mb(0,"ion-row",41),s.Mb(1,"ion-col",42),s.Mb(2,"ion-label"),s.ic(3),s.Lb(),s.Lb(),s.Mb(4,"ion-col",43),s.Mb(5,"ion-label"),s.ic(6),s.Lb(),s.Lb(),s.Mb(7,"ion-col",9),s.Mb(8,"ion-card",12),s.Mb(9,"div"),s.Mb(10,"a",13),s.Kb(11,"img",14),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Mb(12,"ion-col",37),s.Mb(13,"ion-icon",16),s.Ub("click",(function(){s.ec(i);const o=s.Wb(),e=o.$implicit,t=o.index,n=s.Wb(2).index;return s.Wb(3).addmprimirQr(e,t,n)})),s.Lb(),s.hc(14,h,1,1,"ion-icon",17),s.Lb(),s.Mb(15,"ion-col",38),s.Mb(16,"ion-icon",32),s.Ub("click",(function(){s.ec(i);const o=s.Wb().$implicit;return s.Wb(5).borrar_equipo(o.id_equipo)})),s.Lb(),s.Lb(),s.Lb()}if(2&i){const i=s.Wb(),o=i.$implicit,e=i.index,t=s.Wb(2).index,n=s.Wb(3);s.zb(3),s.jc(o.nombre_equipo),s.zb(3),s.jc(o.nombre_servicio),s.zb(4),s.bc("href",o.codigo_qr_equipo,s.fc),s.zb(1),s.bc("src",o.codigo_qr_equipo,s.fc),s.zb(3),s.bc("ngIf",n.showDeleteQr[t][e].show)}}function m(i,o){if(1&i&&(s.Mb(0,"div"),s.hc(1,g,17,5,"ion-row",40),s.Lb()),2&i){const i=o.$implicit;s.zb(1),s.bc("ngIf",null!=i.nombre_equipo)}}function _(i,o){if(1&i&&(s.Mb(0,"div"),s.hc(1,m,2,1,"div",39),s.Lb()),2&i){const i=s.Wb().$implicit;s.zb(1),s.bc("ngForOf",i.equipos)}}function f(i,o){if(1&i){const i=s.Nb();s.Mb(0,"ion-item",7),s.Mb(1,"ion-grid"),s.Mb(2,"ion-row"),s.Mb(3,"ion-col",30),s.ic(4),s.Lb(),s.Mb(5,"ion-col",31),s.Mb(6,"ion-icon",32),s.Ub("click",(function(){s.ec(i);const e=o.$implicit,t=o.index;return s.Wb(3).borrar_equipo_grupo(e.id_equipo_grupo,t)})),s.Lb(),s.Lb(),s.Mb(7,"ion-col",33),s.Mb(8,"ion-item",34),s.Mb(9,"ion-icon",35),s.Ub("click",(function(){s.ec(i);const e=o.$implicit;return s.Wb(3).imprimirQrThisWorkstation(e)})),s.Lb(),s.Mb(10,"ion-button",26),s.Ub("click",(function(){s.ec(i);const e=o.$implicit;return s.Wb(3).altaWorkstation(e.id_equipo_grupo)})),s.ic(11,"Agregar workstation"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Mb(12,"ion-item",7),s.Mb(13,"ion-grid"),s.Mb(14,"ion-row"),s.Mb(15,"ion-col",20),s.Mb(16,"ion-label"),s.Mb(17,"b"),s.ic(18,"Workstation"),s.Lb(),s.Lb(),s.Lb(),s.Mb(19,"ion-col",36),s.Mb(20,"ion-label"),s.Mb(21,"b"),s.ic(22,"Servicio"),s.Lb(),s.Lb(),s.Lb(),s.Mb(23,"ion-col",9),s.Mb(24,"ion-label"),s.Mb(25,"b"),s.ic(26,"Codigo QR"),s.Lb(),s.Lb(),s.Lb(),s.Mb(27,"ion-col",37),s.Kb(28,"ion-label"),s.Lb(),s.Mb(29,"ion-col",38),s.Mb(30,"ion-label"),s.Mb(31,"b"),s.ic(32,"Eliminar"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.hc(33,p,4,0,"div",0),s.hc(34,_,2,1,"div",0),s.Lb(),s.Lb()}if(2&i){const i=o.$implicit;s.zb(4),s.jc(i.nombre_equipo_grupo),s.zb(29),s.bc("ngIf",0==i.equipos.length||0==i.length),s.zb(1),s.bc("ngIf",i.equipos.length>0)}}function v(i,o){if(1&i&&(s.Mb(0,"div"),s.hc(1,f,35,3,"ion-item",29),s.Lb()),2&i){const i=s.Wb(2);s.zb(1),s.bc("ngForOf",i.grupoWorkStation)}}function M(i,o){if(1&i){const i=s.Nb();s.Mb(0,"div"),s.Mb(1,"ion-row",2),s.Mb(2,"ion-col",3),s.Mb(3,"b",4),s.ic(4,"Informacion de la sucursal"),s.Lb(),s.Lb(),s.Mb(5,"ion-col",5),s.Mb(6,"ion-icon",6),s.Ub("click",(function(){return s.ec(i),s.Wb().imprimirAllQrSucursal()})),s.Lb(),s.Lb(),s.Lb(),s.Mb(7,"ion-item",7),s.Mb(8,"ion-grid"),s.Mb(9,"ion-row"),s.Mb(10,"ion-col",8),s.Mb(11,"ion-label"),s.Mb(12,"b"),s.ic(13,"Sucursal"),s.Lb(),s.Lb(),s.Lb(),s.Mb(14,"ion-col",9),s.Mb(15,"ion-label"),s.Mb(16,"b"),s.ic(17,"Telefono"),s.Lb(),s.Lb(),s.Lb(),s.Mb(18,"ion-col",8),s.Mb(19,"ion-label"),s.Mb(20,"b"),s.ic(21,"Mail"),s.Lb(),s.Lb(),s.Lb(),s.Mb(22,"ion-col",9),s.Mb(23,"ion-label"),s.Mb(24,"b"),s.ic(25,"Codigo QR"),s.Lb(),s.Lb(),s.Lb(),s.Mb(26,"ion-col",9),s.Mb(27,"ion-label"),s.Mb(28,"b"),s.ic(29,"Imprimir"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Mb(30,"ion-item",7),s.Mb(31,"ion-grid"),s.Mb(32,"ion-row"),s.Mb(33,"ion-col",10),s.Mb(34,"ion-label"),s.ic(35),s.Lb(),s.Lb(),s.Mb(36,"ion-col",11),s.Mb(37,"ion-label"),s.ic(38),s.Lb(),s.Lb(),s.Mb(39,"ion-col",10),s.Mb(40,"ion-label"),s.ic(41),s.Lb(),s.Lb(),s.Mb(42,"ion-col",9),s.Mb(43,"ion-card",12),s.Mb(44,"div"),s.Mb(45,"a",13),s.Kb(46,"img",14),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Mb(47,"ion-col",15),s.Mb(48,"ion-icon",16),s.Ub("click",(function(){return s.ec(i),s.Wb().addImprimirQrSucursal()})),s.Lb(),s.hc(49,u,1,1,"ion-icon",17),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Kb(50,"div",18),s.Mb(51,"ion-row",19),s.Mb(52,"ion-col",20),s.Mb(53,"ion-item",21),s.Mb(54,"ion-label",22),s.Mb(55,"b"),s.ic(56,"Workstations/equipos"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Mb(57,"ion-col",23),s.Mb(58,"ion-item",24),s.Kb(59,"ion-label"),s.Mb(60,"ion-icon",25),s.Ub("click",(function(){return s.ec(i),s.Wb().imprimirQrAllWorkstations()})),s.Lb(),s.Mb(61,"ion-button",26),s.Ub("click",(function(){return s.ec(i),s.Wb().alertAltaGrupoWorkstation()})),s.ic(62,"Agregar grupo de workstations"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.hc(63,d,4,0,"div",0),s.hc(64,v,2,1,"div",0),s.Lb()}if(2&i){const i=s.Wb();s.zb(35),s.jc(i.sucursal.sucursal[0].razon_social_sucursal),s.zb(3),s.jc(i.sucursal.sucursal[0].telefono_sucursal),s.zb(3),s.jc(i.sucursal.sucursal[0].email_sucursal),s.zb(4),s.bc("href",i.sucursal.sucursal[0].codigo_qr,s.fc),s.zb(1),s.bc("src",i.sucursal.sucursal[0].codigo_qr,s.fc),s.zb(3),s.bc("ngIf",i.showDeleteQrSucursal.show),s.zb(14),s.bc("ngIf",null==i.grupoWorkStation),s.zb(1),s.bc("ngIf",null!=i.grupoWorkStation)}}function L(i,o){if(1&i){const i=s.Nb();s.Mb(0,"ion-item",48),s.Mb(1,"ion-icon",49),s.Ub("click",(function(){s.ec(i);const o=s.Wb().$implicit;return s.Wb(2).openPdf(o.url_imagen_plano)})),s.Lb(),s.Mb(2,"ion-label",26),s.Ub("click",(function(){s.ec(i);const o=s.Wb().$implicit;return s.Wb(2).openPdf(o.url_imagen_plano)})),s.ic(3),s.Lb(),s.Mb(4,"ion-icon",50),s.Ub("click",(function(){s.ec(i);const o=s.Wb().$implicit;return s.Wb(2).alert_eliminar_plano(o.id_plano)})),s.Lb(),s.Lb()}if(2&i){const i=s.Wb().$implicit;s.zb(3),s.jc(i.name)}}function q(i,o){if(1&i&&(s.Mb(0,"div"),s.hc(1,L,5,1,"ion-item",47),s.Lb()),2&i){const i=s.Wb(2);s.zb(1),s.bc("ngIf",i.sucursal.planos.length>0)}}function z(i,o){1&i&&(s.Mb(0,"ion-item",48),s.Mb(1,"ion-label"),s.ic(2,"No hay planos cargados"),s.Lb(),s.Lb())}function k(i,o){if(1&i){const i=s.Nb();s.Mb(0,"div",44),s.Mb(1,"ion-item",21),s.Mb(2,"ion-label"),s.Mb(3,"b"),s.ic(4,"Planos de la sucursal"),s.Lb(),s.Lb(),s.Mb(5,"input",45),s.Ub("change",(function(o){return s.ec(i),s.Wb().showFile(o.target.files)})),s.Lb(),s.Mb(6,"ion-icon",46),s.Ub("click",(function(){return s.ec(i),s.Wb().agregar_plano()})),s.Lb(),s.Lb(),s.hc(7,q,2,1,"div",39),s.hc(8,z,3,0,"ion-item",47),s.Lb()}if(2&i){const i=s.Wb();s.zb(5),s.bc("disabled",i.disabled),s.zb(2),s.bc("ngForOf",i.sucursal.planos),s.zb(1),s.bc("ngIf",0==i.sucursal.planos.length)}}function w(i,o){if(1&i){const i=s.Nb();s.Mb(0,"ion-footer"),s.Mb(1,"ion-toolbar",51),s.Mb(2,"ion-title"),s.ic(3),s.Lb(),s.Mb(4,"ion-buttons",52),s.Mb(5,"ion-button",53),s.Ub("click",(function(){return s.ec(i),s.Wb().printSelect()})),s.ic(6,"Imprimir"),s.Lb(),s.Mb(7,"ion-button",54),s.Ub("click",(function(){return s.ec(i),s.Wb().deletePrintSelect()})),s.ic(8,"Cancelar"),s.Lb(),s.Lb(),s.Lb(),s.Lb()}if(2&i){const i=s.Wb();s.zb(3),s.kc("QR'S Seleccionados (",i.qrsToPrint.length,")")}}let C=(()=>{class i{constructor(i,o,e,t,n,s,c){this.navParams=i,this.api_sucursales=o,this.modalController=e,this.imageCompress=t,this.loadingController=n,this.api_servicios=s,this.alertController=c,this.id_sucursal=this.navParams.get("id_sucursal"),this.imagen=[],this.disabled=!1,this.fileNames=[],this.filesToUpload=[],this.qrsToPrint=[],this.showDeleteQrSucursal={show:!1,count:0},this.showDeleteQr=[]}ngOnInit(){this.actualizar_informacion(!1)}altaWorkstation(i){return Object(t.a)(this,void 0,void 0,(function*(){const o=yield this.modalController.create({component:n.a,cssClass:"modal-chiquito",componentProps:{id_sucursal:this.id_sucursal,id_equipo_grupo:i}});return o.onDidDismiss().then(i=>{this.actualizar_informacion(!1)}),yield o.present()}))}altaGrupoWorkstation(i){this.api_servicios.alta_Grupo_workstation({nombre_equipo_grupo:i,id_sucursal:this.id_sucursal}).subscribe(i=>{this.actualizar_informacion(!1)})}alertAltaGrupoWorkstation(){return Object(t.a)(this,void 0,void 0,(function*(){const i=yield this.alertController.create({header:"Crear Grupo de Workstation",inputs:[{name:"nombre",type:"text",placeholder:"nombre"}],buttons:[{text:"Cancelar",handler:()=>{}},{text:"Crear",handler:i=>{this.altaGrupoWorkstation(i.nombre)}}]});yield i.present()}))}borrar_equipo(i){this.api_sucursales.borrar_equipo(i).subscribe(i=>{this.actualizar_informacion(!1)})}borrar_equipo_grupo(i,o){this.api_sucursales.eliminar_Grupo_workstation(i).subscribe(i=>{this.grupoWorkStation.splice(o,1)})}actualizar_informacion(i){this.api_sucursales.informacion_sucursal(this.id_sucursal).subscribe(o=>{this.sucursal=o,this.sucursal=this.sucursal.result;for(let i=0;i<this.sucursal.planos.length;i++)Object.defineProperty(this.sucursal.planos[i],"name",{value:this.sucursal.planos[i].url_imagen_plano.slice(27)});console.log("sucursal: ",this.sucursal),i&&this.loadingController.dismiss()}),this.api_sucursales.listado_grupoWorkstations(this.id_sucursal).subscribe(i=>{console.log("Grupo1",i.result);var o=0,e=[],t=0,n=!0;if(null!=i.result){i.result.forEach(i=>{i.id_equipo_grupo==o?(this.showDeleteQr[t].push({show:!1,count:0}),e[t].equipos.push({id_equipo:i.id_equipo,id_servicio:i.id_servicio,id_sucursal:i.id_sucursal,nombre_equipo:i.nombre_equipo,codigo_qr_equipo:i.codigo_qr_equipo,estado_servicio:i.estado_servicio,nombre_servicio:i.nombre_servicio})):(n||t++,o=i.id_equipo_grupo,e.push({nombre_equipo_grupo:i.nombre_equipo_grupo,id_equipo_grupo:i.id_equipo_grupo,equipos:[]}),this.showDeleteQr.push([]),e[t].equipos.push({id_equipo:i.id_equipo,id_servicio:i.id_servicio,id_sucursal:i.id_sucursal,nombre_equipo:i.nombre_equipo,codigo_qr_equipo:i.codigo_qr_equipo,estado_servicio:i.estado_servicio,nombre_servicio:i.nombre_servicio}),this.showDeleteQr[t].push({show:!1,count:0}),n=!1)}),console.log(this.showDeleteQr),this.grupoWorkStation=e;for(let i of this.grupoWorkStation)i.equipos.sort((function(i,o){return i.nombre_equipo>o.nombre_equipo?1:i.nombre_equipo<o.nombre_equipo?-1:0}))}})}openPdf(i){window.open(i)}agregar_plano(){document.getElementById("inputUploadFile").click()}showFile(i){if(i.length>0){for(const t in i){var o=i[t].name,e=this.filesToUpload.filter(i=>i.name==o);0==e.length?this.filesToUpload.push(i[t]):alert("Ya existe: "+o)}this.filesToUpload.splice(-2,2),this.uploadFile(this.filesToUpload),this.filesToUpload=[],o=null,e=null}}uploadFile(i){return Object(t.a)(this,void 0,void 0,(function*(){(yield this.loadingController.create({message:"Subiendo Archivos"})).present(),this.disabled=!0;for(let o=0;o<i.length;o++){const e=new FormData;e.append("file",i[o],i[o].name),e.append("id_sucursal",this.sucursal.sucursal[0].id_sucursal),this.api_sucursales.upload("/planos/crear",e).then(i=>{console.log(i),this.sucursal.planos=[],this.actualizar_informacion(!0)}).catch(i=>{this.loadingController.dismiss(),console.log("Error al subir el plano ",i),alert("El plano no se subio")})}this.disabled=!1}))}eliminar_plano(i){return Object(t.a)(this,void 0,void 0,(function*(){console.log(i),this.loading=yield this.loadingController.create({message:"Eliminado plano, Por favor espere."}),yield this.loading.present(),this.api_sucursales.eliminar_plano(i).subscribe(i=>{this.api_sucursales.informacion_sucursal(this.id_sucursal).subscribe(i=>{this.sucursal=i,this.sucursal=this.sucursal.result;for(let o=0;o<this.sucursal.planos.length;o++)Object.defineProperty(this.sucursal.planos[o],"name",{value:this.sucursal.planos[o].url_imagen_plano.slice(27)});console.log("sucursal: ",this.sucursal),this.loadingController.dismiss()})},i=>{this.loading.dismiss(),console.log("Error al borrar el plano ",i),this.loadingController.dismiss(),alert("Ocurrio un error")})}))}alert_eliminar_plano(i){return Object(t.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({header:"Seguro que desea eliminar el plano?",buttons:[{text:"No",handler:()=>{}},{text:"Si",handler:()=>{this.eliminar_plano(i)}}]});yield o.present()}))}Imprimir(){this.api_servicios.getZpl({base:this.sucursal.sucursal[0].codigo_qr}).toPromise().then(i=>{console.log(i.codigo);var o=window.open("","PRINT","height=400,width=600");o.document.write("<html><head><title>"+document.title+"</title>"),o.document.write("</head><body >"),o.document.write("<h3>"+i.codigo+"</h3>"),o.document.write("</body></html>"),o.document.close(),o.focus(),o.print()})}imprimirQrAllWorkstations(){var i=[];this.grupoWorkStation.forEach(o=>{o.equipos.forEach(o=>{i.push(o.codigo_qr_equipo)})}),console.log(i),this.imprimir(i)}imprimirQrThisWorkstation(i){var o=[];i.equipos.forEach(i=>{o.push(i.codigo_qr_equipo)}),console.log(o),this.imprimir(o)}addmprimirQr(i,o,e){this.qrsToPrint.push(i.codigo_qr_equipo),this.showDeleteQr[e][o].show=!0,this.showDeleteQr[e][o].count++}deleteImprimirQr(i,o,e){var t=this.qrsToPrint.indexOf(i.codigo_qr_equipo);-1!=t&&(this.qrsToPrint.splice(t,1),this.showDeleteQr[e][o].count--),-1==(t=this.qrsToPrint.indexOf(i.codigo_qr_equipo))&&(this.showDeleteQr[e][o].show=!1)}addImprimirQrSucursal(){this.qrsToPrint.push(this.sucursal.sucursal[0].codigo_qr),this.showDeleteQrSucursal.show=!0,this.showDeleteQrSucursal.count++}deleteImprimirQrSucursal(){var i=this.qrsToPrint.indexOf(this.sucursal.sucursal[0].codigo_qr);-1!=i&&(this.qrsToPrint.splice(i,1),this.showDeleteQrSucursal.count--),-1==(i=this.qrsToPrint.indexOf(this.sucursal.sucursal[0].codigo_qr))&&(this.showDeleteQrSucursal.show=!1)}imprimirAllQrSucursal(){var i=[];i.push(this.sucursal.sucursal[0].codigo_qr),this.grupoWorkStation.forEach(o=>{o.equipos.forEach(o=>{i.push(o.codigo_qr_equipo)})}),this.imprimir(i)}printSelect(){this.imprimir(this.qrsToPrint)}deletePrintSelect(){this.showDeleteQrSucursal.count=0,this.showDeleteQrSucursal.show=!1,this.showDeleteQr.forEach(i=>{i.forEach(i=>{i.show=!1,i.count=0})}),this.qrsToPrint=[]}imprimir(i){var o=window.open("","PRINT","width=21,5cm");o.document.write("<html><head><title>"+document.title+"</title>"),o.document.write("</head><body>");for(let e=0;e<i.length;e++)o.document.write('<img style="margin: 0.2cm ;padding-left: 0.52cm;padding-top: 0;padding-bottom: 0.52cm; padding-right: 0.52cm; height: 5cm; width: 5cm; border-style: solid; border-width: 1px; border-color: rgb(97, 97, 97);" src="'+i[e]+'">');o.document.write("</body></html>"),o.document.close(),o.focus(),o.print()}}return i.\u0275fac=function(o){return new(o||i)(s.Jb(c.D),s.Jb(r.a),s.Jb(c.B),s.Jb(l.a),s.Jb(c.A),s.Jb(a.a),s.Jb(c.a))},i.\u0275cmp=s.Db({type:i,selectors:[["app-ver-sucursal"]],decls:4,vars:3,consts:[[4,"ngIf"],["style","margin-top: 10px;",4,"ngIf"],[2,"text-align","center","background-color","white","padding","1%"],["size","10"],[2,"margin-top","15px"],["size","2",2,"font-size","24px !important"],["color","primary","title","Imprimir Toda la informacion de la sucursal","name","print-outline",3,"click"],["lines","full"],["size","3"],["size","2"],["size","3",2,"margin-top","10px"],["size","2",2,"margin-top","10px"],[2,"width","50px","margin-top","0px"],["download","",3,"href"],[3,"src"],["size","1",2,"font-size","24px !important"],["color","primary","title","Seleccionar ESTE QR para Imprimir","name","print-outline",2,"margin-top","15px",3,"click"],["style","margin-top:15px; color: red !important;","name","print-outline",3,"title","click",4,"ngIf"],[2,"margin-top","5px"],[2,"background-color","white"],["size","5"],["lines","none",2,"text-align","center"],[2,"font-size","100% !important"],["size","7"],["lines","none",2,"text-align","right"],["color","primary","title","Imprimir los QR'S de TODAS las Workstations/equipos","name","print-outline",3,"click"],[3,"click"],["name","print-outline",2,"margin-top","15px","color","red !important",3,"title","click"],[2,"width","100%","text-align","center"],["lines","full",4,"ngFor","ngForOf"],["size","5.5",1,"grupoequipo"],["size","0.5"],["name","trash-outline","color","danger",2,"margin-top","15px",3,"click"],["size","6"],["lines","none",2,"text-align","left"],["color","primary","title","Imprimir los QR'S de ESTA Workstation/equipo","name","print-outline",3,"click"],["size","2.5"],["size","1"],["size","1.5"],[4,"ngFor","ngForOf"],["class","equipos",4,"ngIf"],[1,"equipos"],["size","5",2,"margin-top","15px"],["size","2.5",2,"margin-top","15px"],[2,"margin-top","10px"],["id","inputUploadFile","accept",".pdf","title"," ","type","file","name","",2,"visibility","hidden",3,"disabled","change"],["slot","end","name","add-circle-outline","color","primary",3,"click"],["button","",4,"ngIf"],["button",""],["name","eye","slot","start",3,"click"],["slot","end","name","trash-outline",2,"color","red",3,"click"],["color","primary"],["slot","end"],[1,"printButton",3,"click"],[1,"printButtonCancel",3,"click"]],template:function(i,o){1&i&&(s.Mb(0,"ion-content"),s.hc(1,M,65,8,"div",0),s.hc(2,k,9,3,"div",1),s.Lb(),s.hc(3,w,9,1,"ion-footer",0)),2&i&&(s.zb(1),s.bc("ngIf",o.sucursal),s.zb(1),s.bc("ngIf",o.sucursal),s.zb(1),s.bc("ngIf",o.qrsToPrint.length>0))},directives:[c.g,b.j,c.q,c.f,c.l,c.n,c.j,c.o,c.e,c.c,b.i,c.i,c.y,c.x,c.d],styles:[".planos[_ngcontent-%COMP%]{width:98%;height:98%;padding:5%}.equipos[_ngcontent-%COMP%]{height:65px;margin-left:3%}.grupoequipo[_ngcontent-%COMP%]{align-items:center;align-self:center;align-content:center;vertical-align:center}ion-label[_ngcontent-%COMP%]{font-size:80%!important}.cardPlanos[_ngcontent-%COMP%]{width:100%!important;height:100%!important}ion-slides[_ngcontent-%COMP%]{--bullet-background:#000;height:100%}.deletePlano[_ngcontent-%COMP%]{--background:rgba(56,129,255,0);--background-activated:rgba(56,129,255,0);--background-activated-opacity:1;--background-focused:rgba(56,129,255,0);--background-focused-opacity:1;--background-hover:rgba(56,129,255,0);--background-hover-opacity:1;--border-color:rgba(56,129,255,0);--border-radius:8px;--border-style:solid;--border-width:8px;--box-shadow:10px 10px;--color:rgba(56,129,255,0);--color-activated:rgba(56,129,255,0);--color-focused:rgba(56,129,255,0);--color-hover:rgba(56,129,255,0);--opacity:1;--padding-bottom:4px;--padding-end:4px;--padding-start:4px;--padding-top:4px;--ripple-color:rgba(56,129,255,0);--transition:background-color 15ms linear}.printButton[_ngcontent-%COMP%]{--background-activated:rgba(56,129,255,0.48)!important;--background-activated-opacity:1;--background-focused:rgba(56,129,255,0.48)!important;--background-focused-opacity:1;--background-hover:rgba(56,129,255,0.48)!important;--background-hover-opacity:1;--border-color:#3880ff}.printButton[_ngcontent-%COMP%], .printButtonCancel[_ngcontent-%COMP%]{--border-radius:8px;--border-style:solid;--border-width:1px;--opacity:1;--ripple-color:#1e1e1e;--transition:background-color 15ms linear}.printButtonCancel[_ngcontent-%COMP%]{--background:rgba(255,8,0,0.76)!important;--background-activated:#ff0800!important;--background-activated-opacity:1;--background-focused:#ff0800!important;--background-focused-opacity:1;--background-hover:#ff0800!important;--background-hover-opacity:1;--border-color:#ff0800}"]}),i})()},lENo:function(i,o,e){"use strict";e.d(o,"a",(function(){return v}));var t=e("mrSG"),n=e("OAWW"),s=e("fXoL"),c=e("TEn/"),r=e("jCJ1"),l=e("ofXK");function a(i,o){1&i&&(s.Mb(0,"div",7),s.Kb(1,"ion-spinner"),s.Lb())}function b(i,o){if(1&i&&(s.Mb(0,"div"),s.Mb(1,"ion-item",8),s.Mb(2,"ion-label"),s.Mb(3,"b"),s.ic(4,"Fecha de concluida la visita:"),s.Lb(),s.ic(5),s.Lb(),s.Lb(),s.Lb()),2&i){const i=s.Wb(2);s.zb(5),s.kc(" ",i.visita.visitas.horario_salida,"")}}function u(i,o){if(1&i&&(s.Mb(0,"div"),s.Mb(1,"ion-item"),s.Mb(2,"ion-label"),s.Mb(3,"b"),s.ic(4,"Fecha estimada de la visita:"),s.Lb(),s.ic(5),s.Xb(6,"date"),s.Lb(),s.Lb(),s.Lb()),2&i){const i=s.Wb(2);s.zb(5),s.kc(" ",s.Yb(6,1,i.visita.visitas.fecha_visita,"dd/MM/yyyy hh:mm"),"")}}function d(i,o){if(1&i&&(s.Mb(0,"div",10),s.Kb(1,"ion-icon",11),s.ic(2),s.Lb()),2&i){const i=o.$implicit;s.zb(2),s.kc(" ",i," ")}}function p(i,o){if(1&i){const i=s.Nb();s.Mb(0,"div"),s.Mb(1,"ion-button",12),s.Ub("click",(function(){return s.ec(i),s.Wb(3).generar_pdf()})),s.ic(2,"Generar PDF"),s.Lb(),s.Lb()}}function h(i,o){if(1&i){const i=s.Nb();s.Mb(0,"div"),s.Mb(1,"ion-button",13),s.Ub("click",(function(){return s.ec(i),s.Wb(3).ver_pdf()})),s.ic(2,"Ver PDF"),s.Lb(),s.Lb()}}function g(i,o){if(1&i){const i=s.Nb();s.Mb(0,"div"),s.Mb(1,"ion-button",12),s.Ub("click",(function(){return s.ec(i),s.Wb(3).generar_pdf()})),s.ic(2,"Volver a generar PDF"),s.Lb(),s.Lb()}}function m(i,o){if(1&i&&(s.Mb(0,"div"),s.hc(1,p,3,0,"div",5),s.hc(2,h,3,0,"div",5),s.hc(3,g,3,0,"div",5),s.Lb()),2&i){const i=s.Wb(2);s.zb(1),s.bc("ngIf",!i.pdf_generado&&0==i.visita.visitas.pdfGenerado),s.zb(1),s.bc("ngIf",i.pdf_generado||1==i.visita.visitas.pdfGenerado),s.zb(1),s.bc("ngIf",i.pdf_generado||1==i.visita.visitas.pdfGenerado)}}function _(i,o){if(1&i){const i=s.Nb();s.Mb(0,"div"),s.Mb(1,"ion-button",12),s.Ub("click",(function(){return s.ec(i),s.Wb(2).modificar_visita()})),s.ic(2,"Modificar visita"),s.Lb(),s.Lb()}}function f(i,o){if(1&i&&(s.Mb(0,"div"),s.hc(1,b,6,1,"div",5),s.hc(2,u,7,4,"div",5),s.Mb(3,"ion-item",8),s.Mb(4,"ion-label"),s.Mb(5,"b"),s.ic(6,"Cliente:"),s.Lb(),s.ic(7),s.Lb(),s.Lb(),s.Mb(8,"ion-item",8),s.Mb(9,"ion-label"),s.Mb(10,"b"),s.ic(11,"Sucursal:"),s.Lb(),s.ic(12),s.Lb(),s.Lb(),s.Mb(13,"ion-item",8),s.Mb(14,"ion-label"),s.Mb(15,"b"),s.ic(16,"Servicios ofrecidos:"),s.Lb(),s.hc(17,d,3,1,"div",9),s.Lb(),s.Lb(),s.hc(18,m,4,3,"div",5),s.hc(19,_,3,0,"div",5),s.Lb()),2&i){const i=s.Wb();s.zb(1),s.bc("ngIf","NULL"!=i.visita.visitas.horario_salida),s.zb(1),s.bc("ngIf","NULL"==i.visita.visitas.horario_salida),s.zb(5),s.kc(" ",i.visita.visitas.razon_social_cliente,""),s.zb(5),s.kc(" ",i.visita.visitas.razon_social_sucursal,""),s.zb(5),s.bc("ngForOf",i.visita.servicios2),s.zb(1),s.bc("ngIf","NULL"!=i.visita.visitas.horario_salida),s.zb(1),s.bc("ngIf","NULL"==i.visita.visitas.horario_salida)}}let v=(()=>{class i{constructor(i,o,e,t){this.navParams=i,this.api_visitas=o,this.modalController=e,this.loadingController=t,this.id_visita=this.navParams.get("id_visita"),this.pdf_generado=!1}ngOnInit(){this.actualizar_informacion()}generar_pdf(){return Object(t.a)(this,void 0,void 0,(function*(){var i=yield this.loadingController.create({message:"Generando PDF"});i.present(),console.log(this.id_visita),this.api_visitas.crear_pdf({id_visita:this.id_visita}).subscribe(o=>{console.log(o),this.pdf_generado=!0,i.dismiss()},o=>{console.log(o),i.dismiss()})}))}ver_pdf(){this.api_visitas.ver_pdf(this.id_visita).subscribe(i=>{this.url=i,console.log(this.url.url),window.open(this.url.url,"_blank").focus()},i=>{console.log(i)})}close(){this.modalController.dismiss()}actualizar_informacion(){this.api_visitas.informacion_visita(this.id_visita).subscribe(i=>{this.visita=i,this.visita=this.visita.result,this.visita.servicios2=[];for(let o of this.visita.servicios)this.visita.servicios2.includes(o.nombre_servicio)||this.visita.servicios2.push(o.nombre_servicio)})}modificar_visita(){return Object(t.a)(this,void 0,void 0,(function*(){const i=yield this.modalController.create({component:n.a,cssClass:"my-custom-class",componentProps:{id_visita:this.id_visita}});return i.onDidDismiss().then(i=>{this.actualizar_informacion()}),yield i.present()}))}}return i.\u0275fac=function(o){return new(o||i)(s.Jb(c.D),s.Jb(r.a),s.Jb(c.B),s.Jb(c.A))},i.\u0275cmp=s.Db({type:i,selectors:[["app-ver-visita"]],decls:12,vars:2,consts:[["color","primary",2,"text-align","center"],["slot","end"],[3,"click"],["name","close-outline"],["style","text-align: center;",4,"ngIf"],[4,"ngIf"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"],[2,"text-align","center"],["lines","full"],["style","margin-left:10px; margin-top: 10px",4,"ngFor","ngForOf"],[2,"margin-left","10px","margin-top","10px"],["name","document-outline","color","primary"],["expand","full",3,"click"],["expand","full","color","success",3,"click"]],template:function(i,o){1&i&&(s.Mb(0,"ion-header"),s.Mb(1,"ion-toolbar",0),s.Mb(2,"ion-title"),s.ic(3,"visita"),s.Lb(),s.Mb(4,"ion-buttons",1),s.Mb(5,"ion-button",2),s.Ub("click",(function(){return o.close()})),s.Kb(6,"ion-icon",3),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Mb(7,"ion-content"),s.hc(8,a,2,0,"div",4),s.hc(9,f,20,7,"div",5),s.Mb(10,"div"),s.Kb(11,"img",6),s.Lb(),s.Lb()),2&i&&(s.zb(8),s.bc("ngIf",!o.visita),s.zb(1),s.bc("ngIf",o.visita))},directives:[c.k,c.y,c.x,c.d,c.c,c.l,c.g,l.j,c.t,c.n,c.o,l.i],pipes:[l.d],styles:[""]}),i})()},mca5:function(i,o,e){"use strict";e.r(o),e.d(o,"VerClientePageModule",(function(){return L}));var t=e("ofXK"),n=e("3Pt+"),s=e("TEn/"),c=e("tyNb"),r=e("mrSG"),l=e("wfI0"),a=e("cZ9Q"),b=e("lENo"),u=e("1mX4"),d=e("fXoL"),p=e("jCJ1");function h(i,o){if(1&i&&(d.Mb(0,"ion-item",8),d.Mb(1,"ion-col",3),d.Mb(2,"ion-label"),d.ic(3),d.Lb(),d.Lb(),d.Mb(4,"ion-col",3),d.Mb(5,"ion-label"),d.ic(6),d.Lb(),d.Lb(),d.Mb(7,"ion-col",3),d.Mb(8,"ion-label"),d.ic(9),d.Lb(),d.Lb(),d.Mb(10,"ion-col",3),d.Mb(11,"ion-label"),d.ic(12),d.Lb(),d.Lb(),d.Lb()),2&i){const i=d.Wb(2);d.zb(3),d.kc(" ",i.cliente.clienteDatos[0].razon_social_cliente," "),d.zb(3),d.kc(" ",i.cliente.clienteDatos[0].telefono," "),d.zb(3),d.kc(" ",i.cliente.clienteDatos[0].email," "),d.zb(3),d.kc(" ",i.cliente.clienteDatos[0].direccion," ")}}function g(i,o){if(1&i){const i=d.Nb();d.Mb(0,"div"),d.Mb(1,"ion-item",8),d.Mb(2,"ion-col",3),d.ic(3),d.Lb(),d.Mb(4,"ion-col",3),d.ic(5),d.Lb(),d.Mb(6,"ion-col",3),d.ic(7),d.Lb(),d.Mb(8,"ion-col",9),d.ic(9),d.Lb(),d.Mb(10,"ion-col",12),d.Mb(11,"ion-icon",13),d.Ub("click",(function(){d.ec(i);const e=o.$implicit;return d.Wb(2).modificar_sucursal(e.id_sucursal)})),d.Lb(),d.Mb(12,"ion-icon",14),d.Ub("click",(function(){d.ec(i);const e=o.$implicit;return d.Wb(2).baja_sucursal(e.id_sucursal)})),d.Lb(),d.Mb(13,"ion-icon",15),d.Ub("click",(function(){d.ec(i);const e=o.$implicit;return d.Wb(2).verSucursal(e.id_sucursal)})),d.Lb(),d.Lb(),d.Lb(),d.Lb()}if(2&i){const i=o.$implicit;d.zb(3),d.jc(i.razon_social_sucursal),d.zb(2),d.jc(i.telefono_sucursal),d.zb(2),d.jc(i.email_sucursal),d.zb(2),d.kc(" ",i.direccion_sucursal," ")}}function m(i,o){if(1&i){const i=d.Nb();d.Mb(0,"div"),d.Mb(1,"ion-item",8),d.Mb(2,"ion-col",11),d.ic(3),d.Xb(4,"date"),d.Lb(),d.Mb(5,"ion-col",11),d.ic(6),d.Lb(),d.Mb(7,"ion-col",3),d.ic(8),d.Lb(),d.Mb(9,"ion-col",12),d.Mb(10,"ion-icon",15),d.Ub("click",(function(){d.ec(i);const e=o.$implicit;return d.Wb(2).verVisita(e.id_visita)})),d.Lb(),d.Lb(),d.Lb(),d.Lb()}if(2&i){const i=o.$implicit;d.zb(3),d.jc(d.Yb(4,3,i.fecha_visita,"dd/MM/yyyy hh:mm")),d.zb(3),d.jc(i.razon_social_sucursal),d.zb(2),d.jc(i.estado_visitas)}}function _(i,o){if(1&i){const i=d.Nb();d.Mb(0,"ion-content"),d.Mb(1,"div",1),d.Mb(2,"ion-item",2),d.Mb(3,"ion-grid"),d.Mb(4,"ion-row"),d.Mb(5,"ion-col",3),d.Mb(6,"ion-label"),d.Mb(7,"b"),d.ic(8,"Razon social"),d.Lb(),d.Lb(),d.Lb(),d.Mb(9,"ion-col",3),d.Mb(10,"ion-label"),d.Mb(11,"b"),d.ic(12,"Telefono"),d.Lb(),d.Lb(),d.Lb(),d.Mb(13,"ion-col",3),d.Mb(14,"ion-label"),d.Mb(15,"b"),d.ic(16,"Email"),d.Lb(),d.Lb(),d.Lb(),d.Mb(17,"ion-col",3),d.Mb(18,"ion-label"),d.Mb(19,"b"),d.ic(20,"Direccion"),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.hc(21,h,13,4,"ion-item",4),d.Lb(),d.Mb(22,"ion-grid"),d.Mb(23,"ion-row"),d.Mb(24,"ion-col"),d.Mb(25,"ion-item",5),d.Mb(26,"ion-label",6),d.Mb(27,"b"),d.ic(28,"Sucursales"),d.Lb(),d.Lb(),d.Mb(29,"ion-button",7),d.Ub("click",(function(){return d.ec(i),d.Wb().altaSucursal()})),d.ic(30,"Agregar sucursal"),d.Lb(),d.Lb(),d.Mb(31,"ion-item",8),d.Mb(32,"ion-col",3),d.ic(33,"Razon social sucursal"),d.Lb(),d.Mb(34,"ion-col",3),d.ic(35,"Telefono sucursal"),d.Lb(),d.Mb(36,"ion-col",3),d.ic(37,"Email sucursal"),d.Lb(),d.Mb(38,"ion-col",9),d.ic(39,"Direccion sucursal"),d.Lb(),d.Lb(),d.hc(40,g,14,4,"div",10),d.Lb(),d.Mb(41,"ion-col"),d.Mb(42,"ion-item",5),d.Mb(43,"ion-label",6),d.Mb(44,"b"),d.ic(45,"Visitas"),d.Lb(),d.Lb(),d.Lb(),d.Mb(46,"ion-item",8),d.Mb(47,"ion-col",11),d.ic(48,"Fecha de la visita"),d.Lb(),d.Mb(49,"ion-col",11),d.ic(50,"Sucursal"),d.Lb(),d.Mb(51,"ion-col",11),d.ic(52,"Estado"),d.Lb(),d.Lb(),d.hc(53,m,11,6,"div",10),d.Lb(),d.Lb(),d.Lb(),d.Lb()}if(2&i){const i=d.Wb();d.zb(21),d.bc("ngIf",i.cliente),d.zb(19),d.bc("ngForOf",i.cliente.sucursales.datosSucursal),d.zb(13),d.bc("ngForOf",i.cliente.sucursales.visitas)}}const f=[{path:"",component:(()=>{class i{constructor(i,o,e,t){this.activatedRoute=i,this.api_clientes=o,this.modalController=e,this.alertController=t}ngOnInit(){this.actualizar_informacion()}altaSucursal(){return Object(r.a)(this,void 0,void 0,(function*(){let i=this.activatedRoute.snapshot.paramMap.get("id_cliente");const o=yield this.modalController.create({component:l.a,cssClass:"my-custom-class",componentProps:{id_cliente:i}});return yield o.present()}))}verSucursal(i){return Object(r.a)(this,void 0,void 0,(function*(){this.activatedRoute.snapshot.paramMap.get("id_cliente");const o=yield this.modalController.create({component:a.a,cssClass:"modal_grande",componentProps:{id_sucursal:i}});return yield o.present()}))}verVisita(i){return Object(r.a)(this,void 0,void 0,(function*(){const o=yield this.modalController.create({component:b.a,cssClass:"my-custom-class",componentProps:{id_visita:i}});return yield o.present()}))}baja_sucursal(i){return Object(r.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({header:"Seguro que desea eliminar la sucursal?",buttons:[{text:"No",handler:()=>{}},{text:"Si",handler:()=>{this.eliminar_sucursal(i)}}]});yield o.present()}))}eliminar_sucursal(i){this.api_clientes.eliminar_sucursal(i).subscribe(i=>{location.reload()},i=>{console.log(i)})}actualizar_informacion(){let i=this.activatedRoute.snapshot.paramMap.get("id_cliente");this.api_clientes.informacion_cliente(i).subscribe(i=>{this.cliente=i,this.cliente=this.cliente.result})}modificar_sucursal(i){return Object(r.a)(this,void 0,void 0,(function*(){const o=yield this.modalController.create({component:u.a,cssClass:"my-custom-class",componentProps:{id_sucursal:i}});return o.onDidDismiss().then(i=>{this.actualizar_informacion()}),yield o.present()}))}}return i.\u0275fac=function(o){return new(o||i)(d.Jb(c.a),d.Jb(p.a),d.Jb(s.B),d.Jb(s.a))},i.\u0275cmp=d.Db({type:i,selectors:[["app-ver-cliente"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"informacion_cliente"],["lines","full",1,"titulos"],["size","3"],["lines","full",4,"ngIf"],["lines","none"],[2,"text-align","center"],[3,"click"],["lines","full"],["size","2"],[4,"ngFor","ngForOf"],["size","4"],["size","1"],["name","create-outline",2,"margin-right","5px",3,"click"],["name","trash-outline","color","danger",2,"margin-right","5px",3,"click"],["color","primary","name","enter-outline",3,"click"]],template:function(i,o){1&i&&d.hc(0,_,54,3,"ion-content",0),2&i&&d.bc("ngIf",o.cliente)},directives:[t.j,s.g,s.n,s.j,s.q,s.f,s.o,s.c,t.i,s.l],pipes:[t.d],styles:[".informacion_cliente[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;margin-top:10px}"]}),i})()},{path:"alta-sucursal",loadChildren:()=>e.e(18).then(e.bind(null,"pY+/")).then(i=>i.AltaSucursalPageModule)},{path:"ver-sucursal",loadChildren:()=>e.e(22).then(e.bind(null,"l4Rn")).then(i=>i.VerSucursalPageModule)},{path:"ver-visita",loadChildren:()=>e.e(23).then(e.bind(null,"R0jV")).then(i=>i.VerVisitaPageModule)},{path:"modificar-sucursal",loadChildren:()=>e.e(19).then(e.bind(null,"+l8E")).then(i=>i.ModificarSucursalPageModule)},{path:"modificar-visita",loadChildren:()=>e.e(20).then(e.bind(null,"6Ypc")).then(i=>i.ModificarVisitaPageModule)}];let v=(()=>{class i{}return i.\u0275mod=d.Hb({type:i}),i.\u0275inj=d.Gb({factory:function(o){return new(o||i)},imports:[[c.h.forChild(f)],c.h]}),i})();var M=e("X9o6");let L=(()=>{class i{}return i.\u0275mod=d.Hb({type:i}),i.\u0275inj=d.Gb({factory:function(o){return new(o||i)},providers:[M.a],imports:[[t.b,n.a,s.z,v]]}),i})()},wfI0:function(i,o,e){"use strict";e.d(o,"a",(function(){return r}));var t=e("fXoL"),n=e("TEn/"),s=e("jCJ1"),c=e("3Pt+");let r=(()=>{class i{constructor(i,o,e){this.navParams=i,this.api=o,this.modalCtrl=e,this.id_cliente=this.navParams.get("id_cliente")}ngOnInit(){}cargar_sucursal(){this.direccion&&this.razon_social?this.api.alta_sucursal({id_cliente:this.id_cliente,razon_social_sucursal:this.razon_social,direccion_sucursal:this.direccion,telefono_sucursal:this.telefono,email_sucursal:this.email}).subscribe(i=>{console.log(i),location.reload()}):alert("Los campos direccion y razon social son obligatorios")}cancelar(){this.modalCtrl.dismiss({dismissed:!0})}}return i.\u0275fac=function(o){return new(o||i)(t.Jb(n.D),t.Jb(s.a),t.Jb(n.B))},i.\u0275cmp=t.Db({type:i,selectors:[["app-alta-sucursal"]],decls:24,vars:4,consts:[["lines","full"],[1,"titulos"],[3,"ngModel","ngModelChange"],[2,"width","100%","text-align","center","margin-top","15px"],[3,"click"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"]],template:function(i,o){1&i&&(t.Mb(0,"ion-content"),t.Mb(1,"ion-item",0),t.Mb(2,"ion-label",1),t.ic(3," *Razon social: "),t.Lb(),t.Mb(4,"ion-input",2),t.Ub("ngModelChange",(function(i){return o.razon_social=i})),t.Lb(),t.Lb(),t.Mb(5,"ion-item",0),t.Mb(6,"ion-label",1),t.ic(7," Telefono: "),t.Lb(),t.Mb(8,"ion-input",2),t.Ub("ngModelChange",(function(i){return o.telefono=i})),t.Lb(),t.Lb(),t.Mb(9,"ion-item",0),t.Mb(10,"ion-label",1),t.ic(11," Email: "),t.Lb(),t.Mb(12,"ion-input",2),t.Ub("ngModelChange",(function(i){return o.email=i})),t.Lb(),t.Lb(),t.Mb(13,"ion-item",0),t.Mb(14,"ion-label",1),t.ic(15," *Direccion: "),t.Lb(),t.Mb(16,"ion-input",2),t.Ub("ngModelChange",(function(i){return o.direccion=i})),t.Lb(),t.Lb(),t.Mb(17,"div",3),t.Mb(18,"ion-button",4),t.Ub("click",(function(){return o.cancelar()})),t.ic(19,"Cancelar"),t.Lb(),t.Mb(20,"ion-button",4),t.Ub("click",(function(){return o.cargar_sucursal()})),t.ic(21,"Cargar"),t.Lb(),t.Lb(),t.Mb(22,"div",5),t.Kb(23,"img",6),t.Lb(),t.Lb()),2&i&&(t.zb(4),t.bc("ngModel",o.razon_social),t.zb(4),t.bc("ngModel",o.telefono),t.zb(4),t.bc("ngModel",o.email),t.zb(4),t.bc("ngModel",o.direccion))},directives:[n.g,n.n,n.o,n.m,n.I,c.d,c.e,n.c],styles:[""]}),i})()}}]);