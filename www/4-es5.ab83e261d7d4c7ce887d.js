function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function _createClass(i,e,t){return e&&_defineProperties(i.prototype,e),t&&_defineProperties(i,t),i}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{jCJ1:function(i,e,t){"use strict";t.d(e,"a",(function(){return a}));var n=t("mrSG"),o=t("tk/3"),r=t("octk"),s=t("AytR"),c=t("fXoL"),a=function(){var i=function(){function i(e){_classCallCheck(this,i),this.http=e,this.apiDir=s.a.api.base_url+"",this.requestOptions={headers:new o.c({"Content-Type":"application/json",version:r.a})}}return _createClass(i,[{key:"listado_clientes",value:function(){return console.log(this.apiDir),this.http.get(this.apiDir+"/clientes",this.requestOptions)}},{key:"informacion_cliente",value:function(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/clientes/id/"+i,this.requestOptions)}},{key:"verificarVisit",value:function(i){var e=this;return console.log(this.apiDir+"/visitas/verificarVisita",{id:i},this.requestOptions),new Promise((function(t,n){e.http.post(e.apiDir+"/visitas/verificarVisita",{id:i},e.requestOptions).subscribe((function(i){t(i)}),(function(i){n(i)}))}))}},{key:"alta_sucursal",value:function(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/sucursales/crear",i,this.requestOptions)}},{key:"informacion_sucursal",value:function(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/sucursales/id/"+i,this.requestOptions)}},{key:"informacion_visita",value:function(i){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.apiDir),e.next=3,this.http.get(this.apiDir+"/visitas/id/"+i,this.requestOptions);case 3:return t=e.sent,e.abrupt("return",(console.log(this.apiDir+"/visitas/id/"+i,this.requestOptions),t.toPromise()));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"listado_workstations",value:function(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/servicios/equipos/sucursal/"+i,this.requestOptions)}},{key:"listado_grupoWorkstations",value:function(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/servicios/gruposEquipos/sucursal/"+i,this.requestOptions)}},{key:"borrar_equipo",value:function(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/eliminarEquipos/"+i,null,this.requestOptions)}},{key:"listado_productosServicio",value:function(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/productos/idServicio/"+i,this.requestOptions)}},{key:"cambiar_estado_visita",value:function(i,e){var t=this;console.log(this.apiDir+"/visitas/cambiarEstado",this.requestOptions);var n={id_visita:i,estado:e};return new Promise((function(i,e){t.http.post(t.apiDir+"/visitas/cambiarEstado",n,t.requestOptions).subscribe((function(e){i(e)}),(function(i){e(i)}))}))}},{key:"eliminar_Grupo_workstation",value:function(i){return console.log("delete2",i),console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/eliminarGrupoEquipos/"+i,this.requestOptions)}},{key:"subir_planos",value:function(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/planos/crear",i,this.requestOptions)}},{key:"upload",value:function(i){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log(this.apiDir),new Promise((function(n,o){e.http.post(e.apiDir+i,t).subscribe((function(i){n(i)}),(function(i){o(i)}))}))}},{key:"ver_sucursal",value:function(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/sucursales/id/"+i,this.requestOptions)}},{key:"crear_pdf",value:function(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/pdf/create-pdf",i,this.requestOptions)}},{key:"ver_pdf",value:function(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/pdf/fetch-pdf/"+i,this.requestOptions)}},{key:"modificar_cliente",value:function(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/clientes/actualizar",i,this.requestOptions)}},{key:"subir_logo_cliente",value:function(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/clientes/actualizarLogo",i,this.requestOptions)}},{key:"eliminar_Logo_Cliente",value:function(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/clientes/eliminarLogo",i,this.requestOptions)}},{key:"eliminar_cliente",value:function(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/clientes/eliminar/"+i,this.requestOptions)}},{key:"eliminar_sucursal",value:function(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/sucursales/eliminar/"+i,this.requestOptions)}},{key:"eliminar_plano",value:function(i){return this.http.post(this.apiDir+"/planos/eliminar/"+i,this.requestOptions)}},{key:"modificar_sucursal",value:function(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/sucursales/actualizar",i,this.requestOptions)}},{key:"estadisticas",value:function(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/clientes/estadisticas/",i,this.requestOptions)}}]),i}();return i.\u0275fac=function(e){return new(e||i)(c.Sb(o.a))},i.\u0275prov=c.Fb({token:i,factory:i.\u0275fac,providedIn:"root"}),i}()},ksL3:function(i,e,t){"use strict";t.r(e),t.d(e,"AdministrarClientesPageModule",(function(){return v}));var n=t("ofXK"),o=t("3Pt+"),r=t("TEn/"),s=t("tyNb"),c=t("mrSG"),a=t("mhZR"),l=t("fXoL"),u=t("jCJ1");function p(i,e){if(1&i){var t=l.Pb();l.Ob(0,"div"),l.Ob(1,"ion-item",8),l.Ob(2,"ion-col",4),l.Ob(3,"ion-label"),l.kc(4),l.Nb(),l.Nb(),l.Ob(5,"ion-col",5),l.Ob(6,"ion-label"),l.kc(7),l.Nb(),l.Nb(),l.Ob(8,"ion-col",4),l.Ob(9,"ion-label"),l.kc(10),l.Nb(),l.Nb(),l.Ob(11,"ion-col",4),l.Ob(12,"ion-label"),l.kc(13),l.Nb(),l.Nb(),l.Ob(14,"ion-col",9),l.Ob(15,"ion-icon",10),l.Wb("click",(function(){l.gc(t);var i=e.$implicit;return l.Yb(2).modificar_cliente(i.id_cliente)})),l.Nb(),l.Ob(16,"ion-icon",11),l.Wb("click",(function(){l.gc(t);var i=e.$implicit;return l.Yb(2).baja_cliente(i.id_cliente)})),l.Nb(),l.Kb(17,"ion-icon",12),l.Nb(),l.Nb(),l.Nb()}if(2&i){var n=e.$implicit;l.zb(4),l.mc(" ",n.razon_social_cliente," "),l.zb(3),l.mc(" ",n.telefono," "),l.zb(3),l.mc(" ",n.email," "),l.zb(3),l.mc(" ",n.direccion," "),l.zb(4),l.dc("routerLink","/menu-principal/ver-cliente/"+n.id_cliente)}}function b(i,e){if(1&i&&(l.Ob(0,"div"),l.jc(1,p,18,5,"div",7),l.Nb()),2&i){var t=l.Yb();l.zb(1),l.dc("ngForOf",t.clientes)}}var h,f,d,g=[{path:"",component:(h=function(){function i(e,t,n){_classCallCheck(this,i),this.api_clientes=e,this.alertController=t,this.modalController=n}return _createClass(i,[{key:"ngOnInit",value:function(){this.actualizar_informacion()}},{key:"baja_cliente",value:function(i){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Seguro que desea eliminar el cliente?",buttons:[{text:"No",handler:function(){}},{text:"Si",handler:function(){n.eliminar_cliente(i)}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"eliminar_cliente",value:function(i){var e=this;this.api_clientes.eliminar_cliente(i).subscribe((function(i){e.actualizar_informacion()}))}},{key:"actualizar_informacion",value:function(){var i=this;this.api_clientes.listado_clientes().subscribe((function(e){i.clientes=e,i.clientes=i.clientes.result,i.clientes.sort(i.ordenarClientes),i.temp=i.clientes}))}},{key:"ordenarClientes",value:function(i,e){return i.razon_social_cliente.toLowerCase()>e.razon_social_cliente.toLowerCase()?1:i.razon_social_cliente.toLowerCase()<e.razon_social_cliente.toLowerCase()?-1:0}},{key:"modificar_cliente",value:function(i){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:a.a,componentProps:{id_cliente:i}});case 2:return(t=e.sent).onDidDismiss().then((function(i){n.actualizar_informacion()})),e.next=6,t.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"updateFilter",value:function(i){var e=i.target.value.toLowerCase(),t=this.temp.filter((function(i){var t,n,o,r;return(null===(t=i.razon_social_cliente)||void 0===t?void 0:t.toLowerCase().includes(e))||(null===(n=i.direccion)||void 0===n?void 0:n.toLowerCase().includes(e))||(null===(o=i.email)||void 0===o?void 0:o.toLowerCase().includes(e))||(null===(r=i.telefono)||void 0===r?void 0:r.toString().toLowerCase().includes(e))}));this.clientes=t}},{key:"searchClear",value:function(){this.clientes=this.temp}}]),i}(),h.\u0275fac=function(i){return new(i||h)(l.Jb(u.a),l.Jb(r.a),l.Jb(r.I))},h.\u0275cmp=l.Db({type:h,selectors:[["app-administrar-clientes"]],decls:26,vars:1,consts:[["animated","","placeholder","Razon Social || Telefono || Email || Direccion",3,"ionClear","keyup"],["lines","none"],[2,"text-align","center"],["lines","full",1,"titulos"],["size","3"],["size","2"],[4,"ngIf"],[4,"ngFor","ngForOf"],["lines","full"],["size","1"],["name","create-outline",2,"margin-right","15px",3,"click"],["name","trash-outline","color","danger",2,"margin-right","15px",3,"click"],["color","primary","name","enter-outline",3,"routerLink"]],template:function(i,e){1&i&&(l.Ob(0,"ion-content"),l.Ob(1,"ion-searchbar",0),l.Wb("ionClear",(function(){return e.searchClear()}))("keyup",(function(i){return e.updateFilter(i)})),l.Nb(),l.Ob(2,"ion-item",1),l.Ob(3,"ion-label",2),l.Ob(4,"b"),l.kc(5,"Clientes"),l.Nb(),l.Nb(),l.Nb(),l.Ob(6,"ion-item",3),l.Ob(7,"ion-grid"),l.Ob(8,"ion-row"),l.Ob(9,"ion-col",4),l.Ob(10,"ion-label"),l.Ob(11,"b"),l.kc(12,"Razon social"),l.Nb(),l.Nb(),l.Nb(),l.Ob(13,"ion-col",5),l.Ob(14,"ion-label"),l.Ob(15,"b"),l.kc(16,"Telefono"),l.Nb(),l.Nb(),l.Nb(),l.Ob(17,"ion-col",4),l.Ob(18,"ion-label"),l.Ob(19,"b"),l.kc(20,"Email"),l.Nb(),l.Nb(),l.Nb(),l.Ob(21,"ion-col",4),l.Ob(22,"ion-label"),l.Ob(23,"b"),l.kc(24,"Direccion"),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.jc(25,b,2,1,"div",6),l.Nb()),2&i&&(l.zb(25),l.dc("ngIf",e.clientes))},directives:[r.k,r.x,r.P,r.t,r.u,r.p,r.w,r.j,n.j,n.i,r.r,r.N,s.g],styles:[".titulos[_ngcontent-%COMP%]{color:#838383}"]}),h)},{path:"modificar-cliente",loadChildren:function(){return t.e(20).then(t.bind(null,"jEl+")).then((function(i){return i.ModificarClientePageModule}))}}],m=((d=function i(){_classCallCheck(this,i)}).\u0275mod=l.Hb({type:d}),d.\u0275inj=l.Gb({factory:function(i){return new(i||d)},imports:[[s.h.forChild(g)],s.h]}),d),v=((f=function i(){_classCallCheck(this,i)}).\u0275mod=l.Hb({type:f}),f.\u0275inj=l.Gb({factory:function(i){return new(i||f)},imports:[[n.b,o.a,r.G,m]]}),f)},mhZR:function(i,e,t){"use strict";t.d(e,"a",(function(){return h}));var n=t("mrSG"),o=t("fXoL"),r=t("TEn/"),s=t("jCJ1"),c=t("X9o6"),a=t("ofXK"),l=t("3Pt+");function u(i,e){if(1&i){var t=o.Pb();o.Ob(0,"ion-icon",12),o.Wb("click",(function(){return o.gc(t),o.Yb(2).deleteLogo()})),o.Nb()}}function p(i,e){if(1&i){var t=o.Pb();o.Ob(0,"ion-button",9),o.Wb("click",(function(){return o.gc(t),o.Yb(2).agregarLogo()})),o.kc(1,"Seleccionar Logo"),o.Nb()}}function b(i,e){if(1&i){var t=o.Pb();o.Ob(0,"ion-content"),o.Ob(1,"ion-item",2),o.Ob(2,"ion-label",3),o.kc(3," Razon social: "),o.Nb(),o.Ob(4,"ion-input",4),o.Wb("ngModelChange",(function(i){return o.gc(t),o.Yb().razon_social=i})),o.Nb(),o.Nb(),o.Ob(5,"ion-item",2),o.Ob(6,"ion-label",3),o.kc(7," Telefono: (solo numeros) "),o.Nb(),o.Ob(8,"ion-input",4),o.Wb("ngModelChange",(function(i){return o.gc(t),o.Yb().telefono=i})),o.Nb(),o.Nb(),o.Ob(9,"ion-item",2),o.Ob(10,"ion-label",3),o.kc(11," Email: "),o.Nb(),o.Ob(12,"ion-input",4),o.Wb("ngModelChange",(function(i){return o.gc(t),o.Yb().email=i})),o.Nb(),o.Nb(),o.Ob(13,"ion-item",2),o.Ob(14,"ion-label",3),o.kc(15," Direccion: "),o.Nb(),o.Ob(16,"ion-input",4),o.Wb("ngModelChange",(function(i){return o.gc(t),o.Yb().direccion=i})),o.Nb(),o.Nb(),o.Ob(17,"ion-item",2),o.Kb(18,"img",5),o.jc(19,u,1,0,"ion-icon",6),o.jc(20,p,2,0,"ion-button",7),o.Nb(),o.Ob(21,"div",8),o.Ob(22,"ion-button",9),o.Wb("click",(function(){return o.gc(t),o.Yb().modificar_cliente()})),o.kc(23,"Modificar"),o.Nb(),o.Nb(),o.Ob(24,"div",10),o.Kb(25,"img",11),o.Nb(),o.Nb()}if(2&i){var n=o.Yb();o.zb(4),o.dc("ngModel",n.razon_social),o.zb(4),o.dc("ngModel",n.telefono),o.zb(4),o.dc("ngModel",n.email),o.zb(4),o.dc("ngModel",n.direccion),o.zb(2),o.dc("src",n.logo,o.hc),o.zb(1),o.dc("ngIf",!(null==n.logo||"NULL"==n.logo)),o.zb(1),o.dc("ngIf",null==n.logo||"NULL"==n.logo)}}var h=function(){var i=function(){function i(e,t,n,o,r){_classCallCheck(this,i),this.loadingController=e,this.api_clientes=t,this.navParams=n,this.modalCtrl=o,this.imageCompress=r,this.id_cliente=this.navParams.get("id_cliente")}return _createClass(i,[{key:"ngOnInit",value:function(){var i=this;this.api_clientes.informacion_cliente(this.id_cliente).subscribe((function(e){i.cliente=e,i.cliente=i.cliente.result,i.razon_social=i.cliente.clienteDatos[0].razon_social_cliente,i.email=i.cliente.clienteDatos[0].email,i.telefono=i.cliente.clienteDatos[0].telefono,i.direccion=i.cliente.clienteDatos[0].direccion,i.logo=i.cliente.clienteDatos[0].logo_cliente,console.log(i.cliente)}))}},{key:"modificar_cliente",value:function(){var i=this;this.objeto={id_cliente:this.id_cliente,razon_social_cliente:this.razon_social,direccion:this.direccion,telefono:this.telefono,email:this.email},console.log(this.objeto),this.api_clientes.modificar_cliente(this.objeto).subscribe((function(e){i.logo?i.api_clientes.subir_logo_cliente({id_cliente:i.id_cliente,logo:i.logo}).subscribe((function(e){i.modalCtrl.dismiss({dismissed:!0})})):i.modalCtrl.dismiss({dismissed:!0})}),(function(i){console.log(i)}))}},{key:"agregarLogo",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var e=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:this.imageCompress.uploadFile().then((function(i){var t=i.image,o=i.orientation;return Object(n.a)(e,void 0,void 0,regeneratorRuntime.mark((function i(){var e,n=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.loadingController.create({message:"Subiendo img"});case 2:return e=i.sent,i.next=5,e.present();case 5:console.warn("Size in bytes was:",this.imageCompress.byteCount(t)),this.imageCompress.compressFile(t,o,50,50).then((function(i){console.log(i),n.logo=i,n.api_clientes.subir_logo_cliente({id_cliente:n.id_cliente,logo:n.logo}).subscribe((function(i){n.loadingController.dismiss()}))}));case 7:case"end":return i.stop()}}),i,this)})))}));case 1:case"end":return i.stop()}}),i,this)})))}},{key:"deleteLogo",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var e,t=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.loadingController.create({message:"Eliminando img"});case 2:return e=i.sent,i.next=5,e.present();case 5:this.api_clientes.subir_logo_cliente({id_cliente:this.id_cliente,logo:null}).subscribe((function(i){t.ngOnInit(),t.loadingController.dismiss()}));case 6:case"end":return i.stop()}}),i,this)})))}}]),i}();return i.\u0275fac=function(e){return new(e||i)(o.Jb(r.H),o.Jb(s.a),o.Jb(r.K),o.Jb(r.I),o.Jb(c.a))},i.\u0275cmp=o.Db({type:i,selectors:[["app-modificar-cliente"]],decls:5,vars:1,consts:[["color","primary",2,"text-align","center"],[4,"ngIf"],["lines","full"],[1,"titulos"],[3,"ngModel","ngModelChange"],["alt","",2,"width","50%","margin-left","25%","padding","5px",3,"src"],["name","trash-outline","color","danger","style","margin-top:15px",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],[2,"width","100%","text-align","center","margin-top","10px"],[3,"click"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"],["name","trash-outline","color","danger",2,"margin-top","15px",3,"click"]],template:function(i,e){1&i&&(o.Ob(0,"ion-header"),o.Ob(1,"ion-toolbar",0),o.Ob(2,"ion-title"),o.kc(3,"Modificar cliente"),o.Nb(),o.Nb(),o.Nb(),o.jc(4,b,26,7,"ion-content",1)),2&i&&(o.zb(4),o.dc("ngIf",e.cliente))},directives:[r.q,r.F,r.E,a.j,r.k,r.t,r.u,r.s,r.P,l.d,l.e,r.d,r.r],styles:[".titulos[_ngcontent-%COMP%]{color:#838383}"]}),i}()}}]);