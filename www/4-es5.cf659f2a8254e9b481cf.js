function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,i,t){return i&&_defineProperties(e.prototype,i),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{jCJ1:function(e,i,t){"use strict";t.d(i,"a",(function(){return c}));var n=t("mrSG"),o=t("tk/3"),r=t("octk"),s=t("fXoL"),c=function(){var e=function(){function e(i){_classCallCheck(this,e),this.http=i,this.apiDir="http://157.230.90.222:3001",this.requestOptions={headers:new o.c({"Content-Type":"application/json",version:r.a})}}return _createClass(e,[{key:"listado_clientes",value:function(){return this.http.get(this.apiDir+"/clientes",this.requestOptions)}},{key:"informacion_cliente",value:function(e){return this.http.get(this.apiDir+"/clientes/id/"+e,this.requestOptions)}},{key:"alta_sucursal",value:function(e){return this.http.post(this.apiDir+"/sucursales/crear",e,this.requestOptions)}},{key:"informacion_sucursal",value:function(e){return this.http.get(this.apiDir+"/sucursales/id/"+e,this.requestOptions)}},{key:"informacion_visita",value:function(e){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.http.get(this.apiDir+"/visitas/id/"+e,this.requestOptions);case 2:return i.abrupt("return",i.sent.toPromise());case 3:case"end":return i.stop()}}),i,this)})))}},{key:"listado_workstations",value:function(e){return this.http.get(this.apiDir+"/servicios/equipos/sucursal/"+e,this.requestOptions)}},{key:"listado_grupoWorkstations",value:function(e){return this.http.get(this.apiDir+"/servicios/gruposEquipos/sucursal/"+e,this.requestOptions)}},{key:"borrar_equipo",value:function(e){return this.http.post(this.apiDir+"/servicios/eliminarEquipos/"+e,null,this.requestOptions)}},{key:"listado_productosServicio",value:function(e){return this.http.get(this.apiDir+"/productos/idServicio/"+e,this.requestOptions)}},{key:"cambiar_estado_visita",value:function(e,i){var t=this;console.log(this.apiDir+"/visitas/cambiarEstado",this.requestOptions);var n={id_visita:e,estado:i};return new Promise((function(e,i){t.http.post(t.apiDir+"/visitas/cambiarEstado",n,t.requestOptions).subscribe((function(i){e(i)}),(function(e){i(e)}))}))}},{key:"eliminar_Grupo_workstation",value:function(e){return console.log("delete2",e),this.http.post(this.apiDir+"/servicios/eliminarGrupoEquipos/"+e,this.requestOptions)}},{key:"subir_planos",value:function(e){return this.http.post(this.apiDir+"/planos/crear",e,this.requestOptions)}},{key:"upload",value:function(e){var i=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,o){i.http.post(i.apiDir+e,t).subscribe((function(e){n(e)}),(function(e){o(e)}))}))}},{key:"ver_sucursal",value:function(e){return this.http.get(this.apiDir+"/sucursales/id/"+e,this.requestOptions)}},{key:"crear_pdf",value:function(e){return this.http.post(this.apiDir+"/pdf/create-pdf",e,this.requestOptions)}},{key:"ver_pdf",value:function(e){return this.http.get(this.apiDir+"/pdf/fetch-pdf/"+e,this.requestOptions)}},{key:"modificar_cliente",value:function(e){return this.http.post(this.apiDir+"/clientes/actualizar",e,this.requestOptions)}},{key:"subir_logo_cliente",value:function(e){return this.http.post(this.apiDir+"/clientes/actualizarLogo",e,this.requestOptions)}},{key:"eliminar_Logo_Cliente",value:function(e){return this.http.post(this.apiDir+"/clientes/eliminarLogo",e,this.requestOptions)}},{key:"eliminar_cliente",value:function(e){return this.http.post(this.apiDir+"/clientes/eliminar/"+e,this.requestOptions)}},{key:"eliminar_sucursal",value:function(e){return this.http.post(this.apiDir+"/sucursales/eliminar/"+e,this.requestOptions)}},{key:"eliminar_plano",value:function(e){return this.http.post(this.apiDir+"/planos/eliminar/"+e,this.requestOptions)}},{key:"modificar_sucursal",value:function(e){return this.http.post(this.apiDir+"/sucursales/actualizar",e,this.requestOptions)}}]),e}();return e.\u0275fac=function(i){return new(i||e)(s.Sb(o.a))},e.\u0275prov=s.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},ksL3:function(e,i,t){"use strict";t.r(i),t.d(i,"AdministrarClientesPageModule",(function(){return v}));var n=t("ofXK"),o=t("3Pt+"),r=t("TEn/"),s=t("tyNb"),c=t("mrSG"),a=t("mhZR"),l=t("fXoL"),u=t("jCJ1");function b(e,i){if(1&e){var t=l.Pb();l.Ob(0,"div"),l.Ob(1,"ion-item",8),l.Ob(2,"ion-col",4),l.Ob(3,"ion-label"),l.kc(4),l.Nb(),l.Nb(),l.Ob(5,"ion-col",5),l.Ob(6,"ion-label"),l.kc(7),l.Nb(),l.Nb(),l.Ob(8,"ion-col",4),l.Ob(9,"ion-label"),l.kc(10),l.Nb(),l.Nb(),l.Ob(11,"ion-col",4),l.Ob(12,"ion-label"),l.kc(13),l.Nb(),l.Nb(),l.Ob(14,"ion-col",9),l.Ob(15,"ion-icon",10),l.Wb("click",(function(){l.gc(t);var e=i.$implicit;return l.Yb(2).modificar_cliente(e.id_cliente)})),l.Nb(),l.Ob(16,"ion-icon",11),l.Wb("click",(function(){l.gc(t);var e=i.$implicit;return l.Yb(2).baja_cliente(e.id_cliente)})),l.Nb(),l.Kb(17,"ion-icon",12),l.Nb(),l.Nb(),l.Nb()}if(2&e){var n=i.$implicit;l.zb(4),l.mc(" ",n.razon_social_cliente," "),l.zb(3),l.mc(" ",n.telefono," "),l.zb(3),l.mc(" ",n.email," "),l.zb(3),l.mc(" ",n.direccion," "),l.zb(4),l.dc("routerLink","/menu-principal/ver-cliente/"+n.id_cliente)}}function p(e,i){if(1&e&&(l.Ob(0,"div"),l.jc(1,b,18,5,"div",7),l.Nb()),2&e){var t=l.Yb();l.zb(1),l.dc("ngForOf",t.clientes)}}var h,f,d,m=[{path:"",component:(h=function(){function e(i,t,n){_classCallCheck(this,e),this.api_clientes=i,this.alertController=t,this.modalController=n}return _createClass(e,[{key:"ngOnInit",value:function(){this.actualizar_informacion()}},{key:"baja_cliente",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var t,n=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.alertController.create({header:"Seguro que desea eliminar el cliente?",buttons:[{text:"No",handler:function(){}},{text:"Si",handler:function(){n.eliminar_cliente(e)}}]});case 2:return t=i.sent,i.next=5,t.present();case 5:case"end":return i.stop()}}),i,this)})))}},{key:"eliminar_cliente",value:function(e){var i=this;this.api_clientes.eliminar_cliente(e).subscribe((function(e){i.actualizar_informacion()}))}},{key:"actualizar_informacion",value:function(){var e=this;this.api_clientes.listado_clientes().subscribe((function(i){e.clientes=i,e.clientes=e.clientes.result,e.clientes.sort(e.ordenarClientes),e.temp=e.clientes}))}},{key:"ordenarClientes",value:function(e,i){return e.razon_social_cliente.toLowerCase()>i.razon_social_cliente.toLowerCase()?1:e.razon_social_cliente.toLowerCase()<i.razon_social_cliente.toLowerCase()?-1:0}},{key:"modificar_cliente",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var t,n=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.modalController.create({component:a.a,componentProps:{id_cliente:e}});case 2:return(t=i.sent).onDidDismiss().then((function(e){n.actualizar_informacion()})),i.next=6,t.present();case 6:return i.abrupt("return",i.sent);case 7:case"end":return i.stop()}}),i,this)})))}},{key:"updateFilter",value:function(e){var i=e.target.value.toLowerCase(),t=this.temp.filter((function(e){var t,n,o,r;return(null===(t=e.razon_social_cliente)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(n=e.direccion)||void 0===n?void 0:n.toLowerCase().includes(i))||(null===(o=e.email)||void 0===o?void 0:o.toLowerCase().includes(i))||(null===(r=e.telefono)||void 0===r?void 0:r.toString().toLowerCase().includes(i))}));this.clientes=t}},{key:"searchClear",value:function(){this.clientes=this.temp}}]),e}(),h.\u0275fac=function(e){return new(e||h)(l.Jb(u.a),l.Jb(r.a),l.Jb(r.G))},h.\u0275cmp=l.Db({type:h,selectors:[["app-administrar-clientes"]],decls:26,vars:1,consts:[["animated","","placeholder","Razon Social || Telefono || Email || Direccion",3,"ionClear","keyup"],["lines","none"],[2,"text-align","center"],["lines","full",1,"titulos"],["size","3"],["size","2"],[4,"ngIf"],[4,"ngFor","ngForOf"],["lines","full"],["size","1"],["name","create-outline",2,"margin-right","15px",3,"click"],["name","trash-outline","color","danger",2,"margin-right","15px",3,"click"],["color","primary","name","enter-outline",3,"routerLink"]],template:function(e,i){1&e&&(l.Ob(0,"ion-content"),l.Ob(1,"ion-searchbar",0),l.Wb("ionClear",(function(){return i.searchClear()}))("keyup",(function(e){return i.updateFilter(e)})),l.Nb(),l.Ob(2,"ion-item",1),l.Ob(3,"ion-label",2),l.Ob(4,"b"),l.kc(5,"Clientes"),l.Nb(),l.Nb(),l.Nb(),l.Ob(6,"ion-item",3),l.Ob(7,"ion-grid"),l.Ob(8,"ion-row"),l.Ob(9,"ion-col",4),l.Ob(10,"ion-label"),l.Ob(11,"b"),l.kc(12,"Razon social"),l.Nb(),l.Nb(),l.Nb(),l.Ob(13,"ion-col",5),l.Ob(14,"ion-label"),l.Ob(15,"b"),l.kc(16,"Telefono"),l.Nb(),l.Nb(),l.Nb(),l.Ob(17,"ion-col",4),l.Ob(18,"ion-label"),l.Ob(19,"b"),l.kc(20,"Email"),l.Nb(),l.Nb(),l.Nb(),l.Ob(21,"ion-col",4),l.Ob(22,"ion-label"),l.Ob(23,"b"),l.kc(24,"Direccion"),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.jc(25,p,2,1,"div",6),l.Nb()),2&e&&(l.zb(25),l.dc("ngIf",i.clientes))},directives:[r.i,r.v,r.N,r.r,r.s,r.n,r.u,r.h,n.j,n.i,r.p,r.L,s.g],styles:[".titulos[_ngcontent-%COMP%]{color:#838383}"]}),h)},{path:"modificar-cliente",loadChildren:function(){return t.e(19).then(t.bind(null,"jEl+")).then((function(e){return e.ModificarClientePageModule}))}}],g=((d=function e(){_classCallCheck(this,e)}).\u0275mod=l.Hb({type:d}),d.\u0275inj=l.Gb({factory:function(e){return new(e||d)},imports:[[s.h.forChild(m)],s.h]}),d),v=((f=function e(){_classCallCheck(this,e)}).\u0275mod=l.Hb({type:f}),f.\u0275inj=l.Gb({factory:function(e){return new(e||f)},imports:[[n.b,o.a,r.E,g]]}),f)},mhZR:function(e,i,t){"use strict";t.d(i,"a",(function(){return h}));var n=t("mrSG"),o=t("fXoL"),r=t("TEn/"),s=t("jCJ1"),c=t("X9o6"),a=t("ofXK"),l=t("3Pt+");function u(e,i){if(1&e){var t=o.Pb();o.Ob(0,"ion-icon",12),o.Wb("click",(function(){return o.gc(t),o.Yb(2).deleteLogo()})),o.Nb()}}function b(e,i){if(1&e){var t=o.Pb();o.Ob(0,"ion-button",9),o.Wb("click",(function(){return o.gc(t),o.Yb(2).agregarLogo()})),o.kc(1,"Seleccionar Logo"),o.Nb()}}function p(e,i){if(1&e){var t=o.Pb();o.Ob(0,"ion-content"),o.Ob(1,"ion-item",2),o.Ob(2,"ion-label",3),o.kc(3," Razon social: "),o.Nb(),o.Ob(4,"ion-input",4),o.Wb("ngModelChange",(function(e){return o.gc(t),o.Yb().razon_social=e})),o.Nb(),o.Nb(),o.Ob(5,"ion-item",2),o.Ob(6,"ion-label",3),o.kc(7," Telefono: (solo numeros) "),o.Nb(),o.Ob(8,"ion-input",4),o.Wb("ngModelChange",(function(e){return o.gc(t),o.Yb().telefono=e})),o.Nb(),o.Nb(),o.Ob(9,"ion-item",2),o.Ob(10,"ion-label",3),o.kc(11," Email: "),o.Nb(),o.Ob(12,"ion-input",4),o.Wb("ngModelChange",(function(e){return o.gc(t),o.Yb().email=e})),o.Nb(),o.Nb(),o.Ob(13,"ion-item",2),o.Ob(14,"ion-label",3),o.kc(15," Direccion: "),o.Nb(),o.Ob(16,"ion-input",4),o.Wb("ngModelChange",(function(e){return o.gc(t),o.Yb().direccion=e})),o.Nb(),o.Nb(),o.Ob(17,"ion-item",2),o.Kb(18,"img",5),o.jc(19,u,1,0,"ion-icon",6),o.jc(20,b,2,0,"ion-button",7),o.Nb(),o.Ob(21,"div",8),o.Ob(22,"ion-button",9),o.Wb("click",(function(){return o.gc(t),o.Yb().modificar_cliente()})),o.kc(23,"Modificar"),o.Nb(),o.Nb(),o.Ob(24,"div",10),o.Kb(25,"img",11),o.Nb(),o.Nb()}if(2&e){var n=o.Yb();o.zb(4),o.dc("ngModel",n.razon_social),o.zb(4),o.dc("ngModel",n.telefono),o.zb(4),o.dc("ngModel",n.email),o.zb(4),o.dc("ngModel",n.direccion),o.zb(2),o.dc("src",n.logo,o.hc),o.zb(1),o.dc("ngIf",!(null==n.logo||"NULL"==n.logo)),o.zb(1),o.dc("ngIf",null==n.logo||"NULL"==n.logo)}}var h=function(){var e=function(){function e(i,t,n,o,r){_classCallCheck(this,e),this.loadingController=i,this.api_clientes=t,this.navParams=n,this.modalCtrl=o,this.imageCompress=r,this.id_cliente=this.navParams.get("id_cliente")}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.api_clientes.informacion_cliente(this.id_cliente).subscribe((function(i){e.cliente=i,e.cliente=e.cliente.result,e.razon_social=e.cliente.clienteDatos[0].razon_social_cliente,e.email=e.cliente.clienteDatos[0].email,e.telefono=e.cliente.clienteDatos[0].telefono,e.direccion=e.cliente.clienteDatos[0].direccion,e.logo=e.cliente.clienteDatos[0].logo_cliente,console.log(e.cliente)}))}},{key:"modificar_cliente",value:function(){var e=this;this.objeto={id_cliente:this.id_cliente,razon_social_cliente:this.razon_social,direccion:this.direccion,telefono:this.telefono,email:this.email},console.log(this.objeto),this.api_clientes.modificar_cliente(this.objeto).subscribe((function(i){e.logo?e.api_clientes.subir_logo_cliente({id_cliente:e.id_cliente,logo:e.logo}).subscribe((function(i){e.modalCtrl.dismiss({dismissed:!0})})):e.modalCtrl.dismiss({dismissed:!0})}),(function(e){console.log(e)}))}},{key:"agregarLogo",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.imageCompress.uploadFile().then((function(e){var t=e.image,o=e.orientation;return Object(n.a)(i,void 0,void 0,regeneratorRuntime.mark((function e(){var i,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({message:"Subiendo img"});case 2:return i=e.sent,e.next=5,i.present();case 5:console.warn("Size in bytes was:",this.imageCompress.byteCount(t)),this.imageCompress.compressFile(t,o,50,50).then((function(e){console.log(e),n.logo=e,n.api_clientes.subir_logo_cliente({id_cliente:n.id_cliente,logo:n.logo}).subscribe((function(e){n.loadingController.dismiss()}))}));case 7:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"deleteLogo",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({message:"Eliminando img"});case 2:return i=e.sent,e.next=5,i.present();case 5:this.api_clientes.subir_logo_cliente({id_cliente:this.id_cliente,logo:null}).subscribe((function(e){t.ngOnInit(),t.loadingController.dismiss()}));case 6:case"end":return e.stop()}}),e,this)})))}}]),e}();return e.\u0275fac=function(i){return new(i||e)(o.Jb(r.F),o.Jb(s.a),o.Jb(r.I),o.Jb(r.G),o.Jb(c.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-modificar-cliente"]],decls:5,vars:1,consts:[["color","primary",2,"text-align","center"],[4,"ngIf"],["lines","full"],[1,"titulos"],[3,"ngModel","ngModelChange"],["alt","",2,"width","50%","margin-left","25%","padding","5px",3,"src"],["name","trash-outline","color","danger","style","margin-top:15px",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],[2,"width","100%","text-align","center","margin-top","10px"],[3,"click"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"],["name","trash-outline","color","danger",2,"margin-top","15px",3,"click"]],template:function(e,i){1&e&&(o.Ob(0,"ion-header"),o.Ob(1,"ion-toolbar",0),o.Ob(2,"ion-title"),o.kc(3,"Modificar cliente"),o.Nb(),o.Nb(),o.Nb(),o.jc(4,p,26,7,"ion-content",1)),2&e&&(o.zb(4),o.dc("ngIf",i.cliente))},directives:[r.o,r.D,r.C,a.j,r.i,r.r,r.s,r.q,r.N,l.d,l.e,r.d,r.p],styles:[".titulos[_ngcontent-%COMP%]{color:#838383}"]}),e}()}}]);