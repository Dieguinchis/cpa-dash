{"version":3,"sources":["webpack:///src/app/paginas/administrar-visitas/administrar-visitas.page.html","webpack:///src/app/paginas/administrar-visitas/administrar-visitas-routing.module.ts","webpack:///src/app/paginas/administrar-visitas/administrar-visitas.module.ts","webpack:///src/app/paginas/administrar-visitas/administrar-visitas.page.scss","webpack:///src/app/paginas/administrar-visitas/administrar-visitas.page.ts"],"names":["routes","path","component","AdministrarVisitasPageRoutingModule","imports","forChild","exports","AdministrarVisitasPageModule","declarations","AdministrarVisitasPage","apiVisitasService","router","modalController","api_clientes","toastController","loadingController","alertController","visitas","entregado","finalizada","enProceso","pendiente","filtrar_fecha","filtroHoy","getVisitas","getAllVisitas","then","resp","console","log","result","filtrar","visita","Date","fecha_desde","setHours","fecha_visita","setDate","getDate","valueOf","fecha_hasta","visitas_filtro","filter","entreFechas","revisarEstado","sort","ordenarVisitas","temp","updateFilter","a","b","aaux","baux","estado_visitas","navigateByUrl","id_visita","create","cssClass","componentProps","modal","present","header","buttons","text","handler","eliminarVisita","al","message","load","cambiar_estado_visita","e","dismiss","duration","color","r","error","role","marcarEntregado","alert","id","err","aux","getFullYear","toString","getMonth","dia","event","val","target","value","toLowerCase","d","razon_social_cliente","includes","razon_social_sucursal","busqueda","selector","template"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,QAAMA,MAAM,GAAW,CACrB;AACEC,UAAI,EAAE,EADR;AAEEC,eAAS,EAAE;AAFb,KADqB,CAAvB;;AAWA,QAAaC,mCAAmC;AAAA;AAAA,KAAhD;;AAAaA,uCAAmC,6DAJ/C,+DAAS;AACRC,aAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,aAAO,EAAE,CAAC,4DAAD;AAFD,KAAT,CAI+C,GAAnCH,mCAAmC,CAAnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGb,QAAaI,4BAA4B;AAAA;AAAA,KAAzC;;AAAaA,gCAA4B,6DATxC,+DAAS;AACRH,aAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,uGAJO,CADD;AAORI,kBAAY,EAAE,CAAC,gFAAD;AAPN,KAAT,CASwC,GAA5BD,4BAA4B,CAA5B;;;;;;;;;;;;;;;;ACnBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACYf,QAAaE,sBAAsB;AAejC,sCACSC,iBADT,EAESC,MAFT,EAGSC,eAHT,EAISC,YAJT,EAKSC,eALT,EAMSC,iBANT,EAOSC,eAPT,EAOyC;AAAA;;AANhC,aAAAN,iBAAA,GAAAA,iBAAA;AACA,aAAAC,MAAA,GAAAA,MAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAC,YAAA,GAAAA,YAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAC,iBAAA,GAAAA,iBAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AApBF,aAAAC,OAAA,GAAU,EAAV;AAIA,aAAAC,SAAA,GAAY,IAAZ;AACA,aAAAC,UAAA,GAAa,IAAb;AACA,aAAAC,SAAA,GAAY,IAAZ;AACA,aAAAC,SAAA,GAAY,IAAZ;AACA,aAAAC,aAAA,GAAgB,KAAhB;AAaA;;AAvB0B;AAAA;AAAA,mCAyBtB;AACT,eAAKC,SAAL;AACA,eAAKC,UAAL;AACD;AA5BgC;AAAA;AAAA,qCA8BvB;AAAA;;AACR,eAAKd,iBAAL,CAAuBe,aAAvB,GAAuCC,IAAvC,CAA4C,UAACC,IAAD,EAAe;AACzDC,mBAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,MAAjB;AACA,iBAAI,CAACb,OAAL,GAAeU,IAAI,CAACG,MAApB;;AACA,iBAAI,CAACC,OAAL;AACD,WAJD;AAKD;AApCgC;AAAA;AAAA,oCAsCrBC,MAtCqB,EAsCf;AAChBJ,iBAAO,CAACC,GAAR,CAAY,IAAII,IAAJ,CAAS,IAAIA,IAAJ,CAAS,KAAKC,WAAd,EAA2BC,QAA3B,CAAoC,CAApC,CAAT,CAAZ,EAA6D,SAA7D,EAAuE,IAAIF,IAAJ,CAAS,IAAIA,IAAJ,CAASD,MAAM,CAACI,YAAhB,EAA8BC,OAA9B,CAAsC,IAAIJ,IAAJ,CAASD,MAAM,CAACI,YAAhB,EAA8BE,OAA9B,EAAtC,CAAT,CAAvE,EAAgK,cAAhK,EAAgL,IAAIL,IAAJ,CAAS,IAAIA,IAAJ,CAAS,KAAKC,WAAd,EAA2BC,QAA3B,CAAoC,EAApC,CAAT,CAAhL;;AACA,cAAK,IAAIF,IAAJ,CAASD,MAAM,CAACI,YAAhB,EAA8BC,OAA9B,CAAsC,IAAIJ,IAAJ,CAASD,MAAM,CAACI,YAAhB,EAA8BE,OAA9B,EAAtC,EAA+EC,OAA/E,MAA4F,IAAIN,IAAJ,CAAS,KAAKC,WAAd,EAA2BC,QAA3B,CAAoC,CAApC,EAAuCI,OAAvC,EAA7F,IAAmJ,IAAIN,IAAJ,CAASD,MAAM,CAACI,YAAhB,EAA8BC,OAA9B,CAAsC,IAAIJ,IAAJ,CAASD,MAAM,CAACI,YAAhB,EAA8BE,OAA9B,EAAtC,EAA+EC,OAA/E,MAA4F,IAAIN,IAAJ,CAAS,KAAKO,WAAd,EAA2BL,QAA3B,CAAoC,EAApC,EAAwCI,OAAxC,EAAnP,EAAuS;AACrS,mBAAO,IAAP;AACD,WAFD,MAEM;AACJ,mBAAO,KAAP;AACD;AACF;AA7CgC;AAAA;AAAA,kCA+C1B;AAAA;;AACL,cAAI,CAAC,KAAKjB,aAAV,EAAyB;AACvB,iBAAKmB,cAAL,GAAsB,KAAKxB,OAAL,CAAayB,MAAb,CAAoB,UAAAV,MAAM;AAAA,qBAAI,MAAI,CAACW,WAAL,CAAiBX,MAAjB,KAA4B,MAAI,CAACY,aAAL,CAAmBZ,MAAnB,CAAhC;AAAA,aAA1B,CAAtB;AACA,iBAAKS,cAAL,CAAoBI,IAApB,CAAyB,KAAKC,cAA9B;AACD,WAHD,MAGO;AACL,iBAAKL,cAAL,GAAsB,KAAKxB,OAAL,CAAayB,MAAb,CAAoB,UAAAV,MAAM;AAAA,qBAAI,MAAI,CAACY,aAAL,CAAmBZ,MAAnB,CAAJ;AAAA,aAA1B,CAAtB;AACA,iBAAKS,cAAL,CAAoBI,IAApB,CAAyB,KAAKC,cAA9B;AACD;;AACD,eAAKC,IAAL,GAAY,KAAKN,cAAjB;AACA,eAAKO,YAAL;AACD;AAzDgC;AAAA;AAAA,uCA2DlBC,CA3DkB,EA2DhBC,CA3DgB,EA2Df;AAChB,cAAIC,IAAI,GAAG,IAAIlB,IAAJ,CAASgB,CAAC,CAACb,YAAX,EAAyBG,OAAzB,EAAX;AACA,cAAIa,IAAI,GAAG,IAAInB,IAAJ,CAASiB,CAAC,CAACd,YAAX,EAAyBG,OAAzB,EAAX;AACA,iBAAQa,IAAI,GAAED,IAAd;AACD;AA/DgC;AAAA;AAAA,sCAiEnBnB,MAjEmB,EAiEb;AAClB,cAAGA,MAAM,CAACqB,cAAP,IAAyB,WAA5B,EAAwC;AACtC,mBAAO,KAAKnC,SAAZ;AACD;;AACD,cAAGc,MAAM,CAACqB,cAAP,IAAyB,YAA5B,EAAyC;AACvC,mBAAO,KAAKlC,UAAZ;AACD;;AACD,cAAGa,MAAM,CAACqB,cAAP,IAAyB,YAA5B,EAAyC;AACvC,mBAAO,KAAKjC,SAAZ;AACD;;AACD,cAAGY,MAAM,CAACqB,cAAP,IAAyB,WAA5B,EAAwC;AACtC,mBAAO,KAAKhC,SAAZ;AACD;AACF;AA9EgC;AAAA;AAAA,uCAgFrB;AACV,cAAI,IAAIY,IAAJ,CAAS,KAAKC,WAAd,EAA2BK,OAA3B,KAAuC,IAAIN,IAAJ,CAAS,KAAKO,WAAd,EAA2BD,OAA3B,EAA3C,EAAgF;AAC9E,iBAAKC,WAAL,GAAmB,KAAKN,WAAxB;AACD;;AACD,eAAKH,OAAL;AACD;AArFgC;AAAA;AAAA,uCAuFrB;AACV,cAAI,IAAIE,IAAJ,CAAS,KAAKC,WAAd,EAA2BK,OAA3B,KAAuC,IAAIN,IAAJ,CAAS,KAAKO,WAAd,EAA2BD,OAA3B,EAA3C,EAAgF;AAC9E,iBAAKL,WAAL,GAAmB,KAAKM,WAAxB;AACD;;AACD,eAAKT,OAAL;AACD;AA5FgC;AAAA;AAAA,gDA8FZ;AACnB,eAAKpB,MAAL,CAAY2C,aAAZ,CAA0B,iCAA1B;AACD;AAhGgC;AAAA;AAAA,kCAkGjBC,SAlGiB,EAkGN;;;;;;;;AACX,2BAAM,KAAK3C,eAAL,CAAqB4C,MAArB,CAA4B;AAC9CtD,+BAAS,EAAE,0GADmC;AAE9CuD,8BAAQ,EAAE,iBAFoC;AAG9CC,oCAAc,EAAE;AACd,qCAAaH;AADC;AAH8B,qBAA5B,CAAN;;;AAARI,yB;;AAOC,2BAAMA,KAAK,CAACC,OAAN,EAAN;;;;;;;;;;;;AACR;AA3GgC;AAAA;AAAA,4CA6GP5B,MA7GO,EA6GD;;;;;;;;;;AACrB,2BAAM,KAAKhB,eAAL,CAAqBwC,MAArB,CAA4B;AACzCK,4BAAM,EAAE,sCADiC;AAEzCC,6BAAO,EACP,CACC;AACGC,4BAAI,EAAE,IADT;AAEGC,+BAAO,EAAE,mBAAM,CAEd;AAJJ,uBADD,EAOE;AACED,4BAAI,EAAE,IADR;AAEEC,+BAAO,EAAE,mBAAM;AACb,gCAAI,CAACC,cAAL,CAAoBjC,MAApB;AAED;AALH,uBAPF;AAHyC,qBAA5B,CAAN;;;AAALkC,sB;AAmBJA,sBAAE,CAACN,OAAH;;;;;;;;;AACD;AAlIgC;AAAA;AAAA,uCAoIZ5B,MApIY,EAoIN;;;;;;;;;;AACd,2BAAM,KAAKjB,iBAAL,CAAuByC,MAAvB,CAA8B;AAC7CW,6BAAO,EAAC;AADqC,qBAA9B,CAAN;;;AAAPC,wB;AAGJA,wBAAI,CAACR,OAAL;AACA,yBAAK/C,YAAL,CAAkBwD,qBAAlB,CAAwCrC,MAAM,CAACuB,SAA/C,EAA0D,WAA1D,EAAuE7B,IAAvE,CAA4E,UAAA4C,CAAC,EAAI;AAC/EF,0BAAI,CAACG,OAAL;;AACA,4BAAI,CAAC/C,UAAL;;AACA,4BAAI,CAACV,eAAL,CAAqB0C,MAArB,CAA4B;AAC1BW,+BAAO,EAAC,0BADkB;AAE1BK,gCAAQ,EAAE,IAFgB;AAG1BC,6BAAK,EAAC;AAHoB,uBAA5B,EAIG/C,IAJH,CAIQ,UAAAgD,CAAC,EAAG;AACVA,yBAAC,CAACd,OAAF;AACD,uBAND;;AAOAhC,6BAAO,CAACC,GAAR,CAAYyC,CAAZ;AACD,qBAXD,WAWS,UAAAK,KAAK,EAAI;AAChBP,0BAAI,CAACG,OAAL;;AACA,4BAAI,CAACzD,eAAL,CAAqB0C,MAArB,CAA4B;AAC1BW,+BAAO,EAAC,2BADkB;AAE1BK,gCAAQ,EAAE,IAFgB;AAG1BC,6BAAK,EAAC;AAHoB,uBAA5B,EAIG/C,IAJH,CAIQ,UAAAgD,CAAC,EAAG;AACVA,yBAAC,CAACd,OAAF;AACD,uBAND;;AAOAhC,6BAAO,CAAC+C,KAAR,CAAcA,KAAd;AACD,qBArBD;;;;;;;;;AAsBD;AA/JgC;AAAA;AAAA,6CAiKN3C,MAjKM,EAiKE;;;;;;;;;;AACnB,2BAAM,KAAKhB,eAAL,CAAqBwC,MAArB,CAA4B;AAC9CK,4BAAM,EAAE,UADsC;AAE9CM,6BAAO,EAAE,6DAFqC;AAG9CL,6BAAO,EAAE,CACP;AAACC,4BAAI,EAAC,IAAN;AAAWa,4BAAI,EAAC;AAAhB,uBADO,EAEP;AAACb,4BAAI,EAAC,IAAN;AACAC,+BAAO,EAAE,mBAAK;AACZ,gCAAI,CAACa,eAAL,CAAqB7C,MAAM,CAACuB,SAA5B;AACD;AAHD,uBAFO;AAHqC,qBAA5B,CAAN;;;AAARuB,yB;;AAaN,2BAAMA,KAAK,CAAClB,OAAN,EAAN;;;;;;;;;AACD;AAhLgC;AAAA;AAAA,wCAkLXmB,EAlLW,EAkLT;;;;;;;;;;AACX,2BAAM,KAAKhE,iBAAL,CAAuByC,MAAvB,CAA8B;AAC7CW,6BAAO,EAAC;AADqC,qBAA9B,CAAN;;;AAAPC,wB;AAGJA,wBAAI,CAACR,OAAL;AACA,yBAAK/C,YAAL,CAAkBwD,qBAAlB,CAAwCU,EAAxC,EAA4C,WAA5C,EAAyDrD,IAAzD,CAA8D,UAAA4C,CAAC,EAAI;AACjE,4BAAI,CAAC9C,UAAL;;AACA4C,0BAAI,CAACG,OAAL;;AACA,4BAAI,CAACzD,eAAL,CAAqB0C,MAArB,CAA4B;AAC1BW,+BAAO,EAAC,yBADkB;AAE1BK,gCAAQ,EAAE,IAFgB;AAG1BC,6BAAK,EAAC;AAHoB,uBAA5B,EAIG/C,IAJH,CAIQ,UAAAgD,CAAC,EAAG;AACVA,yBAAC,CAACd,OAAF;AACD,uBAND;AAOD,qBAVD,WAUS,UAAAoB,GAAG,EAAG;AACbZ,0BAAI,CAACG,OAAL;;AACA,4BAAI,CAACzD,eAAL,CAAqB0C,MAArB,CAA4B;AAC1BW,+BAAO,EAAC,wCADkB;AAE1BK,gCAAQ,EAAE,IAFgB;AAG1BC,6BAAK,EAAC;AAHoB,uBAA5B,EAIG/C,IAJH,CAIQ,UAAAgD,CAAC,EAAG;AACVA,yBAAC,CAACd,OAAF;AACD,uBAND;;AAOAhC,6BAAO,CAAC+C,KAAR,CAAcK,GAAd;AACD,qBApBD;;;;;;;;;AAsBD;AA7MgC;AAAA;AAAA,oCA+MxB;AACP,cAAIC,GAAG,GAAG,IAAIhD,IAAJ,GAAWiD,WAAX,GAAyBC,QAAzB,KAAsC,GAAtC,GAA4C,CAAC,IAAIlD,IAAJ,GAAWmD,QAAX,KAAwB,CAAzB,EAA4BD,QAA5B,EAA5C,GAAqF,GAArF,IAA6F,IAAIlD,IAAJ,GAAWK,OAAX,MAAwB,EAAzB,GAA+B,IAAIL,IAAJ,GAAWK,OAAX,EAA/B,GAAsD,MAAM,IAAIL,IAAJ,GAAWK,OAAX,GAAqB6C,QAArB,EAAxJ,IAA2L,iBAArM;AACA,eAAK3C,WAAL,GAAmByC,GAAnB;AACA,eAAK/C,WAAL,GAAmB+C,GAAnB;AACA,eAAK3D,aAAL,GAAqB,KAArB;AACD;AApNgC;AAAA;AAAA,iCAsNxB+D,GAtNwB,EAsNrB;AACVzD,iBAAO,CAACC,GAAR,CAAY,IAAII,IAAJ,CAASoD,GAAT,EAAchD,OAAd,CAAsBgD,GAAG,CAAC/C,OAAJ,KAAc,CAApC,CAAZ;AACA,iBAAO,IAAIL,IAAJ,CAASoD,GAAT,EAAchD,OAAd,CAAsBgD,GAAG,CAAC/C,OAAJ,KAAc,CAApC,CAAP;AACD;AAzNgC;AAAA;AAAA,qCA2NvB;AACR,cAAI2C,GAAG,GAAG,IAAIhD,IAAJ,GAAWiD,WAAX,GAAyBC,QAAzB,KAAsC,GAAtC,GAA4C,CAAC,IAAIlD,IAAJ,GAAWmD,QAAX,KAAwB,CAAzB,EAA4BD,QAA5B,EAA5C,GAAqF,GAArF,GAA4F,IAAIlD,IAAJ,GAAWK,OAAX,EAAD,CAAuB6C,QAAvB,EAA3F,GAA+H,iBAAzI;;AACA,cAAKF,GAAG,IAAI,KAAKzC,WAAZ,IAA2ByC,GAAG,IAAI,KAAK/C,WAAxC,IAAyD,CAAC,KAAKZ,aAAnE,EAAkF;AAChF,mBAAO,IAAP;AACD,WAFD,MAEK;AACH,mBAAO,KAAP;AACD;AACF;AAlOgC;AAAA;AAAA,qCAoOpBgE,KApOoB,EAoOZ;AACnB,cAAIA,KAAJ,EAAU;AACR,gBAAMC,GAAG,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmBC,WAAnB,EAAZ;AACA,gBAAM3C,IAAI,GAAG,KAAKA,IAAL,CAAUL,MAAV,CAAiB,UAAUiD,CAAV,EAAa;;;AAEzC,qBAAO,OAAAA,CAAC,CAACC,oBAAF,MAAsB,IAAtB,IAAsB,aAAtB,GAAsB,MAAtB,GAAsB,GAAEF,WAAF,GAAgBG,QAAhB,CAAyBN,GAAzB,CAAtB,MAAkD,MAAKI,CAAC,CAACG,qBAAP,MAA4B,IAA5B,IAA4B,aAA5B,GAA4B,MAA5B,GAA4B,GAAEJ,WAAF,GAAgBG,QAAhB,CAAyBN,GAAzB,CAA9E,CAAP;AAED,aAJY,CAAb,CAFQ,CAQR;;AACA,iBAAK9C,cAAL,GAAsBM,IAAtB;AACD,WAVD,MAUK;AACH,gBAAMwC,IAAG,GAAG,KAAKQ,QAAjB;;AACA,gBAAMhD,KAAI,GAAG,KAAKA,IAAL,CAAUL,MAAV,CAAiB,UAAUiD,CAAV,EAAa;;;AAEzC,qBAAO,OAAAA,CAAC,CAACC,oBAAF,MAAsB,IAAtB,IAAsB,aAAtB,GAAsB,MAAtB,GAAsB,GAAEF,WAAF,GAAgBG,QAAhB,CAAyBN,IAAzB,CAAtB,MAAkD,MAAKI,CAAC,CAACG,qBAAP,MAA4B,IAA5B,IAA4B,aAA5B,GAA4B,MAA5B,GAA4B,GAAEJ,WAAF,GAAgBG,QAAhB,CAAyBN,IAAzB,CAA9E,CAAP;AAED,aAJY,CAAb;;AAMA,gBAAIA,IAAJ,EAAQ;AACN,mBAAK9C,cAAL,GAAsBM,KAAtB;AACD;AACF;AAGF;AA7PgC;AAAA;AAAA,sCA+PtB;AACT,eAAKN,cAAL,GAAsB,KAAKM,IAA3B;AACD;AAjQgC;;AAAA;AAAA,OAAnC;;;;cAgB8B;;cACX;;cACS;;cACH;;cACG;;cACE;;cACF;;;;AAtBftC,0BAAsB,6DALlC,gEAAU;AACTuF,cAAQ,EAAE,yBADD;AAETC,cAAQ,EAAR;AAAA;AAAA,8HAFS;;;;AAAA,KAAV,CAKkC,GAAtBxF,sBAAsB,CAAtB","file":"paginas-administrar-visitas-administrar-visitas-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-item>\\r\\n      <ion-col size=\\\"1\\\">\\r\\n        <ion-button [disabled]=\\\"hoyDisable()\\\" (click)=\\\"filtroHoy()\\\" shape=\\\"round\\\">\\r\\n          Hoy\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"2\\\">\\r\\n        <ion-item lines=\\\"none\\\">\\r\\n          <ion-label position=\\\"floating\\\">Desde</ion-label>\\r\\n          <ion-datetime [disabled]=\\\"filtrar_fecha\\\" display-format=\\\"DD.MM.YYYY\\\" [(ngModel)]=\\\"fecha_desde\\\" (ionChange)=\\\"revisarMenor()\\\"></ion-datetime>\\r\\n        </ion-item>\\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"2\\\">\\r\\n        <ion-item lines=\\\"none\\\">\\r\\n          <ion-label position=\\\"floating\\\">Hasta</ion-label>\\r\\n          <ion-datetime [disabled]=\\\"filtrar_fecha\\\" display-format=\\\"DD.MM.YYYY\\\" [(ngModel)]=\\\"fecha_hasta\\\" (ionChange)=\\\"revisarMayor()\\\"></ion-datetime> \\r\\n        </ion-item>     \\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"2\\\" class=\\\"filter-col\\\">\\r\\n        <ion-label class=\\\"ion-text-wrap\\\" style=\\\"padding-right: 5px;\\\">Siempre</ion-label>\\r\\n        <ion-checkbox [(ngModel)]=\\\"filtrar_fecha\\\" (ionChange)=\\\"filtrar()\\\"></ion-checkbox>\\r\\n      </ion-col>\\r\\n      <ion-col offset=\\\"0.6\\\" size=\\\"1.1\\\" class=\\\"filter-col\\\">\\r\\n        <ion-label class=\\\"ion-text-wrap\\\" style=\\\"padding-right: 5px;\\\">Entregado</ion-label>\\r\\n        <ion-checkbox [(ngModel)]=\\\"entregado\\\" (ionChange)=\\\"filtrar()\\\"></ion-checkbox>\\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"1.1\\\" class=\\\"filter-col\\\">\\r\\n        <ion-label class=\\\"ion-text-wrap\\\" style=\\\"padding-right: 5px;\\\">Finalizada</ion-label>\\r\\n        <ion-checkbox [(ngModel)]=\\\"finalizada\\\" (ionChange)=\\\"filtrar()\\\"></ion-checkbox>       \\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"1.1\\\" class=\\\"filter-col\\\">\\r\\n        <ion-label class=\\\"ion-text-wrap\\\" style=\\\"padding-right: 5px;\\\">En proceso</ion-label>\\r\\n        <ion-checkbox [(ngModel)]=\\\"enProceso\\\" (ionChange)=\\\"filtrar()\\\"></ion-checkbox>     \\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"1.1\\\" class=\\\"filter-col\\\">\\r\\n        <ion-label class=\\\"ion-text-wrap\\\" style=\\\"padding-right: 5px;\\\">Pendiente</ion-label>\\r\\n        <ion-checkbox [(ngModel)]=\\\"pendiente\\\" (ionChange)=\\\"filtrar()\\\"></ion-checkbox>   \\r\\n      </ion-col>\\r\\n    </ion-item>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-searchbar class=\\\"ion-no-padding\\\" style=\\\"--background: rgb(250, 250, 250)\\\" [(ngModel)]=\\\"busqueda\\\" animated placeholder=\\\"Sucursal || Razon Social\\\" (ionClear)=\\\"searchClear()\\\" (keyup)=\\\"updateFilter($event)\\\"></ion-searchbar>\\r\\n  <ion-item lines=\\\"full\\\">\\r\\n    <ion-col size=\\\"3\\\"><b>Fecha</b></ion-col>\\r\\n    <ion-col size=\\\"3\\\"><b>Sucursal</b></ion-col>\\r\\n    <ion-col size=\\\"3\\\"><b>Estado</b></ion-col>\\r\\n    <ion-col size=\\\"3\\\"><b>Acciones</b></ion-col>\\r\\n  </ion-item>\\r\\n  <ion-item class=\\\"itemHover\\\" *ngFor=\\\"let visita of visitas_filtro\\\">\\r\\n    <ion-col (click)=\\\"verVisita(visita.id_visita)\\\" size=\\\"3\\\">{{visita.fecha_visita | date:  \\\"dd/MM/yyyy HH:mm\\\"}} </ion-col>\\r\\n    <ion-col (click)=\\\"verVisita(visita.id_visita)\\\" size=\\\"3\\\">{{visita.razon_social_sucursal}}</ion-col>\\r\\n    <ion-col (click)=\\\"verVisita(visita.id_visita)\\\" size=\\\"3\\\">{{visita.estado_visitas}}</ion-col>\\r\\n    <ion-col size=\\\"0.8\\\">\\r\\n      <ion-icon color=\\\"primary\\\" name=\\\"enter-outline\\\" (click)=\\\"verVisita(visita.id_visita)\\\"></ion-icon>\\r\\n      <ion-icon *ngIf=\\\"visita.estado_visitas == 'pendiente' || visita.estado_visitas == 'en proceso'\\\" color=\\\"danger\\\" name=\\\"trash-outline\\\" (click)=\\\"eliminarVisitaAlert(visita)\\\"></ion-icon>\\r\\n      <!-- <ion-icon class=\\\"no-pointer\\\" name=\\\"close-outline\\\" *ngIf=\\\"visita.estado_visitas != 'finalizada' && visita.estado_visitas != 'entregado'\\\"></ion-icon> -->\\r\\n      <ion-icon style=\\\"padding-left: 5px;\\\" name=\\\"mail-outline\\\" *ngIf=\\\"visita.estado_visitas == 'finalizada' \\\" (click)=\\\"marcarEntregadoAlert(visita)\\\"></ion-icon>\\r\\n      <!-- <ion-icon style=\\\"padding-left: 5px;color: rgb(52, 183, 241);\\\" name=\\\"checkmark-done-outline\\\" *ngIf=\\\"visita.estado_visitas == 'entregado'\\\" class=\\\"no-pointer\\\"></ion-icon> -->\\r\\n    </ion-col>\\r\\n    <ion-col (click)=\\\"verVisita(visita.id_visita)\\\" size=\\\"2.2\\\"></ion-col>\\r\\n  </ion-item>\\r\\n  <ion-item *ngIf=\\\"visitas_filtro?.length == 0\\\">\\r\\n    <ion-label style=\\\"text-align: center;\\\">No se encuentran visitas que cumplan las condiciones</ion-label>\\r\\n  </ion-item>\\r\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" style=\\\"padding-right: 20px; padding-bottom: 10px;\\\" >\\r\\n    <ion-fab-button (click)=\\\"navigateToCrearVisita()\\\">\\r\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { AdministrarVisitasPage } from './administrar-visitas.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AdministrarVisitasPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AdministrarVisitasPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AdministrarVisitasPageRoutingModule } from './administrar-visitas-routing.module';\r\n\r\nimport { AdministrarVisitasPage } from './administrar-visitas.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    AdministrarVisitasPageRoutingModule\r\n  ],\r\n  declarations: [AdministrarVisitasPage]\r\n})\r\nexport class AdministrarVisitasPageModule {}\r\n","export default \".filter-col {\\n  display: flex;\\n  align-items: center;\\n}\\n\\nion-checkbox {\\n  min-width: 18px;\\n}\\n\\nion-icon {\\n  cursor: pointer;\\n}\\n\\n.no-pointer {\\n  cursor: default;\\n  color: gray;\\n}\\n\\n.itemHover:hover {\\n  --background: rgb(236, 236, 236);\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnaW5hcy9hZG1pbmlzdHJhci12aXNpdGFzL0Q6XFxSZXBvc2l0b3Jpb3NcXFBST0RVQ0NJT05cXGZyb250ZW5kX2NwYV9hZG1pbi9zcmNcXGFwcFxccGFnaW5hc1xcYWRtaW5pc3RyYXItdmlzaXRhc1xcYWRtaW5pc3RyYXItdmlzaXRhcy5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2luYXMvYWRtaW5pc3RyYXItdmlzaXRhcy9hZG1pbmlzdHJhci12aXNpdGFzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7RUFDQSxtQkFBQTtBQ0NKOztBRENBO0VBQ0ksZUFBQTtBQ0VKOztBREFBO0VBQ0ksZUFBQTtBQ0dKOztBREZDO0VBQ0csZUFBQTtFQUNBLFdBQUE7QUNLSjs7QURIQTtFQUNJLGdDQUFBO0VBQ0EsZUFBQTtBQ01KIiwiZmlsZSI6InNyYy9hcHAvcGFnaW5hcy9hZG1pbmlzdHJhci12aXNpdGFzL2FkbWluaXN0cmFyLXZpc2l0YXMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmZpbHRlci1jb2x7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG5pb24tY2hlY2tib3h7XHJcbiAgICBtaW4td2lkdGg6IDE4cHg7XHJcbn1cclxuaW9uLWljb257XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn0ubm8tcG9pbnRlcntcclxuICAgIGN1cnNvcjpkZWZhdWx0O1xyXG4gICAgY29sb3I6IGdyYXk7XHJcbn1cclxuLml0ZW1Ib3Zlcjpob3ZlcntcclxuICAgIC0tYmFja2dyb3VuZDogcmdiKDIzNiwgMjM2LCAyMzYpO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG59IiwiLmZpbHRlci1jb2wge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG5pb24tY2hlY2tib3gge1xuICBtaW4td2lkdGg6IDE4cHg7XG59XG5cbmlvbi1pY29uIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4ubm8tcG9pbnRlciB7XG4gIGN1cnNvcjogZGVmYXVsdDtcbiAgY29sb3I6IGdyYXk7XG59XG5cbi5pdGVtSG92ZXI6aG92ZXIge1xuICAtLWJhY2tncm91bmQ6IHJnYigyMzYsIDIzNiwgMjM2KTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController, LoadingController, ModalController, ToastController } from '@ionic/angular';\r\nimport { ApiClientesService } from '../administrar-clientes/servicios/api-clientes.service';\r\nimport { VerVisitaPage } from '../administrar-clientes/ver-cliente/ver-visita/ver-visita.page';\r\nimport { ApiVisitasService } from '../programar-visita/servicios/api-visitas.service';\r\n\r\n@Component({\r\n  selector: 'app-administrar-visitas',\r\n  templateUrl: './administrar-visitas.page.html',\r\n  styleUrls: ['./administrar-visitas.page.scss'],\r\n})\r\nexport class AdministrarVisitasPage implements OnInit {\r\n\r\n  public visitas = [];\r\n  public fecha_desde;\r\n  public fecha_hasta;\r\n  public visitas_filtro;\r\n  public entregado = true;\r\n  public finalizada = true;\r\n  public enProceso = true;\r\n  public pendiente = true;\r\n  public filtrar_fecha = false;\r\n  public temp;\r\n  public busqueda;\r\n\r\n\r\n  constructor(\r\n    public apiVisitasService: ApiVisitasService,\r\n    public router: Router,\r\n    public modalController: ModalController,\r\n    public api_clientes: ApiClientesService,\r\n    public toastController: ToastController,\r\n    public loadingController: LoadingController,\r\n    public alertController: AlertController\r\n    ) { }\r\n\r\n  ngOnInit() {\r\n    this.filtroHoy();\r\n    this.getVisitas();\r\n  }\r\n\r\n  getVisitas(){\r\n    this.apiVisitasService.getAllVisitas().then((resp: any) => {\r\n      console.log(resp.result)\r\n      this.visitas = resp.result;\r\n      this.filtrar();\r\n    })\r\n  }\r\n\r\n  entreFechas(visita){\r\n    console.log(new Date(new Date(this.fecha_desde).setHours(0)),'///////',new Date(new Date(visita.fecha_visita).setDate(new Date(visita.fecha_visita).getDate())),'////////////', new Date(new Date(this.fecha_desde).setHours(24)))\r\n    if ((new Date(visita.fecha_visita).setDate(new Date(visita.fecha_visita).getDate()).valueOf() >= new Date(this.fecha_desde).setHours(0).valueOf()) && (new Date(visita.fecha_visita).setDate(new Date(visita.fecha_visita).getDate()).valueOf() <= new Date(this.fecha_hasta).setHours(24).valueOf())) {\r\n      return true\r\n    }else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  filtrar(){\r\n    if (!this.filtrar_fecha) {\r\n      this.visitas_filtro = this.visitas.filter(visita => this.entreFechas(visita) && this.revisarEstado(visita))\r\n      this.visitas_filtro.sort(this.ordenarVisitas)\r\n    } else {\r\n      this.visitas_filtro = this.visitas.filter(visita => this.revisarEstado(visita))\r\n      this.visitas_filtro.sort(this.ordenarVisitas)\r\n    }\r\n    this.temp = this.visitas_filtro;\r\n    this.updateFilter();\r\n  }\r\n\r\n  ordenarVisitas(a,b){\r\n    var aaux = new Date(a.fecha_visita).valueOf();\r\n    var baux = new Date(b.fecha_visita).valueOf();\r\n    return  baux -aaux;\r\n  }\r\n\r\n  revisarEstado(visita){\r\n    if(visita.estado_visitas == 'entregado'){\r\n      return this.entregado\r\n    }\r\n    if(visita.estado_visitas == 'finalizada'){\r\n      return this.finalizada\r\n    }\r\n    if(visita.estado_visitas == 'en proceso'){\r\n      return this.enProceso\r\n    }\r\n    if(visita.estado_visitas == 'pendiente'){\r\n      return this.pendiente\r\n    }\r\n  }\r\n  \r\n  revisarMenor(){\r\n    if (new Date(this.fecha_desde).valueOf() > new Date(this.fecha_hasta).valueOf()){\r\n      this.fecha_hasta = this.fecha_desde\r\n    }\r\n    this.filtrar();\r\n  }\r\n\r\n  revisarMayor(){\r\n    if (new Date(this.fecha_desde).valueOf() > new Date(this.fecha_hasta).valueOf()){\r\n      this.fecha_desde = this.fecha_hasta\r\n    }\r\n    this.filtrar();\r\n  }\r\n\r\n  navigateToCrearVisita(){\r\n    this.router.navigateByUrl('menu-principal/programar-visita')\r\n  }\r\n\r\n  async verVisita(id_visita) {\r\n    const modal = await this.modalController.create({\r\n      component: VerVisitaPage,\r\n      cssClass: 'my-custom-class',\r\n      componentProps: {\r\n        'id_visita': id_visita\r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  async eliminarVisitaAlert(visita){\r\n    var al = await this.alertController.create({\r\n      header: 'Seguro que desea eliminar la visita?',\r\n      buttons: \r\n      [\r\n       { \r\n          text: 'No',\r\n          handler: () => {\r\n            \r\n          }\r\n        },\r\n        {\r\n          text: 'Si',\r\n          handler: () => {\r\n            this.eliminarVisita(visita);\r\n            \r\n          }\r\n        }\r\n      ]\r\n    })\r\n    al.present()\r\n  }\r\n\r\n  async eliminarVisita(visita){\r\n    var load = await this.loadingController.create({\r\n      message:\"Eliminando la visita\"\r\n    })\r\n    load.present();\r\n    this.api_clientes.cambiar_estado_visita(visita.id_visita, 'eliminado').then(e => {\r\n      load.dismiss();\r\n      this.getVisitas();\r\n      this.toastController.create({\r\n        message:\"Se elimino correctamente\",\r\n        duration: 2000,\r\n        color:\"success\"\r\n      }).then(r =>{\r\n        r.present();\r\n      })\r\n      console.log(e);\r\n    }).catch(error => {\r\n      load.dismiss();\r\n      this.toastController.create({\r\n        message:\"Hubo un error al eliminar\",\r\n        duration: 2000,\r\n        color:\"danger\"\r\n      }).then(r =>{\r\n        r.present();\r\n      })\r\n      console.error(error);\r\n    })\r\n  }\r\n\r\n  async marcarEntregadoAlert(visita) {\r\n    const alert = await this.alertController.create({\r\n      header: 'Atención',\r\n      message: '¿Estas seguro que deseas marcar esta visita como entregada?',\r\n      buttons: [\r\n        {text:'No',role:'cancel'},\r\n        {text:'Si',\r\n        handler: () =>{\r\n          this.marcarEntregado(visita.id_visita);\r\n        }  \r\n      }\r\n      ]\r\n    });\r\n  \r\n    await alert.present();\r\n  }\r\n\r\n  async marcarEntregado(id){\r\n    var load = await this.loadingController.create({\r\n      message:\"Cargando visita\"\r\n    })\r\n    load.present();\r\n    this.api_clientes.cambiar_estado_visita(id, 'entregado').then(e => {\r\n      this.getVisitas();\r\n      load.dismiss();\r\n      this.toastController.create({\r\n        message:\"Se Marco como entregada\",\r\n        duration: 2000,\r\n        color:\"success\"\r\n      }).then(r =>{\r\n        r.present();\r\n      })\r\n    }).catch(err =>{\r\n      load.dismiss();\r\n      this.toastController.create({\r\n        message:\"Hubo un error al marcar como entregada\",\r\n        duration: 2000,\r\n        color:\"danger\"\r\n      }).then(r =>{\r\n        r.present();\r\n      })\r\n      console.error(err);\r\n    })\r\n\r\n  }\r\n\r\n  filtroHoy(){\r\n    var aux = new Date().getFullYear().toString() + '-' + (new Date().getMonth() + 1).toString() + '-' + ((new Date().getDate() >= 10) ? new Date().getDate() : '0' + new Date().getDate().toString()) + 'T00:00:00-03:00';\r\n    this.fecha_hasta = aux;\r\n    this.fecha_desde = aux;\r\n    this.filtrar_fecha = false;\r\n  }\r\n\r\n  sumarDia(dia){\r\n    console.log(new Date(dia).setDate(dia.getDate()+1))\r\n    return new Date(dia).setDate(dia.getDate()+1)\r\n  }\r\n\r\n  hoyDisable(){\r\n    var aux = new Date().getFullYear().toString() + '-' + (new Date().getMonth() + 1).toString() + '-' + (new Date().getDate()).toString() + 'T00:00:00-03:00';\r\n    if ((aux == this.fecha_hasta && aux == this.fecha_desde) && (!this.filtrar_fecha)){\r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n  }\r\n\r\n  updateFilter(event?) {\r\n    if (event){\r\n      const val = event.target.value.toLowerCase();\r\n      const temp = this.temp.filter(function (d) {\r\n\r\n        return d.razon_social_cliente?.toLowerCase().includes(val) || d.razon_social_sucursal?.toLowerCase().includes(val);\r\n        \r\n      });\r\n  \r\n      // update the rows\r\n      this.visitas_filtro = temp;\r\n    }else{\r\n      const val = this.busqueda;\r\n      const temp = this.temp.filter(function (d) {\r\n\r\n        return d.razon_social_cliente?.toLowerCase().includes(val) || d.razon_social_sucursal?.toLowerCase().includes(val);\r\n        \r\n      });\r\n  \r\n      if (val){\r\n        this.visitas_filtro = temp;\r\n      }\r\n    }\r\n\r\n    \r\n  }\r\n\r\n  searchClear(){\r\n    this.visitas_filtro = this.temp;\r\n  }\r\n}\r\n"]}