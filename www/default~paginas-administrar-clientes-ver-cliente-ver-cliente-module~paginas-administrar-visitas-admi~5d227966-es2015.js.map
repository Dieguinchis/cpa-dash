{"version":3,"sources":["./src/app/paginas/administrar-clientes/ver-cliente/modificar-visita/modificar-visita.page.html","./src/app/paginas/administrar-clientes/ver-cliente/ver-visita/ver-visita.page.html","./src/app/paginas/administrar-clientes/servicios/api-clientes.service.ts","./src/app/paginas/administrar-clientes/ver-cliente/modificar-visita/modificar-visita.page.scss","./src/app/paginas/administrar-clientes/ver-cliente/modificar-visita/modificar-visita.page.ts","./src/app/paginas/administrar-clientes/ver-cliente/ver-visita/ver-visita.page.scss","./src/app/paginas/administrar-clientes/ver-cliente/ver-visita/ver-visita.page.ts"],"names":[],"mappings":"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","file":"default~paginas-administrar-clientes-ver-cliente-ver-cliente-module~paginas-administrar-visitas-admi~5d227966-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>Modificar Visita</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"close()\\\">\\r\\n        <ion-icon name=\\\"close-outline\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n  <!-- <ion-button (click)=\\\"onClick()\\\" expand=\\\"block\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\r\\n      Click me\\r\\n  </ion-button> -->\\r\\n\\r\\n  <ion-item>\\r\\n      <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar servicios a ofrecer</ion-label>\\r\\n      <ion-select [disabled]=\\\"sucursal_elegida == null\\\" [(ngModel)]=\\\"servicios_elegidosAux\\\"multiple=\\\"true\\\" (ionChange)=\\\"serviciosElegidosChange()\\\">\\r\\n          <ion-select-option *ngFor=\\\"let servicio of listado_servicios\\\" value=\\\"{{servicio.id_servicio}}\\\">{{servicio.nombre_servicio}}</ion-select-option>\\r\\n      </ion-select>\\r\\n  </ion-item>\\r\\n\\r\\n  <div *ngFor=\\\"let servicio of serviciosElegidos\\\" style=\\\"text-align: center;\\\">\\r\\n      <h2 style=\\\"text-align: center;\\\">{{servicio.nombre_servicio}}</h2>\\r\\n      <div *ngFor=\\\"let equipo of servicio.equipos\\\">\\r\\n          <ion-label fixed style=\\\"text-align: center;color: var(--ion-color-secondary);font-weight: bold;\\\">{{equipo.nombre_equipo}}</ion-label>\\r\\n          <ion-item style=\\\"margin-top: 10px;\\\">\\r\\n              <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar técnico a cargo</ion-label>\\r\\n              <ion-select [(ngModel)]=\\\"equipo.tecnico\\\">\\r\\n                  <ion-select-option *ngFor=\\\"let tecnico of listado_tecnicos\\\" value=\\\"{{tecnico.id_tecnico}}\\\">{{tecnico.nombre_tecnico}} {{tecnico.apellido_tecnico}}</ion-select-option>\\r\\n              </ion-select>\\r\\n          </ion-item>\\r\\n      </div>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"show\\\">\\r\\n      <div *ngFor=\\\"let servicio of grupoWorkStationElegidos\\\" style=\\\"text-align: center;\\\">\\r\\n          <h2 style=\\\"text-align: center;\\\">{{servicio.nombre_equipo_grupo}}</h2>\\r\\n          <div *ngFor=\\\"let equipo of servicio.equipos\\\">\\r\\n              <ion-label fixed style=\\\"text-align: center;color: var(--ion-color-secondary);font-weight: bold;\\\">{{equipo.nombre_equipo}}: {{equipo.nombre_servicio}}</ion-label>\\r\\n          </div>\\r\\n          <ion-item style=\\\"margin-top: 10px;\\\">\\r\\n              <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar técnico a cargo</ion-label>\\r\\n              <ion-select [(ngModel)]=\\\"servicio.tecnico\\\">\\r\\n                  <ion-select-option *ngFor=\\\"let tecnico of listado_tecnicos\\\" value=\\\"{{tecnico.id_tecnico}}\\\">{{tecnico.nombre_tecnico}} {{tecnico.apellido_tecnico}}</ion-select-option>\\r\\n              </ion-select>\\r\\n          </ion-item>\\r\\n      </div>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <!-- <ion-item>\\r\\n      <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar técnico a cargo</ion-label>\\r\\n      <ion-select [(ngModel)]=\\\"tecnico_elegido\\\">\\r\\n          <ion-select-option *ngFor=\\\"let tecnico of listado_tecnicos\\\" value=\\\"{{tecnico.id_tecnico}}\\\">{{tecnico.nombre_tecnico}} {{tecnico.apellido_tecnico}}</ion-select-option>\\r\\n      </ion-select>\\r\\n  </ion-item> -->\\r\\n\\r\\n  <ion-item>\\r\\n      <ion-label fixed style=\\\"text-align: center;\\\">Elegir una fecha</ion-label>\\r\\n      <ion-datetime [(ngModel)]=\\\"fecha_elegida\\\" [doneText]=\\\"'Listo'\\\"\\r\\n      [cancelText]=\\\"'Cancelar'\\\" [monthNames]=\\\"monthNames\\\" [dayNames]=\\\"dayNames\\\" displayFormat=\\\"DDDD D MMMM YYYY HH:mm\\\" min=\\\"{{fecha_actual}}\\\" max=\\\"2022\\\" value=\\\"{{fecha_actual}}\\\"></ion-datetime>\\r\\n  </ion-item>\\r\\n\\r\\n  <div style=\\\"width: 100%; text-align: center;\\\">\\r\\n      <ion-button (click)=\\\"programarVisita()\\\">Modificar</ion-button>\\r\\n  </div>\\r\\n\\r\\n      \\r\\n  <div style=\\\"margin-top: 25px\\\">\\r\\n      <img class=\\\"imagen_empresa\\\" src='../../../assets/LogoCPA-01.png'>\\r\\n  </div>\\r\\n\\r\\n</ion-content>\\r\\n\";","export default \"<ion-header>\\r\\n  <ion-toolbar style=\\\"text-align: center;\\\" color=\\\"primary\\\">\\r\\n    <ion-title>visita</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"close()\\\">\\r\\n        <ion-icon name=\\\"close-outline\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n  <div *ngIf=\\\"!visita\\\" style=\\\"text-align: center;\\\">\\r\\n    <ion-spinner></ion-spinner>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"visita\\\">\\r\\n    <div *ngIf=\\\"visita.visitas.horario_salida != 'NULL'\\\">\\r\\n      <ion-item lines=\\\"full\\\">\\r\\n        <ion-label *ngIf=\\\"validDate\\\"><b>Fecha de concluida la visita:</b> {{visita.visitas.horario_salida | date: 'dd/MM/yyyy hh:mm a'}}</ion-label>\\r\\n        <ion-label *ngIf=\\\"!validDate\\\"><b>Fecha de concluida la visita:</b> {{visita.visitas.horario_salida}}</ion-label>\\r\\n      </ion-item>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"visita.visitas.horario_salida == 'NULL'\\\">\\r\\n      <ion-item>\\r\\n        <ion-label><b>Fecha estimada de la visita:</b> {{visita.visitas.fecha_visita | date: 'dd/MM/yyyy hh:mm'}}</ion-label>\\r\\n      </ion-item>\\r\\n    </div>\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-label><b>Cliente:</b> {{visita.visitas.razon_social_cliente}}</ion-label>\\r\\n    </ion-item>\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-label><b>Sucursal:</b> {{visita.visitas.razon_social_sucursal}}</ion-label>\\r\\n    </ion-item>\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-label><b>Servicios ofrecidos:</b>\\r\\n        <div *ngFor=\\\"let servicio of visita.servicios2; let i = index\\\" style=\\\"margin-left:10px; margin-top: 10px\\\">\\r\\n          <div style=\\\"cursor: pointer;\\\" *ngIf=\\\"visita.visitas.estado_visitas == 'finalizada'\\\" (click)=\\\"editarServicio(servicio.id_servicio, servicio.id_formulario)\\\">\\r\\n            <ion-icon name=\\\"document-outline\\\" color=\\\"primary\\\"></ion-icon>\\r\\n            {{servicio.nombre_servicio}}{{\\\" - \\\" + servicio?.tecnicos}}\\r\\n            <ion-icon name=\\\"create-outline\\\" style=\\\"cursor: pointer;\\\" *ngIf=\\\"visita.visitas.estado_visitas == 'finalizada'\\\" ></ion-icon>  \\r\\n          </div>\\r\\n          <div *ngIf=\\\"visita.visitas.estado_visitas != 'finalizada'\\\">\\r\\n            <ion-icon name=\\\"document-outline\\\" color=\\\"primary\\\"></ion-icon>\\r\\n            {{servicio.nombre_servicio}}{{\\\" - \\\" + servicio?.tecnicos}}\\r\\n            <ion-icon name=\\\"create-outline\\\" style=\\\"cursor: pointer;\\\" *ngIf=\\\"visita.visitas.estado_visitas == 'finalizada'\\\" ></ion-icon>  \\r\\n          </div>\\r\\n        </div>\\r\\n      </ion-label>\\r\\n    </ion-item>\\r\\n    <div *ngIf=\\\"(visita.visitas.horario_salida != 'NULL') && (visita.visitas.estado_visitas != 'en proceso')\\\">\\r\\n      <div *ngIf=\\\"!pdf_generado && visita.visitas.pdfGenerado == 0\\\">\\r\\n        <ion-button expand=\\\"full\\\" (click)=\\\"generar_pdf()\\\">Generar PDF</ion-button>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"pdf_generado || visita.visitas.pdfGenerado == 1\\\">\\r\\n        <ion-button expand=\\\"full\\\" (click)=\\\"ver_pdf()\\\" color=\\\"success\\\">Ver PDF</ion-button>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"pdf_generado || visita.visitas.pdfGenerado == 1\\\">\\r\\n        <ion-button expand=\\\"full\\\" (click)=\\\"generar_pdf()\\\">Volver a generar PDF</ion-button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"visita.visitas.horario_salida == 'NULL'\\\">\\r\\n      <ion-button expand=\\\"full\\\" (click)=\\\"modificar_visita()\\\">Modificar visita</ion-button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div>\\r\\n    <img class=\\\"imagen_empresa\\\" src='../../../assets/LogoCPA-01.png'>\\r\\n  </div>\\r\\n\\r\\n\\r\\n</ion-content>\\r\\n\\r\\n\\r\\n\";","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http'\r\nimport { HttpClientModule } from '@angular/common/http'\r\nimport {version} from '../../../../environments/version'\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ApiClientesService {\r\n  private requestOptions\r\n  headers : any\r\n\r\n  private apiDir = \"http://157.230.90.222:3000\";\r\n\r\n\r\n  constructor(public http: HttpClient) {\r\n    this.requestOptions = {\r\n      headers : new HttpHeaders({\r\n        'Content-Type': 'application/json',\r\n        'version': version\r\n      })\r\n    };\r\n   }\r\n   \r\n  listado_clientes(){\r\n    return this.http.get(this.apiDir+'/clientes',this.requestOptions);\r\n  }\r\n\r\n  informacion_cliente(id){\r\n    return this.http.get(this.apiDir+'/clientes/id/'+id,this.requestOptions);\r\n  }\r\n\r\n  alta_sucursal(datos){\r\n    return this.http.post(this.apiDir+'/sucursales/crear',datos,this.requestOptions);\r\n  }\r\n\r\n  informacion_sucursal(id){\r\n    return this.http.get(this.apiDir+'/sucursales/id/'+id,this.requestOptions);\r\n  }\r\n\r\n  async informacion_visita(id){\r\n    var data = await this.http.get(this.apiDir+'/visitas/id/'+id,this.requestOptions);\r\n    console.log(this.apiDir+'/visitas/id/'+id,this.requestOptions)\r\n    return data.toPromise()\r\n  }\r\n\r\n  listado_workstations(id){\r\n    return this.http.get(this.apiDir+'/servicios/equipos/sucursal/'+id,this.requestOptions);\r\n  }\r\n  listado_grupoWorkstations(id){\r\n    return this.http.get(this.apiDir+'/servicios/gruposEquipos/sucursal/'+id,this.requestOptions);\r\n  }\r\n\r\n  borrar_equipo(id_equipo){\r\n    return this.http.post(this.apiDir+'/servicios/eliminarEquipos/'+id_equipo,null,this.requestOptions);\r\n  }\r\n\r\n  listado_productosServicio(id_servicio){\r\n    return this.http.get(this.apiDir+'/productos/idServicio/'+id_servicio,this.requestOptions);\r\n  }\r\n\r\n  cambiar_estado_visita(id_visita, estado){\r\n    console.log(this.apiDir+'/visitas/cambiarEstado',this.requestOptions);\r\n    var params = {id_visita:id_visita, estado:estado}\r\n    return new Promise((resolve, reject) => {\r\n      this.http.post(this.apiDir+'/visitas/cambiarEstado', params, this.requestOptions)       \r\n      .subscribe(response => {\r\n        resolve(response);\r\n      }, (error) => {\r\n        reject(error);\r\n      });\r\n    });\r\n    \r\n  }\r\n\r\n  eliminar_Grupo_workstation(id_producto){\r\n    console.log('delete2',id_producto)\r\n    return this.http.post(this.apiDir+'/servicios/eliminarGrupoEquipos/'+id_producto,this.requestOptions);\r\n  }\r\n\r\n  subir_planos(parametros){\r\n    return this.http.post(this.apiDir+'/planos/crear', parametros, this.requestOptions)\r\n  }\r\n\r\n  upload(params,bodyP = {}){\r\n    return new Promise((resolve, reject) => {\r\n      this.http.post(this.apiDir + params,bodyP)\r\n      // this.http.post(this.url + params, bodyP,{headers: header})\r\n        .subscribe(response => {\r\n          resolve(response);\r\n        }, (error) => {\r\n          reject(error);\r\n        });\r\n    });\r\n  }\r\n\r\n  ver_sucursal(id_sucursal){\r\n    return this.http.get(this.apiDir+'/sucursales/id/'+id_sucursal,this.requestOptions)\r\n  }\r\n\r\n  crear_pdf(id_visita){\r\n    return this.http.post(this.apiDir+'/pdf/create-pdf',id_visita,this.requestOptions);\r\n  }\r\n\r\n  ver_pdf(id_visita){\r\n    return this.http.get(this.apiDir+'/pdf/fetch-pdf/'+id_visita,this.requestOptions);\r\n  }\r\n\r\n  modificar_cliente(parametros){\r\n    return this.http.post(this.apiDir+'/clientes/actualizar',parametros,this.requestOptions)\r\n  }\r\n\r\n  subir_logo_cliente(parametros){\r\n    return this.http.post(this.apiDir+'/clientes/actualizarLogo', parametros, this.requestOptions);\r\n  }\r\n  eliminar_Logo_Cliente(parametros){\r\n    return this.http.post(this.apiDir+'/clientes/eliminarLogo', parametros, this.requestOptions);\r\n  }\r\n  eliminar_cliente(id_cliente){\r\n    return this.http.post(this.apiDir+'/clientes/eliminar/'+id_cliente,this.requestOptions)\r\n  }\r\n\r\n  eliminar_sucursal(id_sucursal){\r\n    return this.http.post(this.apiDir+'/sucursales/eliminar/'+id_sucursal,this.requestOptions)\r\n  }\r\n\r\n  eliminar_plano(id_plano){\r\n    return this.http.post(this.apiDir+'/planos/eliminar/'+id_plano,this.requestOptions)\r\n  }\r\n\r\n  modificar_sucursal(parametros){\r\n    return this.http.post(this.apiDir+'/sucursales/actualizar',parametros,this.requestOptions)\r\n  }\r\n\r\n  estadisticas(parametros){\r\n    return this.http.post(this.apiDir+'/clientes/estadisticas/',parametros,this.requestOptions);\r\n  }\r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2luYXMvYWRtaW5pc3RyYXItY2xpZW50ZXMvdmVyLWNsaWVudGUvbW9kaWZpY2FyLXZpc2l0YS9tb2RpZmljYXItdmlzaXRhLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { NavParams, ModalController } from '@ionic/angular';\r\nimport { ApiClientesService } from '../../servicios/api-clientes.service'\r\nimport { ApiVisitasService } from '../../../programar-visita/servicios/api-visitas.service'\r\nimport { ServicioTecnicosService } from '../../../administrar-tecnicos/servicios/servicio-tecnicos.service'\r\nimport * as moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'app-modificar-visita',\r\n  templateUrl: './modificar-visita.page.html',\r\n  styleUrls: ['./modificar-visita.page.scss'],\r\n})\r\nexport class ModificarVisitaPage implements OnInit {\r\n\r\n  public equipos;\r\n  public serviciosConEquipos = [];\r\n  public serviciosElegidos = [];\r\n  public serviciosParaEnviar = [];\r\n  public grupoWorkStation = []\r\n  public grupoWorkStationElegidos = []\r\n  public show = false\r\n  public id_visita = this.navParams.get('id_visita');\r\n  visita;\r\n  servicios_elegidosAux: string[] = [];\r\n  id_cliente_elegido: any = null;\r\n  sucursal_elegida: any = null;\r\n  fecha_elegida: any;\r\n  tecnico_elegido: any;\r\n\r\n  listado_clientes: any;\r\n  listado_sucursales_cliente: any;\r\n  listado_servicios: any;\r\n  listado_tecnicos: any;\r\n\r\n  fecha_actual: any;\r\n  dayNames= ['Domingo','Lunes','Martes','Miercoles','Jueves','Viernes','Sabado']\r\n  monthNames = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre']\r\n\r\n  constructor(private api: ApiVisitasService, private api_tecnicos: ServicioTecnicosService, private api_clientes:ApiClientesService, public navParams: NavParams, private ModalController: ModalController, private api_visitas: ApiVisitasService) { \r\n   \r\n  }\r\n\r\n\r\n  async ngOnInit() {\r\n    await this.api.mostrar_servicios().subscribe((data) =>{\r\n      this.listado_servicios = data;\r\n      this.listado_servicios = this.listado_servicios.result;\r\n      console.log(this.listado_servicios,'servicios')\r\n      this.actualizar_informacion().then(id =>{\r\n        console.warn(this.sucursal_elegida)\r\n        this.api.listado_equipos(this.sucursal_elegida).subscribe((res:any)=>{  \r\n          this.equipos = res.result;  \r\n          console.log(this.equipos,'equipos')  \r\n          for ( let servicio of this.listado_servicios){  \r\n            servicio.equipos = [];\r\n            for ( let equipo of this.equipos){  \r\n              if(equipo.id_servicio == servicio.id_servicio){  \r\n                servicio.equipos.push(equipo);\r\n              }\r\n            }  \r\n            if (servicio.equipos.length < 1){  \r\n              servicio.equipos.push({id_equipo: 0, id_servicio:servicio.id_servicio, nombre_equipo: 'Servicio principal'});\r\n            }  \r\n          }\r\n          console.log(this.listado_servicios,'servicios completos');  \r\n        })\r\n      })\r\n    }), (error => {\r\n      console.log(error)\r\n    }); \r\n   \r\n\r\n    this.api_tecnicos.listado_tecnicos().subscribe(data => {\r\n      this.listado_tecnicos = data;\r\n      this.listado_tecnicos = this.listado_tecnicos.result;\r\n      console.log(this.listado_tecnicos)\r\n    }, (error => {\r\n      console.log(error)\r\n    }))\r\n\r\n    this.fecha_actual = moment().format();\r\n\r\n  }\r\n\r\n  async actualizar_informacion(){\r\n    await this.api_clientes.informacion_visita(this.id_visita).then((data) => {\r\n      this.visita = data;\r\n      this.visita = this.visita.result;\r\n      this.id_cliente_elegido = this.visita.visitas.id_cliente\r\n      this.sucursal_elegida = this.visita.visitas.id_sucursal\r\n      this.sucursalesCliente(this.id_cliente_elegido)\r\n      // console.log('IDS:  ',this.visita, this.sucursal_elegida)\r\n      return this.visita.visitas.id_sucursal\r\n    }), (error => {\r\n      console.log(error)\r\n    })\r\n  }\r\n\r\n  sucursalesCliente(id_cliente){\r\n    this.api.informacion_cliente(id_cliente).subscribe(data => {\r\n      this.listado_sucursales_cliente = data\r\n      console.log(data)\r\n      this.listado_sucursales_cliente = this.listado_sucursales_cliente.result.sucursales.datosSucursal\r\n      // this.sucursal_elegida = null;\r\n      this.id_cliente_elegido = id_cliente;\r\n      this.selectSucursal()\r\n      console.log(this.listado_sucursales_cliente)\r\n    }), (error => {\r\n      console.log(error)\r\n    })\r\n  }\r\n\r\n  selectSucursal(){\r\n    this.api.listado_grupoWorkstations(this.sucursal_elegida).subscribe((data:any) =>{\r\n      // console.log('Grupo1', data.result)\r\n      var flag = 0\r\n      var array = []\r\n      var i = 0\r\n      var first = true\r\n      data.result.forEach((element) => {\r\n        if(element.id_equipo_grupo == flag){\r\n          // console.log(element.id_equipo_grupo, ' ' ,flag)\r\n          array[i].equipos.push({id_equipo: element.id_equipo, id_servicio:element.id_servicio,id_sucursal:element.id_sucursal, nombre_equipo:element.nombre_equipo,codigo_qr_equipo:element.codigo_qr_equipo,estado_servicio:element.estado_servicio,nombre_servicio:element.nombre_servicio, qr:element.qr})\r\n        }else{\r\n          if(!first){\r\n            i++\r\n          }\r\n          flag = element.id_equipo_grupo\r\n          array.push({nombre_equipo_grupo:element.nombre_equipo_grupo,id_equipo_grupo:element.id_equipo_grupo,equipos:[]})\r\n          array[i].equipos.push({id_equipo: element.id_equipo, id_servicio:element.id_servicio,id_sucursal:element.id_sucursal, nombre_equipo:element.nombre_equipo,codigo_qr_equipo:element.codigo_qr_equipo,estado_servicio:element.estado_servicio,nombre_servicio:element.nombre_servicio,qr:element.qr})\r\n          first = false\r\n        }\r\n      });\r\n      this.grupoWorkStation = array\r\n      // console.log('grupo2: ', this.grupoWorkStation)\r\n    })\r\n  }\r\n\r\n  programarVisita(){\r\n    for(let servicio of this.serviciosElegidos){\r\n      for(let equipo of servicio.equipos){\r\n        this.serviciosParaEnviar.push({id_servicio: servicio.id_servicio, id_tecnico: equipo.tecnico, id_equipo: equipo.id_equipo})\r\n      }\r\n    }\r\n    for(let workstation of this.grupoWorkStationElegidos){\r\n      for(let equipo of workstation.equipos){\r\n        this.serviciosParaEnviar.push({id_servicio: equipo.id_servicio, id_tecnico: workstation.tecnico, id_equipo: equipo.id_equipo})\r\n      }\r\n    }\r\n    console.log(this.serviciosParaEnviar);\r\n\r\n    this.api_visitas.modificar_visita({'id_cliente': this.id_cliente_elegido,\r\n    'id_sucursal': this.sucursal_elegida,\r\n    'servicios': this.serviciosParaEnviar,\r\n    'fecha_visita': this.fecha_elegida,\r\n    'id':this.visita.visitas.id_visita\r\n  }).subscribe(data => {\r\n      console.log(data)\r\n      location.reload();\r\n    }), (error =>{\r\n      console.log(error)\r\n    })\r\n    // this.api.crear_visita({'id_cliente': this.id_cliente_elegido,\r\n    //                       'id_sucursal': this.sucursal_elegida,\r\n    //                       'servicios': this.serviciosParaEnviar,\r\n    //                       'fecha_visita': this.fecha_elegida}).subscribe(data => {\r\n    //                           console.log(data)\r\n    //                           location.reload();\r\n    //                        }), (error =>{\r\n    //                          console.log(error)\r\n    //                        })\r\n  }\r\n\r\n  serviciosElegidosChange(){\r\n    this.serviciosElegidos = [];\r\n    for (let servicioID of this.servicios_elegidosAux){\r\n      for(let servicio of this.listado_servicios){\r\n        if(servicio.id_servicio == servicioID && servicio.qr == 0){\r\n          this.serviciosElegidos.push(servicio);\r\n        }\r\n      }\r\n    }\r\n    var arrayWorkstation:any = [{nombre_equipo_grupo:null, id_equipo_grupo:null, tecnico: null ,equipos:[]}]\r\n    var i = 0\r\n    var first = true\r\n    console.log(this.servicios_elegidosAux)\r\n    this.grupoWorkStation.forEach((workstation:any) =>{\r\n      workstation.equipos.forEach((servicio) => {\r\n        var val = servicio.id_servicio.toString()\r\n        if(this.servicios_elegidosAux.includes(val)){\r\n          if(this.checkExist(arrayWorkstation,workstation.nombre_equipo_grupo) || arrayWorkstation[0].nombre_equipo_grupo == null){\r\n              if(!first){\r\n                console.log('1')\r\n                i = i + 1\r\n                first = false\r\n                arrayWorkstation.push({nombre_equipo_grupo:workstation.nombre_equipo_grupo, id_equipo_grupo:workstation.id_equipo_grupo, tecnico: null ,equipos:[servicio]})\r\n              }else{\r\n                first = false\r\n                // console.log('2')\r\n                arrayWorkstation = [{nombre_equipo_grupo:workstation.nombre_equipo_grupo, id_equipo_grupo:workstation.id_equipo_grupo, tecnico: null ,equipos:[servicio]}]  \r\n              }\r\n          }else{\r\n            console.log('3')\r\n            arrayWorkstation[i].equipos.push(servicio)\r\n          }\r\n        }\r\n      });\r\n    })\r\n    this.grupoWorkStationElegidos = arrayWorkstation\r\n    this.show = true\r\n    if(this.grupoWorkStationElegidos[0].nombre_equipo_grupo == null){\r\n      this.show = false\r\n    }\r\n    console.log('Servicio elegidos: ',arrayWorkstation)\r\n  }\r\n\r\n  checkExist(array,nombre_equipo_grupo){\r\n    var resp = []\r\n    resp = array.find(resp =>\r\n      (resp.nombre_equipo_grupo == nombre_equipo_grupo)\r\n    )\r\n    if(resp == undefined){\r\n      return true\r\n    }else{\r\n      return false\r\n    }\r\n  }\r\n\r\n  close(){\r\n    this.ModalController.dismiss()\r\n  }\r\n\r\n  \r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2luYXMvYWRtaW5pc3RyYXItY2xpZW50ZXMvdmVyLWNsaWVudGUvdmVyLXZpc2l0YS92ZXItdmlzaXRhLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { NavParams, ModalController, LoadingController } from '@ionic/angular';\r\nimport { EditarVisitaComponent } from 'src/app/modals/editar-visita/editar-visita.component';\r\nimport { VerServicioVisitaComponent } from 'src/app/modals/ver-servicio-visita/ver-servicio-visita.component';\r\nimport { ApiClientesService } from '../../servicios/api-clientes.service'\r\nimport { ModificarVisitaPage } from '../modificar-visita/modificar-visita.page'\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-ver-visita',\r\n  templateUrl: './ver-visita.page.html',\r\n  styleUrls: ['./ver-visita.page.scss'],\r\n})\r\nexport class VerVisitaPage implements OnInit {\r\n\r\n  public id_visita = this.navParams.get('id_visita');\r\n  public visita: any;\r\n  public url;\r\n  public pdf_generado:boolean = false;\r\n  public validDate = true;\r\n\r\n  constructor(private navParams: NavParams, private api_visitas: ApiClientesService, private modalController: ModalController, public loadingController: LoadingController) { }\r\n\r\n  \r\n\r\n  ngOnInit() {\r\n    this.actualizar_informacion()\r\n  }\r\n\r\n  async generar_pdf(){\r\n    var loader = await this.loadingController.create({ message: \"Generando PDF\" });\r\n     loader.present();\r\n\r\n    console.log(this.id_visita)\r\n    this.api_visitas.crear_pdf({id_visita:this.id_visita}).subscribe(data => {\r\n      console.log(data)\r\n      this.pdf_generado = true;\r\n      loader.dismiss()\r\n    }, error => {\r\n      console.log(error)\r\n      loader.dismiss()\r\n    })\r\n  }\r\n\r\n  ver_pdf(){\r\n    this.api_visitas.ver_pdf(this.id_visita).subscribe(data => {\r\n      this.url = data;\r\n      console.log(this.url.url)\r\n      var win = window.open(this.url.url, '_blank');\r\n      win.focus();  \r\n    }, error => {\r\n      console.log(error)\r\n    })\r\n  }\r\n\r\n  close(){\r\n    this.modalController.dismiss()\r\n  }\r\n\r\n  actualizar_informacion(){\r\n    this.api_visitas.informacion_visita(this.id_visita).then(data => {\r\n      this.visita = data;\r\n      this.visita = this.visita.result;\r\n      if (new Date (this.visita.visitas.horario_salida).valueOf()) {\r\n        this.visita.visitas.horario_salida = new Date (this.visita.visitas.horario_salida)\r\n      }else{\r\n        this.validDate = false;\r\n      }\r\n      console.log(this.visita)\r\n      if (this.visita) {\r\n        this.visita.servicios2 = [];\r\n        for(let servicio of this.visita.servicios){\r\n          if(!this.visita?.servicios2.find(servicioAux => servicioAux.nombre_servicio == servicio.nombre_servicio)){\r\n            if (servicio.id_servicio == 22 || servicio.id_servicio == 20){\r\n              this.visita.servicios2.push({nombre_servicio: servicio.nombre_servicio, id_servicio:servicio.id_servicio, id_formulario:null});\r\n            }else{\r\n              this.visita.servicios2.push(servicio); \r\n            }\r\n          }\r\n        }\r\n        var aux = []\r\n        var aux2 = []\r\n        for (let index = 0; index < this.visita.servicios.length; index++) {\r\n          const element = this.visita.servicios[index];\r\n          if (!aux.some(servicio => servicio.id_servicio == element.id_servicio)) {\r\n            aux.push(element)\r\n          }\r\n        }\r\n        for (let index = 0; index < aux.length; index++) {\r\n          const element = aux[index];\r\n          aux[index].tecnicos = [];\r\n          aux[index] = this.visita.servicios.filter(servicio => servicio.id_servicio == element.id_servicio)\r\n          console.log(element)\r\n        }\r\n        for (let index = 0; index < this.visita.servicios.length; index++) {\r\n          const element = this.visita.servicios[index];\r\n          if (!aux2.some(servicio => servicio.tecnico?.id_tecnico == element.tecnico?.id_tecnico)) {\r\n            aux2.push(element.tecnico)\r\n          }\r\n        }\r\n        for (let index = 0; index < aux2.length; index++) {\r\n          const element = aux2[index];\r\n          for (let index2 = 0; index2 < aux.length; index2++) {\r\n            const element2 = aux[index2];\r\n            if ((element2.find(servicio => servicio.tecnico == element) && (!element2[0].tecnicos.some(tecnico => tecnico.id_tecnico == element.id_tecnico)))){\r\n              aux[index2][0].tecnicos.push(element)\r\n            }\r\n          }\r\n        }\r\n        for (let index = 0; index < this.visita.servicios2.length; index++) {\r\n          const element = this.visita.servicios2[index];\r\n          var nombreTecnico = \"\";\r\n          for (let tecnico of aux[index][0].tecnicos) {\r\n            if (nombreTecnico){\r\n              nombreTecnico = nombreTecnico + \", \" +tecnico.nombre_tecnico + \" \" + tecnico.apellido_tecnico;\r\n            }else{\r\n              nombreTecnico = tecnico.nombre_tecnico + \" \" + tecnico.apellido_tecnico;\r\n            }\r\n          }\r\n          element.tecnicos  = nombreTecnico\r\n        }    \r\n      }\r\n    }), (error => {\r\n      console.log(error)\r\n    })\r\n  }\r\n\r\n  async modificar_visita(){\r\n    const modal = await this.modalController.create({\r\n      component: ModificarVisitaPage,\r\n      cssClass: 'my-custom-class',\r\n      componentProps: {\r\n        'id_visita': this.id_visita\r\n      }\r\n    });\r\n    modal.onDidDismiss().then(data =>{\r\n      this.actualizar_informacion();\r\n    })\r\n    return await modal.present();\r\n  }\r\n\r\n  async editarServicio(id_servicio, id_formulario) {\r\n    if (id_formulario) {\r\n      const modal = await this.modalController.create({\r\n        component: EditarVisitaComponent,\r\n        componentProps: { id_servicio: id_servicio, id_visita:this.id_visita, id_formulario: id_formulario }\r\n        });\r\n      \r\n        await modal.present();\r\n    }else{ \r\n      const modal = await this.modalController.create({\r\n      component: VerServicioVisitaComponent,\r\n      componentProps: { id_servicio: id_servicio, visita:this.visita}\r\n      });\r\n      \r\n      await modal.present();\r\n    }\r\n    \r\n  \r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}