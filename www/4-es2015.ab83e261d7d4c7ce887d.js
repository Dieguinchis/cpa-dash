(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{jCJ1:function(i,t,e){"use strict";e.d(t,"a",(function(){return c}));var o=e("mrSG"),n=e("tk/3"),s=e("octk"),r=e("AytR"),l=e("fXoL");let c=(()=>{class i{constructor(i){this.http=i,this.apiDir=r.a.api.base_url+"",this.requestOptions={headers:new n.c({"Content-Type":"application/json",version:s.a})}}listado_clientes(){return console.log(this.apiDir),this.http.get(this.apiDir+"/clientes",this.requestOptions)}informacion_cliente(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/clientes/id/"+i,this.requestOptions)}verificarVisit(i){return console.log(this.apiDir+"/visitas/verificarVisita",{id:i},this.requestOptions),new Promise((t,e)=>{this.http.post(this.apiDir+"/visitas/verificarVisita",{id:i},this.requestOptions).subscribe(i=>{t(i)},i=>{e(i)})})}alta_sucursal(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/sucursales/crear",i,this.requestOptions)}informacion_sucursal(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/sucursales/id/"+i,this.requestOptions)}informacion_visita(i){return Object(o.a)(this,void 0,void 0,(function*(){console.log(this.apiDir);var t=yield this.http.get(this.apiDir+"/visitas/id/"+i,this.requestOptions);return console.log(this.apiDir+"/visitas/id/"+i,this.requestOptions),t.toPromise()}))}listado_workstations(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/servicios/equipos/sucursal/"+i,this.requestOptions)}listado_grupoWorkstations(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/servicios/gruposEquipos/sucursal/"+i,this.requestOptions)}borrar_equipo(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/eliminarEquipos/"+i,null,this.requestOptions)}listado_productosServicio(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/productos/idServicio/"+i,this.requestOptions)}cambiar_estado_visita(i,t){console.log(this.apiDir+"/visitas/cambiarEstado",this.requestOptions);var e={id_visita:i,estado:t};return new Promise((i,t)=>{this.http.post(this.apiDir+"/visitas/cambiarEstado",e,this.requestOptions).subscribe(t=>{i(t)},i=>{t(i)})})}eliminar_Grupo_workstation(i){return console.log("delete2",i),console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/eliminarGrupoEquipos/"+i,this.requestOptions)}subir_planos(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/planos/crear",i,this.requestOptions)}upload(i,t={}){return console.log(this.apiDir),new Promise((e,o)=>{this.http.post(this.apiDir+i,t).subscribe(i=>{e(i)},i=>{o(i)})})}ver_sucursal(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/sucursales/id/"+i,this.requestOptions)}crear_pdf(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/pdf/create-pdf",i,this.requestOptions)}ver_pdf(i){return console.log(this.apiDir),this.http.get(this.apiDir+"/pdf/fetch-pdf/"+i,this.requestOptions)}modificar_cliente(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/clientes/actualizar",i,this.requestOptions)}subir_logo_cliente(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/clientes/actualizarLogo",i,this.requestOptions)}eliminar_Logo_Cliente(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/clientes/eliminarLogo",i,this.requestOptions)}eliminar_cliente(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/clientes/eliminar/"+i,this.requestOptions)}eliminar_sucursal(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/sucursales/eliminar/"+i,this.requestOptions)}eliminar_plano(i){return this.http.post(this.apiDir+"/planos/eliminar/"+i,this.requestOptions)}modificar_sucursal(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/sucursales/actualizar",i,this.requestOptions)}estadisticas(i){return console.log(this.apiDir),this.http.post(this.apiDir+"/clientes/estadisticas/",i,this.requestOptions)}}return i.\u0275fac=function(t){return new(t||i)(l.Sb(n.a))},i.\u0275prov=l.Fb({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},ksL3:function(i,t,e){"use strict";e.r(t),e.d(t,"AdministrarClientesPageModule",(function(){return g}));var o=e("ofXK"),n=e("3Pt+"),s=e("TEn/"),r=e("tyNb"),l=e("mrSG"),c=e("mhZR"),a=e("fXoL"),h=e("jCJ1");function b(i,t){if(1&i){const i=a.Pb();a.Ob(0,"div"),a.Ob(1,"ion-item",8),a.Ob(2,"ion-col",4),a.Ob(3,"ion-label"),a.kc(4),a.Nb(),a.Nb(),a.Ob(5,"ion-col",5),a.Ob(6,"ion-label"),a.kc(7),a.Nb(),a.Nb(),a.Ob(8,"ion-col",4),a.Ob(9,"ion-label"),a.kc(10),a.Nb(),a.Nb(),a.Ob(11,"ion-col",4),a.Ob(12,"ion-label"),a.kc(13),a.Nb(),a.Nb(),a.Ob(14,"ion-col",9),a.Ob(15,"ion-icon",10),a.Wb("click",(function(){a.gc(i);const e=t.$implicit;return a.Yb(2).modificar_cliente(e.id_cliente)})),a.Nb(),a.Ob(16,"ion-icon",11),a.Wb("click",(function(){a.gc(i);const e=t.$implicit;return a.Yb(2).baja_cliente(e.id_cliente)})),a.Nb(),a.Kb(17,"ion-icon",12),a.Nb(),a.Nb(),a.Nb()}if(2&i){const i=t.$implicit;a.zb(4),a.mc(" ",i.razon_social_cliente," "),a.zb(3),a.mc(" ",i.telefono," "),a.zb(3),a.mc(" ",i.email," "),a.zb(3),a.mc(" ",i.direccion," "),a.zb(4),a.dc("routerLink","/menu-principal/ver-cliente/"+i.id_cliente)}}function u(i,t){if(1&i&&(a.Ob(0,"div"),a.jc(1,b,18,5,"div",7),a.Nb()),2&i){const i=a.Yb();a.zb(1),a.dc("ngForOf",i.clientes)}}const p=[{path:"",component:(()=>{class i{constructor(i,t,e){this.api_clientes=i,this.alertController=t,this.modalController=e}ngOnInit(){this.actualizar_informacion()}baja_cliente(i){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"Seguro que desea eliminar el cliente?",buttons:[{text:"No",handler:()=>{}},{text:"Si",handler:()=>{this.eliminar_cliente(i)}}]});yield t.present()}))}eliminar_cliente(i){this.api_clientes.eliminar_cliente(i).subscribe(i=>{this.actualizar_informacion()})}actualizar_informacion(){this.api_clientes.listado_clientes().subscribe(i=>{this.clientes=i,this.clientes=this.clientes.result,this.clientes.sort(this.ordenarClientes),this.temp=this.clientes})}ordenarClientes(i,t){return i.razon_social_cliente.toLowerCase()>t.razon_social_cliente.toLowerCase()?1:i.razon_social_cliente.toLowerCase()<t.razon_social_cliente.toLowerCase()?-1:0}modificar_cliente(i){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:c.a,componentProps:{id_cliente:i}});return t.onDidDismiss().then(i=>{this.actualizar_informacion()}),yield t.present()}))}updateFilter(i){const t=i.target.value.toLowerCase(),e=this.temp.filter((function(i){var e,o,n,s;return(null===(e=i.razon_social_cliente)||void 0===e?void 0:e.toLowerCase().includes(t))||(null===(o=i.direccion)||void 0===o?void 0:o.toLowerCase().includes(t))||(null===(n=i.email)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(s=i.telefono)||void 0===s?void 0:s.toString().toLowerCase().includes(t))}));this.clientes=e}searchClear(){this.clientes=this.temp}}return i.\u0275fac=function(t){return new(t||i)(a.Jb(h.a),a.Jb(s.a),a.Jb(s.I))},i.\u0275cmp=a.Db({type:i,selectors:[["app-administrar-clientes"]],decls:26,vars:1,consts:[["animated","","placeholder","Razon Social || Telefono || Email || Direccion",3,"ionClear","keyup"],["lines","none"],[2,"text-align","center"],["lines","full",1,"titulos"],["size","3"],["size","2"],[4,"ngIf"],[4,"ngFor","ngForOf"],["lines","full"],["size","1"],["name","create-outline",2,"margin-right","15px",3,"click"],["name","trash-outline","color","danger",2,"margin-right","15px",3,"click"],["color","primary","name","enter-outline",3,"routerLink"]],template:function(i,t){1&i&&(a.Ob(0,"ion-content"),a.Ob(1,"ion-searchbar",0),a.Wb("ionClear",(function(){return t.searchClear()}))("keyup",(function(i){return t.updateFilter(i)})),a.Nb(),a.Ob(2,"ion-item",1),a.Ob(3,"ion-label",2),a.Ob(4,"b"),a.kc(5,"Clientes"),a.Nb(),a.Nb(),a.Nb(),a.Ob(6,"ion-item",3),a.Ob(7,"ion-grid"),a.Ob(8,"ion-row"),a.Ob(9,"ion-col",4),a.Ob(10,"ion-label"),a.Ob(11,"b"),a.kc(12,"Razon social"),a.Nb(),a.Nb(),a.Nb(),a.Ob(13,"ion-col",5),a.Ob(14,"ion-label"),a.Ob(15,"b"),a.kc(16,"Telefono"),a.Nb(),a.Nb(),a.Nb(),a.Ob(17,"ion-col",4),a.Ob(18,"ion-label"),a.Ob(19,"b"),a.kc(20,"Email"),a.Nb(),a.Nb(),a.Nb(),a.Ob(21,"ion-col",4),a.Ob(22,"ion-label"),a.Ob(23,"b"),a.kc(24,"Direccion"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.jc(25,u,2,1,"div",6),a.Nb()),2&i&&(a.zb(25),a.dc("ngIf",t.clientes))},directives:[s.k,s.x,s.P,s.t,s.u,s.p,s.w,s.j,o.j,o.i,s.r,s.N,r.g],styles:[".titulos[_ngcontent-%COMP%]{color:#838383}"]}),i})()},{path:"modificar-cliente",loadChildren:()=>e.e(20).then(e.bind(null,"jEl+")).then(i=>i.ModificarClientePageModule)}];let d=(()=>{class i{}return i.\u0275mod=a.Hb({type:i}),i.\u0275inj=a.Gb({factory:function(t){return new(t||i)},imports:[[r.h.forChild(p)],r.h]}),i})(),g=(()=>{class i{}return i.\u0275mod=a.Hb({type:i}),i.\u0275inj=a.Gb({factory:function(t){return new(t||i)},imports:[[o.b,n.a,s.G,d]]}),i})()},mhZR:function(i,t,e){"use strict";e.d(t,"a",(function(){return p}));var o=e("mrSG"),n=e("fXoL"),s=e("TEn/"),r=e("jCJ1"),l=e("X9o6"),c=e("ofXK"),a=e("3Pt+");function h(i,t){if(1&i){const i=n.Pb();n.Ob(0,"ion-icon",12),n.Wb("click",(function(){return n.gc(i),n.Yb(2).deleteLogo()})),n.Nb()}}function b(i,t){if(1&i){const i=n.Pb();n.Ob(0,"ion-button",9),n.Wb("click",(function(){return n.gc(i),n.Yb(2).agregarLogo()})),n.kc(1,"Seleccionar Logo"),n.Nb()}}function u(i,t){if(1&i){const i=n.Pb();n.Ob(0,"ion-content"),n.Ob(1,"ion-item",2),n.Ob(2,"ion-label",3),n.kc(3," Razon social: "),n.Nb(),n.Ob(4,"ion-input",4),n.Wb("ngModelChange",(function(t){return n.gc(i),n.Yb().razon_social=t})),n.Nb(),n.Nb(),n.Ob(5,"ion-item",2),n.Ob(6,"ion-label",3),n.kc(7," Telefono: (solo numeros) "),n.Nb(),n.Ob(8,"ion-input",4),n.Wb("ngModelChange",(function(t){return n.gc(i),n.Yb().telefono=t})),n.Nb(),n.Nb(),n.Ob(9,"ion-item",2),n.Ob(10,"ion-label",3),n.kc(11," Email: "),n.Nb(),n.Ob(12,"ion-input",4),n.Wb("ngModelChange",(function(t){return n.gc(i),n.Yb().email=t})),n.Nb(),n.Nb(),n.Ob(13,"ion-item",2),n.Ob(14,"ion-label",3),n.kc(15," Direccion: "),n.Nb(),n.Ob(16,"ion-input",4),n.Wb("ngModelChange",(function(t){return n.gc(i),n.Yb().direccion=t})),n.Nb(),n.Nb(),n.Ob(17,"ion-item",2),n.Kb(18,"img",5),n.jc(19,h,1,0,"ion-icon",6),n.jc(20,b,2,0,"ion-button",7),n.Nb(),n.Ob(21,"div",8),n.Ob(22,"ion-button",9),n.Wb("click",(function(){return n.gc(i),n.Yb().modificar_cliente()})),n.kc(23,"Modificar"),n.Nb(),n.Nb(),n.Ob(24,"div",10),n.Kb(25,"img",11),n.Nb(),n.Nb()}if(2&i){const i=n.Yb();n.zb(4),n.dc("ngModel",i.razon_social),n.zb(4),n.dc("ngModel",i.telefono),n.zb(4),n.dc("ngModel",i.email),n.zb(4),n.dc("ngModel",i.direccion),n.zb(2),n.dc("src",i.logo,n.hc),n.zb(1),n.dc("ngIf",!(null==i.logo||"NULL"==i.logo)),n.zb(1),n.dc("ngIf",null==i.logo||"NULL"==i.logo)}}let p=(()=>{class i{constructor(i,t,e,o,n){this.loadingController=i,this.api_clientes=t,this.navParams=e,this.modalCtrl=o,this.imageCompress=n,this.id_cliente=this.navParams.get("id_cliente")}ngOnInit(){this.api_clientes.informacion_cliente(this.id_cliente).subscribe(i=>{this.cliente=i,this.cliente=this.cliente.result,this.razon_social=this.cliente.clienteDatos[0].razon_social_cliente,this.email=this.cliente.clienteDatos[0].email,this.telefono=this.cliente.clienteDatos[0].telefono,this.direccion=this.cliente.clienteDatos[0].direccion,this.logo=this.cliente.clienteDatos[0].logo_cliente,console.log(this.cliente)})}modificar_cliente(){this.objeto={id_cliente:this.id_cliente,razon_social_cliente:this.razon_social,direccion:this.direccion,telefono:this.telefono,email:this.email},console.log(this.objeto),this.api_clientes.modificar_cliente(this.objeto).subscribe(i=>{this.logo?this.api_clientes.subir_logo_cliente({id_cliente:this.id_cliente,logo:this.logo}).subscribe(i=>{this.modalCtrl.dismiss({dismissed:!0})}):this.modalCtrl.dismiss({dismissed:!0})},i=>{console.log(i)})}agregarLogo(){return Object(o.a)(this,void 0,void 0,(function*(){this.imageCompress.uploadFile().then(({image:i,orientation:t})=>Object(o.a)(this,void 0,void 0,(function*(){const e=yield this.loadingController.create({message:"Subiendo img"});yield e.present(),console.warn("Size in bytes was:",this.imageCompress.byteCount(i)),this.imageCompress.compressFile(i,t,50,50).then(i=>{console.log(i),this.logo=i,this.api_clientes.subir_logo_cliente({id_cliente:this.id_cliente,logo:this.logo}).subscribe(i=>{this.loadingController.dismiss()})})})))}))}deleteLogo(){return Object(o.a)(this,void 0,void 0,(function*(){const i=yield this.loadingController.create({message:"Eliminando img"});yield i.present(),this.api_clientes.subir_logo_cliente({id_cliente:this.id_cliente,logo:null}).subscribe(i=>{this.ngOnInit(),this.loadingController.dismiss()})}))}}return i.\u0275fac=function(t){return new(t||i)(n.Jb(s.H),n.Jb(r.a),n.Jb(s.K),n.Jb(s.I),n.Jb(l.a))},i.\u0275cmp=n.Db({type:i,selectors:[["app-modificar-cliente"]],decls:5,vars:1,consts:[["color","primary",2,"text-align","center"],[4,"ngIf"],["lines","full"],[1,"titulos"],[3,"ngModel","ngModelChange"],["alt","",2,"width","50%","margin-left","25%","padding","5px",3,"src"],["name","trash-outline","color","danger","style","margin-top:15px",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],[2,"width","100%","text-align","center","margin-top","10px"],[3,"click"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"],["name","trash-outline","color","danger",2,"margin-top","15px",3,"click"]],template:function(i,t){1&i&&(n.Ob(0,"ion-header"),n.Ob(1,"ion-toolbar",0),n.Ob(2,"ion-title"),n.kc(3,"Modificar cliente"),n.Nb(),n.Nb(),n.Nb(),n.jc(4,u,26,7,"ion-content",1)),2&i&&(n.zb(4),n.dc("ngIf",t.cliente))},directives:[s.q,s.F,s.E,c.j,s.k,s.t,s.u,s.s,s.P,a.d,a.e,s.d,s.r],styles:[".titulos[_ngcontent-%COMP%]{color:#838383}"]}),i})()}}]);