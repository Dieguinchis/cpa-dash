(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{jCJ1:function(i,t,e){"use strict";e.d(t,"a",(function(){return c}));var n=e("mrSG"),o=e("tk/3"),s=e("octk"),r=e("fXoL");let c=(()=>{class i{constructor(i){this.http=i,this.apiDir="http://157.230.90.222:3001",this.requestOptions={headers:new o.c({"Content-Type":"application/json",version:s.a})}}listado_clientes(){return this.http.get(this.apiDir+"/clientes",this.requestOptions)}informacion_cliente(i){return this.http.get(this.apiDir+"/clientes/id/"+i,this.requestOptions)}alta_sucursal(i){return this.http.post(this.apiDir+"/sucursales/crear",i,this.requestOptions)}informacion_sucursal(i){return this.http.get(this.apiDir+"/sucursales/id/"+i,this.requestOptions)}informacion_visita(i){return Object(n.a)(this,void 0,void 0,(function*(){return(yield this.http.get(this.apiDir+"/visitas/id/"+i,this.requestOptions)).toPromise()}))}listado_workstations(i){return this.http.get(this.apiDir+"/servicios/equipos/sucursal/"+i,this.requestOptions)}listado_grupoWorkstations(i){return this.http.get(this.apiDir+"/servicios/gruposEquipos/sucursal/"+i,this.requestOptions)}borrar_equipo(i){return this.http.post(this.apiDir+"/servicios/eliminarEquipos/"+i,null,this.requestOptions)}listado_productosServicio(i){return this.http.get(this.apiDir+"/productos/idServicio/"+i,this.requestOptions)}cambiar_estado_visita(i,t){console.log(this.apiDir+"/visitas/cambiarEstado",this.requestOptions);var e={id_visita:i,estado:t};return new Promise((i,t)=>{this.http.post(this.apiDir+"/visitas/cambiarEstado",e,this.requestOptions).subscribe(t=>{i(t)},i=>{t(i)})})}eliminar_Grupo_workstation(i){return console.log("delete2",i),this.http.post(this.apiDir+"/servicios/eliminarGrupoEquipos/"+i,this.requestOptions)}subir_planos(i){return this.http.post(this.apiDir+"/planos/crear",i,this.requestOptions)}upload(i,t={}){return new Promise((e,n)=>{this.http.post(this.apiDir+i,t).subscribe(i=>{e(i)},i=>{n(i)})})}ver_sucursal(i){return this.http.get(this.apiDir+"/sucursales/id/"+i,this.requestOptions)}crear_pdf(i){return this.http.post(this.apiDir+"/pdf/create-pdf",i,this.requestOptions)}ver_pdf(i){return this.http.get(this.apiDir+"/pdf/fetch-pdf/"+i,this.requestOptions)}modificar_cliente(i){return this.http.post(this.apiDir+"/clientes/actualizar",i,this.requestOptions)}subir_logo_cliente(i){return this.http.post(this.apiDir+"/clientes/actualizarLogo",i,this.requestOptions)}eliminar_Logo_Cliente(i){return this.http.post(this.apiDir+"/clientes/eliminarLogo",i,this.requestOptions)}eliminar_cliente(i){return this.http.post(this.apiDir+"/clientes/eliminar/"+i,this.requestOptions)}eliminar_sucursal(i){return this.http.post(this.apiDir+"/sucursales/eliminar/"+i,this.requestOptions)}eliminar_plano(i){return this.http.post(this.apiDir+"/planos/eliminar/"+i,this.requestOptions)}modificar_sucursal(i){return this.http.post(this.apiDir+"/sucursales/actualizar",i,this.requestOptions)}}return i.\u0275fac=function(t){return new(t||i)(r.Sb(o.a))},i.\u0275prov=r.Fb({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},ksL3:function(i,t,e){"use strict";e.r(t),e.d(t,"AdministrarClientesPageModule",(function(){return m}));var n=e("ofXK"),o=e("3Pt+"),s=e("TEn/"),r=e("tyNb"),c=e("mrSG"),l=e("mhZR"),a=e("fXoL"),b=e("jCJ1");function u(i,t){if(1&i){const i=a.Pb();a.Ob(0,"div"),a.Ob(1,"ion-item",8),a.Ob(2,"ion-col",4),a.Ob(3,"ion-label"),a.kc(4),a.Nb(),a.Nb(),a.Ob(5,"ion-col",5),a.Ob(6,"ion-label"),a.kc(7),a.Nb(),a.Nb(),a.Ob(8,"ion-col",4),a.Ob(9,"ion-label"),a.kc(10),a.Nb(),a.Nb(),a.Ob(11,"ion-col",4),a.Ob(12,"ion-label"),a.kc(13),a.Nb(),a.Nb(),a.Ob(14,"ion-col",9),a.Ob(15,"ion-icon",10),a.Wb("click",(function(){a.gc(i);const e=t.$implicit;return a.Yb(2).modificar_cliente(e.id_cliente)})),a.Nb(),a.Ob(16,"ion-icon",11),a.Wb("click",(function(){a.gc(i);const e=t.$implicit;return a.Yb(2).baja_cliente(e.id_cliente)})),a.Nb(),a.Kb(17,"ion-icon",12),a.Nb(),a.Nb(),a.Nb()}if(2&i){const i=t.$implicit;a.zb(4),a.mc(" ",i.razon_social_cliente," "),a.zb(3),a.mc(" ",i.telefono," "),a.zb(3),a.mc(" ",i.email," "),a.zb(3),a.mc(" ",i.direccion," "),a.zb(4),a.dc("routerLink","/menu-principal/ver-cliente/"+i.id_cliente)}}function h(i,t){if(1&i&&(a.Ob(0,"div"),a.jc(1,u,18,5,"div",7),a.Nb()),2&i){const i=a.Yb();a.zb(1),a.dc("ngForOf",i.clientes)}}const p=[{path:"",component:(()=>{class i{constructor(i,t,e){this.api_clientes=i,this.alertController=t,this.modalController=e}ngOnInit(){this.actualizar_informacion()}baja_cliente(i){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"Seguro que desea eliminar el cliente?",buttons:[{text:"No",handler:()=>{}},{text:"Si",handler:()=>{this.eliminar_cliente(i)}}]});yield t.present()}))}eliminar_cliente(i){this.api_clientes.eliminar_cliente(i).subscribe(i=>{this.actualizar_informacion()})}actualizar_informacion(){this.api_clientes.listado_clientes().subscribe(i=>{this.clientes=i,this.clientes=this.clientes.result,this.clientes.sort(this.ordenarClientes),this.temp=this.clientes})}ordenarClientes(i,t){return i.razon_social_cliente.toLowerCase()>t.razon_social_cliente.toLowerCase()?1:i.razon_social_cliente.toLowerCase()<t.razon_social_cliente.toLowerCase()?-1:0}modificar_cliente(i){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:l.a,componentProps:{id_cliente:i}});return t.onDidDismiss().then(i=>{this.actualizar_informacion()}),yield t.present()}))}updateFilter(i){const t=i.target.value.toLowerCase(),e=this.temp.filter((function(i){var e,n,o,s;return(null===(e=i.razon_social_cliente)||void 0===e?void 0:e.toLowerCase().includes(t))||(null===(n=i.direccion)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(o=i.email)||void 0===o?void 0:o.toLowerCase().includes(t))||(null===(s=i.telefono)||void 0===s?void 0:s.toString().toLowerCase().includes(t))}));this.clientes=e}searchClear(){this.clientes=this.temp}}return i.\u0275fac=function(t){return new(t||i)(a.Jb(b.a),a.Jb(s.a),a.Jb(s.G))},i.\u0275cmp=a.Db({type:i,selectors:[["app-administrar-clientes"]],decls:26,vars:1,consts:[["animated","","placeholder","Razon Social || Telefono || Email || Direccion",3,"ionClear","keyup"],["lines","none"],[2,"text-align","center"],["lines","full",1,"titulos"],["size","3"],["size","2"],[4,"ngIf"],[4,"ngFor","ngForOf"],["lines","full"],["size","1"],["name","create-outline",2,"margin-right","15px",3,"click"],["name","trash-outline","color","danger",2,"margin-right","15px",3,"click"],["color","primary","name","enter-outline",3,"routerLink"]],template:function(i,t){1&i&&(a.Ob(0,"ion-content"),a.Ob(1,"ion-searchbar",0),a.Wb("ionClear",(function(){return t.searchClear()}))("keyup",(function(i){return t.updateFilter(i)})),a.Nb(),a.Ob(2,"ion-item",1),a.Ob(3,"ion-label",2),a.Ob(4,"b"),a.kc(5,"Clientes"),a.Nb(),a.Nb(),a.Nb(),a.Ob(6,"ion-item",3),a.Ob(7,"ion-grid"),a.Ob(8,"ion-row"),a.Ob(9,"ion-col",4),a.Ob(10,"ion-label"),a.Ob(11,"b"),a.kc(12,"Razon social"),a.Nb(),a.Nb(),a.Nb(),a.Ob(13,"ion-col",5),a.Ob(14,"ion-label"),a.Ob(15,"b"),a.kc(16,"Telefono"),a.Nb(),a.Nb(),a.Nb(),a.Ob(17,"ion-col",4),a.Ob(18,"ion-label"),a.Ob(19,"b"),a.kc(20,"Email"),a.Nb(),a.Nb(),a.Nb(),a.Ob(21,"ion-col",4),a.Ob(22,"ion-label"),a.Ob(23,"b"),a.kc(24,"Direccion"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.jc(25,h,2,1,"div",6),a.Nb()),2&i&&(a.zb(25),a.dc("ngIf",t.clientes))},directives:[s.i,s.v,s.N,s.r,s.s,s.n,s.u,s.h,n.j,n.i,s.p,s.L,r.g],styles:[".titulos[_ngcontent-%COMP%]{color:#838383}"]}),i})()},{path:"modificar-cliente",loadChildren:()=>e.e(19).then(e.bind(null,"jEl+")).then(i=>i.ModificarClientePageModule)}];let d=(()=>{class i{}return i.\u0275mod=a.Hb({type:i}),i.\u0275inj=a.Gb({factory:function(t){return new(t||i)},imports:[[r.h.forChild(p)],r.h]}),i})(),m=(()=>{class i{}return i.\u0275mod=a.Hb({type:i}),i.\u0275inj=a.Gb({factory:function(t){return new(t||i)},imports:[[n.b,o.a,s.E,d]]}),i})()},mhZR:function(i,t,e){"use strict";e.d(t,"a",(function(){return p}));var n=e("mrSG"),o=e("fXoL"),s=e("TEn/"),r=e("jCJ1"),c=e("X9o6"),l=e("ofXK"),a=e("3Pt+");function b(i,t){if(1&i){const i=o.Pb();o.Ob(0,"ion-icon",12),o.Wb("click",(function(){return o.gc(i),o.Yb(2).deleteLogo()})),o.Nb()}}function u(i,t){if(1&i){const i=o.Pb();o.Ob(0,"ion-button",9),o.Wb("click",(function(){return o.gc(i),o.Yb(2).agregarLogo()})),o.kc(1,"Seleccionar Logo"),o.Nb()}}function h(i,t){if(1&i){const i=o.Pb();o.Ob(0,"ion-content"),o.Ob(1,"ion-item",2),o.Ob(2,"ion-label",3),o.kc(3," Razon social: "),o.Nb(),o.Ob(4,"ion-input",4),o.Wb("ngModelChange",(function(t){return o.gc(i),o.Yb().razon_social=t})),o.Nb(),o.Nb(),o.Ob(5,"ion-item",2),o.Ob(6,"ion-label",3),o.kc(7," Telefono: (solo numeros) "),o.Nb(),o.Ob(8,"ion-input",4),o.Wb("ngModelChange",(function(t){return o.gc(i),o.Yb().telefono=t})),o.Nb(),o.Nb(),o.Ob(9,"ion-item",2),o.Ob(10,"ion-label",3),o.kc(11," Email: "),o.Nb(),o.Ob(12,"ion-input",4),o.Wb("ngModelChange",(function(t){return o.gc(i),o.Yb().email=t})),o.Nb(),o.Nb(),o.Ob(13,"ion-item",2),o.Ob(14,"ion-label",3),o.kc(15," Direccion: "),o.Nb(),o.Ob(16,"ion-input",4),o.Wb("ngModelChange",(function(t){return o.gc(i),o.Yb().direccion=t})),o.Nb(),o.Nb(),o.Ob(17,"ion-item",2),o.Kb(18,"img",5),o.jc(19,b,1,0,"ion-icon",6),o.jc(20,u,2,0,"ion-button",7),o.Nb(),o.Ob(21,"div",8),o.Ob(22,"ion-button",9),o.Wb("click",(function(){return o.gc(i),o.Yb().modificar_cliente()})),o.kc(23,"Modificar"),o.Nb(),o.Nb(),o.Ob(24,"div",10),o.Kb(25,"img",11),o.Nb(),o.Nb()}if(2&i){const i=o.Yb();o.zb(4),o.dc("ngModel",i.razon_social),o.zb(4),o.dc("ngModel",i.telefono),o.zb(4),o.dc("ngModel",i.email),o.zb(4),o.dc("ngModel",i.direccion),o.zb(2),o.dc("src",i.logo,o.hc),o.zb(1),o.dc("ngIf",!(null==i.logo||"NULL"==i.logo)),o.zb(1),o.dc("ngIf",null==i.logo||"NULL"==i.logo)}}let p=(()=>{class i{constructor(i,t,e,n,o){this.loadingController=i,this.api_clientes=t,this.navParams=e,this.modalCtrl=n,this.imageCompress=o,this.id_cliente=this.navParams.get("id_cliente")}ngOnInit(){this.api_clientes.informacion_cliente(this.id_cliente).subscribe(i=>{this.cliente=i,this.cliente=this.cliente.result,this.razon_social=this.cliente.clienteDatos[0].razon_social_cliente,this.email=this.cliente.clienteDatos[0].email,this.telefono=this.cliente.clienteDatos[0].telefono,this.direccion=this.cliente.clienteDatos[0].direccion,this.logo=this.cliente.clienteDatos[0].logo_cliente,console.log(this.cliente)})}modificar_cliente(){this.objeto={id_cliente:this.id_cliente,razon_social_cliente:this.razon_social,direccion:this.direccion,telefono:this.telefono,email:this.email},console.log(this.objeto),this.api_clientes.modificar_cliente(this.objeto).subscribe(i=>{this.logo?this.api_clientes.subir_logo_cliente({id_cliente:this.id_cliente,logo:this.logo}).subscribe(i=>{this.modalCtrl.dismiss({dismissed:!0})}):this.modalCtrl.dismiss({dismissed:!0})},i=>{console.log(i)})}agregarLogo(){return Object(n.a)(this,void 0,void 0,(function*(){this.imageCompress.uploadFile().then(({image:i,orientation:t})=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.loadingController.create({message:"Subiendo img"});yield e.present(),console.warn("Size in bytes was:",this.imageCompress.byteCount(i)),this.imageCompress.compressFile(i,t,50,50).then(i=>{console.log(i),this.logo=i,this.api_clientes.subir_logo_cliente({id_cliente:this.id_cliente,logo:this.logo}).subscribe(i=>{this.loadingController.dismiss()})})})))}))}deleteLogo(){return Object(n.a)(this,void 0,void 0,(function*(){const i=yield this.loadingController.create({message:"Eliminando img"});yield i.present(),this.api_clientes.subir_logo_cliente({id_cliente:this.id_cliente,logo:null}).subscribe(i=>{this.ngOnInit(),this.loadingController.dismiss()})}))}}return i.\u0275fac=function(t){return new(t||i)(o.Jb(s.F),o.Jb(r.a),o.Jb(s.I),o.Jb(s.G),o.Jb(c.a))},i.\u0275cmp=o.Db({type:i,selectors:[["app-modificar-cliente"]],decls:5,vars:1,consts:[["color","primary",2,"text-align","center"],[4,"ngIf"],["lines","full"],[1,"titulos"],[3,"ngModel","ngModelChange"],["alt","",2,"width","50%","margin-left","25%","padding","5px",3,"src"],["name","trash-outline","color","danger","style","margin-top:15px",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],[2,"width","100%","text-align","center","margin-top","10px"],[3,"click"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"],["name","trash-outline","color","danger",2,"margin-top","15px",3,"click"]],template:function(i,t){1&i&&(o.Ob(0,"ion-header"),o.Ob(1,"ion-toolbar",0),o.Ob(2,"ion-title"),o.kc(3,"Modificar cliente"),o.Nb(),o.Nb(),o.Nb(),o.jc(4,h,26,7,"ion-content",1)),2&i&&(o.zb(4),o.dc("ngIf",t.cliente))},directives:[s.o,s.D,s.C,l.j,s.i,s.r,s.s,s.q,s.N,a.d,a.e,s.d,s.p],styles:[".titulos[_ngcontent-%COMP%]{color:#838383}"]}),i})()}}]);