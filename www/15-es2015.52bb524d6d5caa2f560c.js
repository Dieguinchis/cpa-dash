(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"+1S5":function(o,i,e){"use strict";e.d(i,"a",(function(){return s}));var t=e("tk/3"),n=e("octk"),r=e("AytR"),c=e("fXoL");let s=(()=>{class o{constructor(o){this.http=o,this.apiDir=r.a.api.base_url+"",this.requestOptions={headers:new t.c({"Content-Type":"application/json",version:n.a})}}crear_servicio(o){return console.log(o),console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/crear",o,this.requestOptions)}mostrar_servicios(){return console.log(this.apiDir),this.http.get(this.apiDir+"/servicios",this.requestOptions)}getZpl(o){return console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/imprimir",o,this.requestOptions)}alta_producto(o){return console.log(this.apiDir),this.http.post(this.apiDir+"/productos/crear",o,this.requestOptions)}alta_workstation(o){return console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/equipos/crear",o,this.requestOptions)}alta_Grupo_workstation(o){return console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/gruposEquipos/crear",o,this.requestOptions)}eliminar_Grupo_workstation(o){return console.log("delete2",o),console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/eliminarGrupoEquipos/"+o,null,this.requestOptions)}modificar_Grupo_workstation(o){return console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/gruposEquipos/crear",o,this.requestOptions)}ver_servicio(o){return console.log(this.apiDir),this.http.get(this.apiDir+"/servicios/id/"+o,this.requestOptions)}baja_producto(o){return console.log(this.apiDir),this.http.post(this.apiDir+"/productos/eliminar/"+o,null,this.requestOptions)}baja_servicio(o){return console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/eliminar/"+o,null,this.requestOptions)}update_servicio(o){return console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/update",o,this.requestOptions)}baja_opcion(o){return console.log(this.apiDir),this.http.post(this.apiDir+"/servicios/opcion/delete/",{id:o},this.requestOptions)}ver_opciones_producto(o){return console.log(o),console.log(this.apiDir),this.http.get(this.apiDir+"/servicios/producto/opciones/"+o,this.requestOptions)}producto_update(o){return console.log(o),console.log(this.apiDir),this.http.post(this.apiDir+"/productos/actualizar",o,this.requestOptions)}getProductos(){return console.log(this.apiDir),this.http.get(this.apiDir+"/productos/",this.requestOptions)}}return o.\u0275fac=function(i){return new(i||o)(c.Sb(t.a))},o.\u0275prov=c.Fb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},"/+FQ":function(o,i,e){"use strict";e.d(i,"a",(function(){return m}));var t=e("fXoL"),n=e("+1S5"),r=e("TEn/"),c=e("3Pt+"),s=e("ofXK");function a(o,i){if(1&o){const o=t.Pb();t.Ob(0,"div"),t.Ob(1,"ion-item",15),t.Ob(2,"ion-label"),t.kc(3," Seleccione tipo de campo "),t.Nb(),t.Ob(4,"ion-select",16),t.Wb("ngModelChange",(function(i){return t.gc(o),t.Yb().$implicit.tipoCampo=i})),t.Ob(5,"ion-select-option",18),t.kc(6,"Escritura"),t.Nb(),t.Ob(7,"ion-select-option",19),t.kc(8,"Seleccionable"),t.Nb(),t.Ob(9,"ion-select-option",20),t.kc(10,"Seleccion multiple"),t.Nb(),t.Nb(),t.Nb(),t.Nb()}if(2&o){const o=t.Yb().$implicit,i=t.Yb();t.zb(4),t.dc("disabled",0==i.servicio.modificable)("ngModel",o.tipoCampo)}}function l(o,i){if(1&o){const o=t.Pb();t.Ob(0,"ion-item",15),t.Ob(1,"ion-label"),t.kc(2,"Ingrese la opcion: "),t.Nb(),t.Ob(3,"ion-input",3),t.Wb("ngModelChange",(function(e){return t.gc(o),i.$implicit.name=e})),t.Nb(),t.Ob(4,"ion-icon",22),t.Wb("click",(function(){t.gc(o);const e=i.index,n=i.$implicit,r=t.Yb(2).index;return t.Yb().quitar_opcion_select(r,e,n.opcionId)})),t.Nb(),t.Nb()}if(2&o){const o=i.$implicit;t.zb(3),t.dc("ngModel",o.name)}}function b(o,i){if(1&o){const o=t.Pb();t.Ob(0,"div"),t.jc(1,l,5,1,"ion-item",21),t.Ob(2,"ion-item",15),t.Ob(3,"ion-button",8),t.Wb("click",(function(){t.gc(o);const i=t.Yb().index;return t.Yb().agregar_opcion_select(i)})),t.kc(4," Agregar opcion "),t.Kb(5,"ion-icon",9),t.Nb(),t.Nb(),t.Nb()}if(2&o){const o=t.Yb().$implicit;t.zb(1),t.dc("ngForOf",o.opt)}}function p(o,i){if(1&o){const o=t.Pb();t.Ob(0,"div",14),t.Ob(1,"ion-item",1),t.Ob(2,"ion-grid",14),t.Ob(3,"ion-row",14),t.Ob(4,"ion-item",15),t.Ob(5,"ion-col"),t.Ob(6,"ion-label"),t.kc(7,"Ingrese titulo del campo: "),t.Nb(),t.Nb(),t.Ob(8,"ion-col"),t.Ob(9,"ion-input",16),t.Wb("ngModelChange",(function(e){return t.gc(o),i.$implicit.nombreCampo=e})),t.Nb(),t.Nb(),t.Nb(),t.Nb(),t.Ob(10,"ion-row"),t.jc(11,a,11,2,"div",17),t.Nb(),t.jc(12,b,6,1,"div",17),t.Nb(),t.Nb(),t.Nb()}if(2&o){const o=i.$implicit,e=t.Yb();t.zb(9),t.dc("disabled","Tipo de producto"==o.nombreCampo||0==e.servicio.modificable)("ngModel",o.nombreCampo),t.zb(2),t.dc("ngIf","Tipo de producto"!=o.nombreCampo),t.zb(1),t.dc("ngIf","select"==o.tipoCampo||"multiple"==o.tipoCampo)}}function u(o,i){1&o&&(t.Ob(0,"ion-item",23),t.Ob(1,"p"),t.kc(2,"Al ser un servicio con un dise\xf1o predeterminado recuerde que si agrega nuevos campos no se veran automaticamente reflejados en el pdf"),t.Nb(),t.Nb())}function d(o,i){if(1&o){const o=t.Pb();t.Ob(0,"div",24),t.Ob(1,"ion-button",8),t.Wb("click",(function(){return t.gc(o),t.Yb().modificar_servicio()})),t.kc(2,"Modificar"),t.Nb(),t.Nb()}}function h(o,i){if(1&o){const o=t.Pb();t.Ob(0,"div",24),t.Ob(1,"ion-button",8),t.Wb("click",(function(){return t.gc(o),t.Yb().crear_servicio()})),t.kc(2,"Modificar"),t.Nb(),t.Nb()}}let m=(()=>{class o{constructor(o,i,e,t){this.api_servicios=o,this.navCtrl=i,this.navParams=e,this.modalController=t,this.formulario=[],this.servicio={},this.auxiliar=[],this.start=!1,this.id_servicio=this.navParams.get("id_servicio")}iniicar(){this.start=!0,this.servicio=[],this.campos=null,this.api_servicios.ver_servicio(this.id_servicio).subscribe(o=>{console.log("RESPUESTA:  ",o),this.servicio=o,this.servicio=this.servicio.result,this.servicio.requiereQR=this.servicio.requiereQR.toString(),this.servicio.tieneProducto=this.servicio.tieneProducto.toString();var i=[];this.servicio.formulario.forEach((o,e)=>{i.push({opt:[],id_campo:o.id_campo,tipoCampo:o.tipoCampo,nombreCampo:o.nombreCampo}),o.opciones.forEach(o=>{i[e].opt.push(o)})}),this.campos=i,console.log(this.servicio)},o=>{console.log(o)})}ngOnInit(){this.servicio={nombreDelServicio:"",requiereQR:0,formulario:this.servicio.formulario,producto:0},this.iniicar()}agregar_campo_formulario(){this.servicio.formulario.push({nombreCampo:"",tipoCampo:"",opciones:[]}),this.campos.push({opt:[],tipoCampo:"",nombreCampo:""})}agregar_opcion_select(o){this.servicio.formulario[o].opciones.push(""),this.campos[o].opt.push({name:null})}quitar_opcion_select(o,i,e){this.servicio.formulario[o].opciones.splice(i,1),this.campos[o].opt.splice(i,1),console.log(e),this.api_servicios.baja_opcion(e).subscribe(o=>{console.log(o)})}crear_servicio(){this.servicio.formulario=[],this.campos.forEach((o,i)=>{this.servicio.formulario.push({nombreCampo:o.nombreCampo,tipoCampo:o.tipoCampo,opciones:[]}),o.opt.forEach(o=>{this.servicio.formulario[i].opciones.push({opcion:o.name})})}),this.servicio.requiereQR=parseInt(this.servicio.requiereQR,10),this.servicio.producto=parseInt(this.servicio.tieneProducto,10),console.log(this.servicio),this.api_servicios.crear_servicio(this.servicio).subscribe(o=>{console.log(o),this.borrar(),location.reload()})}modificar_servicio(){this.servicio.formulario=[],this.campos.forEach((o,i)=>{this.servicio.formulario.push({nombreCampo:o.nombreCampo,tipoCampo:o.tipoCampo,id_campo:o.id_campo,opciones:[]}),o.opt.forEach(o=>{this.servicio.formulario[i].opciones.push(o)})}),this.servicio.requiereQR=parseInt(this.servicio.requiereQR,10),this.servicio.producto=parseInt(this.servicio.tieneProducto,10),this.api_servicios.update_servicio(this.servicio).subscribe(o=>{console.log(o),location.reload()})}producto_asociado(){1==this.servicio.tieneProducto&&1==this.servicio.modificable&&0==this.start&&"Tipo de producto"!=this.servicio.formulario[0].nombreCampo?(console.log("troll"),this.servicio.formulario.unshift({nombreCampo:"Tipo de producto",tipoCampo:"select",opciones:[]}),this.campos.unshift({nombreCampo:"Tipo de producto",tipoCampo:"select",opt:[]})):"Tipo de producto"==this.servicio.formulario[0].nombreCampo&&0==this.start?(this.servicio.formulario.splice(0,1),this.campos.splice(0,1)):this.start=!1}borrar(){this.api_servicios.baja_servicio(this.id_servicio).subscribe(o=>{console.log(o)})}}return o.\u0275fac=function(i){return new(i||o)(t.Jb(n.a),t.Jb(r.J),t.Jb(r.K),t.Jb(r.I))},o.\u0275cmp=t.Db({type:o,selectors:[["app-modificar-servicio"]],decls:33,vars:8,consts:[["color","primary",2,"text-align","center"],["lines","full"],[2,"text-align","left"],[3,"ngModel","ngModelChange"],["value","1"],["value","0"],[3,"disabled","ngModel","ngModelChange","ionChange"],["style","background-color: white;",4,"ngFor","ngForOf"],[3,"click"],["name","add-outline"],["disabled","","lines","full",4,"ngIf"],["style","text-align: center; margin-top: 20px;",4,"ngIf"],[2,"margin-top","15px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"],[2,"background-color","white"],["lines","none"],[3,"disabled","ngModel","ngModelChange"],[4,"ngIf"],["value","input"],["value","select"],["value","multiple"],["lines","none",4,"ngFor","ngForOf"],["name","trash-outline",3,"click"],["disabled","","lines","full"],[2,"text-align","center","margin-top","20px"]],template:function(o,i){1&o&&(t.Ob(0,"ion-header"),t.Ob(1,"ion-toolbar",0),t.Ob(2,"ion-title"),t.kc(3),t.Nb(),t.Nb(),t.Nb(),t.Ob(4,"ion-content"),t.Ob(5,"div"),t.Ob(6,"ion-item",1),t.Ob(7,"ion-label",2),t.kc(8,"\xbfRequiere QR?"),t.Nb(),t.Ob(9,"ion-select",3),t.Wb("ngModelChange",(function(o){return i.servicio.requiereQR=o})),t.Ob(10,"ion-select-option",4),t.kc(11,"Si"),t.Nb(),t.Ob(12,"ion-select-option",5),t.kc(13,"No"),t.Nb(),t.Nb(),t.Nb(),t.Ob(14,"ion-item",1),t.Ob(15,"ion-label",2),t.kc(16,"\xbfContiene productos?"),t.Nb(),t.Ob(17,"ion-select",6),t.Wb("ngModelChange",(function(o){return i.servicio.tieneProducto=o}))("ionChange",(function(){return i.producto_asociado()})),t.Ob(18,"ion-select-option",4),t.kc(19,"Si"),t.Nb(),t.Ob(20,"ion-select-option",5),t.kc(21,"No"),t.Nb(),t.Nb(),t.Nb(),t.jc(22,p,13,4,"div",7),t.Ob(23,"ion-item",1),t.Ob(24,"ion-label"),t.kc(25," Agregar campo "),t.Nb(),t.Ob(26,"ion-button",8),t.Wb("click",(function(){return i.agregar_campo_formulario()})),t.Kb(27,"ion-icon",9),t.Nb(),t.Nb(),t.jc(28,u,3,0,"ion-item",10),t.Nb(),t.jc(29,d,3,0,"div",11),t.jc(30,h,3,0,"div",11),t.Ob(31,"div",12),t.Kb(32,"img",13),t.Nb(),t.Nb()),2&o&&(t.zb(3),t.mc("Modiciar servicio: ",i.servicio.nombreDelServicio,""),t.zb(6),t.dc("ngModel",i.servicio.requiereQR),t.zb(8),t.dc("disabled",0==i.servicio.modificable)("ngModel",i.servicio.tieneProducto),t.zb(5),t.dc("ngForOf",i.campos),t.zb(6),t.dc("ngIf",0==i.servicio.modificable),t.zb(1),t.dc("ngIf",0==i.servicio.modificable),t.zb(1),t.dc("ngIf",1==i.servicio.modificable))},directives:[r.q,r.F,r.E,r.k,r.t,r.u,r.y,r.O,c.d,c.e,r.z,s.i,r.d,r.r,s.j,r.p,r.w,r.j,r.s,r.P],styles:[""]}),o})()},JFkf:function(o,i,e){"use strict";e.d(i,"a",(function(){return v}));var t=e("mrSG"),n=e("LYSU"),r=e("fXoL"),c=e("+1S5"),s=e("TEn/"),a=e("3Pt+"),l=e("ofXK");function b(o,i){if(1&o&&(r.Ob(0,"ion-select-option",12),r.kc(1),r.Nb()),2&o){const o=i.$implicit;r.dc("value",o),r.zb(1),r.lc(o.name)}}let p=(()=>{class o{constructor(o,i,e,t){this.apiServicios=o,this.navParams=i,this.modalController=e,this.alertController=t,this.opcionesCebo=[],this.opcionesPuesto=[],this.opcionPredeterminada=[],this.producto=i.get("producto"),this.servicio=i.get("servicio");for(let s=0;s<this.servicio.formulario.length;s++)"Tipo de producto"==this.servicio.formulario[s].nombreCampo&&(this.indexTipoProducto=s);var n=this.producto.fecha_vencimiento.split("-")[2],r=this.producto.fecha_vencimiento.split("-")[0],c=this.producto.fecha_vencimiento.split("-")[1];this.producto.fecha_vencimiento=n+"-"+c+"-"+r,this.producto.tipo_producto=this.servicio.formulario[this.indexTipoProducto].opciones.find(o=>o.name==this.producto.tipo_producto),console.log("servide",this.servicio)}ngOnInit(){}guardar(){var o=this.opcionPredeterminada[0]+" - "+this.opcionPredeterminada[1];console.log(o),this.producto.opcion_predeterminada=o,this.apiServicios.producto_update(this.producto).subscribe(o=>{console.log(o),this.modalController.dismiss()})}modalDismiss(){this.modalController.dismiss()}select_tipo_producto(){"nuevo"==this.producto.tipo_producto&&this.alert_nuevo_tipo()}alert_nuevo_tipo(){return Object(t.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({header:"Crear nuevo tipo de producto",inputs:[{name:"name",type:"text",placeholder:"Ingrese el nombre"}],buttons:[{text:"Crear",handler:o=>{console.log(o),this.crear_tipo_producto(o.name)}},{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}}]});yield o.present()}))}crear_tipo_producto(o){this.servicio.formulario.forEach(i=>{"Tipo de producto"==i.nombreCampo&&i.opciones.push({name:o})}),this.apiServicios.update_servicio(this.servicio).subscribe(o=>{console.log(o),this.ngOnInit()})}modificar(){var o=this.producto.fecha_vencimiento.split("-")[0],i=this.producto.fecha_vencimiento.split("-")[2],e=this.producto.fecha_vencimiento.split("-")[1];this.producto.fecha_vencimiento=i+"-"+e+"-"+o;var t=Number(JSON.stringify(this.servicio.listaProductos[0].id_servicio));console.log({id_servicio:t,nombre_producto:this.producto.nombre_producto,fecha_vencimiento:this.producto.fecha_vencimiento,lote:this.producto.lote,tipo_producto:this.producto.tipo_producto.name,id_producto:this.producto.id_producto}),this.apiServicios.producto_update({id_servicio:t,nombre_producto:this.producto.nombre_producto,fecha_vencimiento:this.producto.fecha_vencimiento,lote:this.producto.lote,tipo_producto:this.producto.tipo_producto.name,id_producto:this.producto.id_producto}).subscribe(o=>{console.log(o),this.modalController.dismiss()},o=>{console.log(o)})}}return o.\u0275fac=function(i){return new(i||o)(r.Jb(c.a),r.Jb(s.K),r.Jb(s.I),r.Jb(s.a))},o.\u0275cmp=r.Db({type:o,selectors:[["app-modificar-producto"]],decls:29,vars:5,consts:[["color","primary"],["lines","full"],[1,"titulos"],[3,"ngModel","ngModelChange"],["type","date",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["value","nuevo"],[2,"width","100%","text-align","center","margin-top","25px"],[3,"click"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"],[3,"value"]],template:function(o,i){1&o&&(r.Ob(0,"ion-header"),r.Ob(1,"ion-toolbar",0),r.Ob(2,"ion-title"),r.kc(3,"Modificar Producto"),r.Nb(),r.Nb(),r.Nb(),r.Ob(4,"ion-content"),r.Ob(5,"ion-item",1),r.Ob(6,"ion-label",2),r.kc(7," Nombre del producto: "),r.Nb(),r.Ob(8,"ion-input",3),r.Wb("ngModelChange",(function(o){return i.producto.nombre_producto=o})),r.Nb(),r.Nb(),r.Ob(9,"ion-item",1),r.Ob(10,"ion-label",2),r.kc(11," Fecha de vencimiento: "),r.Nb(),r.Ob(12,"ion-input",4),r.Wb("ngModelChange",(function(o){return i.producto.fecha_vencimiento=o})),r.Nb(),r.Nb(),r.Ob(13,"ion-item",1),r.Ob(14,"ion-label",2),r.kc(15," Lote: "),r.Nb(),r.Ob(16,"ion-input",3),r.Wb("ngModelChange",(function(o){return i.producto.lote=o})),r.Nb(),r.Nb(),r.Ob(17,"ion-item",1),r.Ob(18,"ion-label",2),r.kc(19," Tipo de producto: "),r.Nb(),r.Ob(20,"ion-select",5),r.Wb("ngModelChange",(function(o){return i.producto.tipo_producto=o}))("ionChange",(function(){return i.select_tipo_producto()})),r.jc(21,b,2,2,"ion-select-option",6),r.Ob(22,"ion-select-option",7),r.kc(23,"Nuevo tipo"),r.Nb(),r.Nb(),r.Nb(),r.Ob(24,"div",8),r.Ob(25,"ion-button",9),r.Wb("click",(function(){return i.modificar()})),r.kc(26,"Modificar"),r.Nb(),r.Nb(),r.Ob(27,"div",10),r.Kb(28,"img",11),r.Nb(),r.Nb()),2&o&&(r.zb(8),r.dc("ngModel",i.producto.nombre_producto),r.zb(4),r.dc("ngModel",i.producto.fecha_vencimiento),r.zb(4),r.dc("ngModel",i.producto.lote),r.zb(4),r.dc("ngModel",i.producto.tipo_producto),r.zb(1),r.dc("ngForOf",i.servicio.formulario[i.indexTipoProducto].opciones))},directives:[s.q,s.F,s.E,s.k,s.t,s.u,s.s,s.P,a.d,a.e,s.y,s.O,l.i,s.z,s.d],styles:[""]}),o})();function u(o,i){if(1&o&&(r.Ob(0,"ion-title",3),r.kc(1),r.Nb()),2&o){const o=r.Yb();r.zb(1),r.lc(o.servicio.nombreDelServicio)}}function d(o,i){if(1&o){const o=r.Pb();r.Ob(0,"div"),r.Ob(1,"ion-item",10),r.Ob(2,"ion-col",7),r.Ob(3,"ion-label"),r.kc(4),r.Nb(),r.Nb(),r.Ob(5,"ion-col",7),r.Ob(6,"ion-label"),r.kc(7),r.Nb(),r.Nb(),r.Ob(8,"ion-col",7),r.Ob(9,"ion-label"),r.kc(10),r.Nb(),r.Nb(),r.Ob(11,"ion-col",8),r.Ob(12,"ion-label"),r.kc(13),r.Nb(),r.Nb(),r.Ob(14,"ion-col",11),r.Ob(15,"ion-icon",12),r.Wb("click",(function(){r.gc(o);const e=i.$implicit;return r.Yb(3).modificarProducto(e)})),r.Nb(),r.Ob(16,"ion-icon",13),r.Wb("click",(function(){r.gc(o);const e=i.$implicit;return r.Yb(3).eliminar_producto(e.id_producto)})),r.Nb(),r.Nb(),r.Nb(),r.Nb()}if(2&o){const o=i.$implicit;r.zb(4),r.mc(" ",o.nombre_producto," "),r.zb(3),r.mc(" ",o.fecha_vencimiento," "),r.zb(3),r.mc(" ",o.lote," "),r.zb(3),r.mc(" ",o.tipo_producto," ")}}function h(o,i){if(1&o){const o=r.Pb();r.Ob(0,"div"),r.Ob(1,"ion-item",4),r.Ob(2,"ion-label",3),r.Ob(3,"b"),r.kc(4,"Productos"),r.Nb(),r.Nb(),r.Ob(5,"ion-button",5),r.Wb("click",(function(){r.gc(o);const i=r.Yb(2);return i.altaProducto(i.id_servicio)})),r.kc(6,"Agregar producto"),r.Nb(),r.Nb(),r.Ob(7,"ion-item",6),r.Ob(8,"ion-grid"),r.Ob(9,"ion-row"),r.Ob(10,"ion-col",7),r.Ob(11,"ion-label"),r.Ob(12,"b"),r.kc(13,"Nombre del producto"),r.Nb(),r.Nb(),r.Nb(),r.Ob(14,"ion-col",7),r.Ob(15,"ion-label"),r.Ob(16,"b"),r.kc(17,"Fecha de vencimiento"),r.Nb(),r.Nb(),r.Nb(),r.Ob(18,"ion-col",7),r.Ob(19,"ion-label"),r.Ob(20,"b"),r.kc(21,"Lote"),r.Nb(),r.Nb(),r.Nb(),r.Ob(22,"ion-col",8),r.Ob(23,"ion-label"),r.Ob(24,"b"),r.kc(25,"Tipo de producto"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.jc(26,d,17,4,"div",9),r.Nb()}if(2&o){const o=r.Yb(2);r.zb(26),r.dc("ngForOf",o.servicio.listaProductos)}}function m(o,i){if(1&o&&(r.Ob(0,"div"),r.jc(1,h,27,1,"div",2),r.Nb()),2&o){const o=r.Yb();r.zb(1),r.dc("ngIf",o.servicio.tieneProducto)}}let v=(()=>{class o{constructor(o,i,e,t){this.navParams=o,this.api_servicios=i,this.modalController=e,this.alertController=t,this.id_servicio=this.navParams.get("id_servicio")}ngOnInit(){this.actualizar_informacion()}actualizar_informacion(){this.api_servicios.ver_servicio(this.id_servicio).subscribe(o=>{this.servicio=o,this.servicio=this.servicio.result,console.log(this.servicio)},o=>{console.log(o)})}altaProducto(o){return Object(t.a)(this,void 0,void 0,(function*(){const i=yield this.modalController.create({component:n.a,cssClass:"my-custom-class",componentProps:{id_servicio:o}});return i.onDidDismiss().then(o=>{this.actualizar_informacion()}),yield i.present()}))}baja_producto(o){this.api_servicios.baja_producto(o).subscribe(o=>{console.log(o),this.actualizar_informacion()},o=>{console.log(o)})}eliminar_producto(o){return Object(t.a)(this,void 0,void 0,(function*(){const i=yield this.alertController.create({header:"Seguro que desea eliminar el producto?",buttons:[{text:"No",handler:()=>{}},{text:"Si",handler:()=>{this.baja_producto(o)}}]});yield i.present()}))}modificarProducto(o){return Object(t.a)(this,void 0,void 0,(function*(){const i=yield this.modalController.create({component:p,cssClass:"stack-modal",showBackdrop:!0,componentProps:{producto:o,servicio:this.servicio}});return i.onDidDismiss().then(o=>{this.actualizar_informacion()}),yield i.present()}))}}return o.\u0275fac=function(i){return new(i||o)(r.Jb(s.K),r.Jb(c.a),r.Jb(s.I),r.Jb(s.a))},o.\u0275cmp=r.Db({type:o,selectors:[["app-ver-servicio"]],decls:5,vars:2,consts:[["color","primary"],["style","text-align: center;",4,"ngIf"],[4,"ngIf"],[2,"text-align","center"],["lines","none"],[3,"click"],["lines","full",1,"titulos"],["size","3"],["size","2"],[4,"ngFor","ngForOf"],["lines","full"],["size","1"],["name","create-outline",3,"click"],["name","trash-outline","color","danger",2,"margin-right","15px",3,"click"]],template:function(o,i){1&o&&(r.Ob(0,"ion-header"),r.Ob(1,"ion-toolbar",0),r.jc(2,u,2,1,"ion-title",1),r.Nb(),r.Nb(),r.Ob(3,"ion-content"),r.jc(4,m,2,1,"div",2),r.Nb()),2&o&&(r.zb(2),r.dc("ngIf",i.servicio),r.zb(2),r.dc("ngIf",i.servicio))},directives:[s.q,s.F,l.j,s.k,s.E,s.t,s.u,s.d,s.p,s.w,s.j,l.i,s.r],styles:[""]}),o})()},LYSU:function(o,i,e){"use strict";e.d(i,"a",(function(){return p}));var t=e("mrSG"),n=e("fXoL"),r=e("TEn/"),c=e("+1S5"),s=e("3Pt+"),a=e("ofXK");function l(o,i){if(1&o&&(n.Ob(0,"ion-select-option",14),n.kc(1),n.Nb()),2&o){const o=i.$implicit;n.dc("value",o),n.zb(1),n.lc(o.name)}}function b(o,i){if(1&o){const o=n.Pb();n.Ob(0,"ion-item",2),n.Ob(1,"ion-label",3),n.kc(2," Tipo de producto: "),n.Nb(),n.Ob(3,"ion-select",11),n.Wb("ngModelChange",(function(i){return n.gc(o),n.Yb().tipo_producto=i}))("ionChange",(function(){return n.gc(o),n.Yb().select_tipo_producto()})),n.jc(4,l,2,2,"ion-select-option",12),n.Ob(5,"ion-select-option",13),n.kc(6,"Nuevo tipo"),n.Nb(),n.Nb(),n.Nb()}if(2&o){const o=n.Yb();n.zb(3),n.dc("ngModel",o.tipo_producto),n.zb(1),n.dc("ngForOf",o.servicio.formulario[o.indexTipoProducto].opciones)}}let p=(()=>{class o{constructor(o,i,e,t){this.navParams=o,this.api_servicios=i,this.modalCtrl=e,this.alertController=t,this.indexTipoProducto=0,this.id_servicio=this.navParams.get("id_servicio")}ngOnInit(){this.api_servicios.ver_servicio(this.id_servicio).subscribe(o=>{this.servicio=o,this.servicio=this.servicio.result;for(let i=0;i<this.servicio.formulario.length;i++)"Tipo de producto"==this.servicio.formulario[i].nombreCampo&&(this.indexTipoProducto=i);console.log("Servicio: ",this.servicio)},o=>{console.log(o)})}cargar_producto(){const o=this.fecha_vencimiento.slice(0,4),i=this.fecha_vencimiento.slice(5,7),e=this.fecha_vencimiento.slice(8,10);this.fecha_vencimiento=e+"-"+i+"-"+o,this.api_servicios.alta_producto({id_servicio:this.id_servicio,nombre_producto:this.nombre_producto,fecha_vencimiento:this.fecha_vencimiento,lote:this.lote,tipo_producto:this.tipo_producto}).subscribe(o=>{console.log(o),this.modalCtrl.dismiss({dismissed:!0})},o=>{console.log(o)})}select_tipo_producto(){"nuevo"==this.tipo_producto&&this.alert_nuevo_tipo()}alert_nuevo_tipo(){return Object(t.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({header:"Crear nuevo tipo de producto",inputs:[{name:"name",type:"text",placeholder:"Ingrese el nombre"}],buttons:[{text:"Crear",handler:o=>{console.log(o),this.crear_tipo_producto(o.name)}},{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}}]});yield o.present()}))}crear_tipo_producto(o){this.servicio.formulario.forEach(i=>{"Tipo de producto"==i.nombreCampo&&i.opciones.push({name:o})}),this.api_servicios.update_servicio(this.servicio).subscribe(o=>{console.log(o),this.ngOnInit()})}}return o.\u0275fac=function(i){return new(i||o)(n.Jb(r.K),n.Jb(c.a),n.Jb(r.I),n.Jb(r.a))},o.\u0275cmp=n.Db({type:o,selectors:[["app-crear-producto"]],decls:23,vars:4,consts:[["color","primary"],[2,"text-align","center"],["lines","full"],[1,"titulos"],[3,"ngModel","ngModelChange"],["type","date",3,"ngModel","ngModelChange"],["lines","full",4,"ngIf"],[2,"width","100%","text-align","center","margin-top","25px"],[3,"click"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"],[3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["value","nuevo"],[3,"value"]],template:function(o,i){1&o&&(n.Ob(0,"ion-header"),n.Ob(1,"ion-toolbar",0),n.Ob(2,"ion-title",1),n.kc(3,"Alta de producto"),n.Nb(),n.Nb(),n.Nb(),n.Ob(4,"ion-content"),n.Ob(5,"ion-item",2),n.Ob(6,"ion-label",3),n.kc(7," Nombre del producto: "),n.Nb(),n.Ob(8,"ion-input",4),n.Wb("ngModelChange",(function(o){return i.nombre_producto=o})),n.Nb(),n.Nb(),n.Ob(9,"ion-item",2),n.Ob(10,"ion-label",3),n.kc(11," Fecha de vencimiento: "),n.Nb(),n.Ob(12,"ion-input",5),n.Wb("ngModelChange",(function(o){return i.fecha_vencimiento=o})),n.Nb(),n.Nb(),n.Ob(13,"ion-item",2),n.Ob(14,"ion-label",3),n.kc(15," Lote: "),n.Nb(),n.Ob(16,"ion-input",4),n.Wb("ngModelChange",(function(o){return i.lote=o})),n.Nb(),n.Nb(),n.jc(17,b,7,2,"ion-item",6),n.Ob(18,"div",7),n.Ob(19,"ion-button",8),n.Wb("click",(function(){return i.cargar_producto()})),n.kc(20,"Cargar"),n.Nb(),n.Nb(),n.Ob(21,"div",9),n.Kb(22,"img",10),n.Nb(),n.Nb()),2&o&&(n.zb(8),n.dc("ngModel",i.nombre_producto),n.zb(4),n.dc("ngModel",i.fecha_vencimiento),n.zb(4),n.dc("ngModel",i.lote),n.zb(1),n.dc("ngIf",i.servicio))},directives:[r.q,r.F,r.E,r.k,r.t,r.u,r.s,r.P,s.d,s.e,a.j,r.d,r.y,r.O,a.i,r.z],styles:["ion-content[_ngcontent-%COMP%]{--background:#dfdfdf;border:2px solid #000}.imagen_empresa[_ngcontent-%COMP%]{width:50%;margin-left:25%}"]}),o})()},NKqT:function(o,i,e){"use strict";e.d(i,"a",(function(){return u}));var t=e("fXoL"),n=e("+1S5"),r=e("TEn/"),c=e("3Pt+"),s=e("ofXK");function a(o,i){if(1&o){const o=t.Pb();t.Ob(0,"div"),t.Ob(1,"ion-item",16),t.Ob(2,"ion-label"),t.kc(3," Seleccione tipo de campo "),t.Nb(),t.Ob(4,"ion-select",4),t.Wb("ngModelChange",(function(i){return t.gc(o),t.Yb().$implicit.tipoCampo=i})),t.Ob(5,"ion-select-option",17),t.kc(6,"Escritura"),t.Nb(),t.Ob(7,"ion-select-option",18),t.kc(8,"Seleccionable"),t.Nb(),t.Ob(9,"ion-select-option",19),t.kc(10,"Seleccion multiple"),t.Nb(),t.Nb(),t.Nb(),t.Nb()}if(2&o){const o=t.Yb().$implicit;t.zb(4),t.dc("ngModel",o.tipoCampo)}}function l(o,i){if(1&o){const o=t.Pb();t.Ob(0,"ion-item",16),t.Ob(1,"ion-label"),t.kc(2,"Ingrese la opcion: "),t.Nb(),t.Ob(3,"div",21),t.Ob(4,"ion-input",4),t.Wb("ngModelChange",(function(e){t.gc(o);const n=i.index;return t.Yb(2).$implicit.opciones[n].opcion=e})),t.Nb(),t.Nb(),t.Nb()}if(2&o){const o=i.index,e=t.Yb(2).$implicit;t.zb(4),t.dc("ngModel",e.opciones[o].opcion)}}function b(o,i){if(1&o){const o=t.Pb();t.Ob(0,"div"),t.jc(1,l,5,1,"ion-item",20),t.Ob(2,"ion-item",16),t.Ob(3,"ion-button",9),t.Wb("click",(function(){t.gc(o);const i=t.Yb().index;return t.Yb().agregar_opcion_select(i)})),t.kc(4,"Agregar opcion "),t.Kb(5,"ion-icon",10),t.Nb(),t.Nb(),t.Nb()}if(2&o){const o=t.Yb().$implicit;t.zb(1),t.dc("ngForOf",o.opciones)}}function p(o,i){if(1&o){const o=t.Pb();t.Ob(0,"div",12),t.Ob(1,"ion-item",2),t.Ob(2,"ion-grid",12),t.Ob(3,"ion-row",12),t.Ob(4,"ion-item",13),t.Ob(5,"ion-col",12),t.Ob(6,"ion-label"),t.kc(7,"Ingrese titulo del campo: "),t.Nb(),t.Nb(),t.Ob(8,"ion-col"),t.Ob(9,"ion-input",14),t.Wb("ngModelChange",(function(e){return t.gc(o),i.$implicit.nombreCampo=e})),t.Nb(),t.Nb(),t.Nb(),t.Nb(),t.Ob(10,"ion-row"),t.jc(11,a,11,1,"div",15),t.Nb(),t.jc(12,b,6,1,"div",15),t.Nb(),t.Nb(),t.Nb()}if(2&o){const o=i.$implicit;t.zb(9),t.dc("disabled","Tipo de producto"==o.nombreCampo)("ngModel",o.nombreCampo),t.zb(2),t.dc("ngIf","Tipo de producto"!=o.nombreCampo),t.zb(1),t.dc("ngIf","select"==o.tipoCampo||"multiple"==o.tipoCampo)}}let u=(()=>{class o{constructor(o,i){this.api_servicios=o,this.navCtrl=i,this.formulario=[],this.servicio={}}ngOnInit(){this.servicio={nombreDelServicio:"",requiereQR:0,formulario:this.formulario,producto:0}}agregar_campo_formulario(){this.formulario.push({nombreCampo:"",tipoCampo:"",opciones:[]})}agregar_opcion_select(o){this.formulario[o].opciones.push({opcion:""})}crear_servicio(){this.api_servicios.crear_servicio(this.servicio).subscribe(o=>{console.log(o),location.reload()})}producto_asociado(){1==this.servicio.producto?this.formulario.push({nombreCampo:"Tipo de producto",tipoCampo:"select",opciones:[]}):this.formulario.splice(0)}}return o.\u0275fac=function(i){return new(i||o)(t.Jb(n.a),t.Jb(r.J))},o.\u0275cmp=t.Db({type:o,selectors:[["app-crear-servicio"]],decls:35,vars:4,consts:[["color","primary",2,"text-align","center"],[2,"background-color","white !important"],["lines","full"],[2,"text-align","left"],[3,"ngModel","ngModelChange"],["value","1"],["value","0"],[3,"ngModel","ngModelChange","ionChange"],["style","background-color: white;",4,"ngFor","ngForOf"],[3,"click"],["name","add-outline"],[2,"text-align","center","margin-top","20px"],[2,"background-color","white"],["lines","none",2,"background-color","white"],[3,"disabled","ngModel","ngModelChange"],[4,"ngIf"],["lines","none"],["value","input"],["value","select"],["value","multiple"],["lines","none",4,"ngFor","ngForOf"],[2,"margin-left","5px"]],template:function(o,i){1&o&&(t.Ob(0,"ion-header"),t.Ob(1,"ion-toolbar",0),t.Ob(2,"ion-title"),t.kc(3,"Crear un nuevo servicio"),t.Nb(),t.Nb(),t.Nb(),t.Ob(4,"ion-content",1),t.Ob(5,"div"),t.Ob(6,"ion-item",2),t.Ob(7,"ion-label",3),t.kc(8,"Nombre del servicio: "),t.Nb(),t.Ob(9,"ion-input",4),t.Wb("ngModelChange",(function(o){return i.servicio.nombreDelServicio=o})),t.Nb(),t.Nb(),t.Ob(10,"ion-item",2),t.Ob(11,"ion-label",3),t.kc(12,"\xbfRequiere QR?"),t.Nb(),t.Ob(13,"ion-select",4),t.Wb("ngModelChange",(function(o){return i.servicio.requiereQR=o})),t.Ob(14,"ion-select-option",5),t.kc(15,"Si"),t.Nb(),t.Ob(16,"ion-select-option",6),t.kc(17,"No"),t.Nb(),t.Nb(),t.Nb(),t.Ob(18,"ion-item",2),t.Ob(19,"ion-label",3),t.kc(20,"\xbfContiene productos?"),t.Nb(),t.Ob(21,"ion-select",7),t.Wb("ngModelChange",(function(o){return i.servicio.producto=o}))("ionChange",(function(){return i.producto_asociado()})),t.Ob(22,"ion-select-option",5),t.kc(23,"Si"),t.Nb(),t.Ob(24,"ion-select-option",6),t.kc(25,"No"),t.Nb(),t.Nb(),t.Nb(),t.jc(26,p,13,4,"div",8),t.Ob(27,"ion-item",2),t.Ob(28,"ion-label"),t.kc(29," Agregar campo "),t.Nb(),t.Ob(30,"ion-button",9),t.Wb("click",(function(){return i.agregar_campo_formulario()})),t.Kb(31,"ion-icon",10),t.Nb(),t.Nb(),t.Nb(),t.Ob(32,"div",11),t.Ob(33,"ion-button",9),t.Wb("click",(function(){return i.crear_servicio()})),t.kc(34,"Listo"),t.Nb(),t.Nb(),t.Nb()),2&o&&(t.zb(9),t.dc("ngModel",i.servicio.nombreDelServicio),t.zb(4),t.dc("ngModel",i.servicio.requiereQR),t.zb(8),t.dc("ngModel",i.servicio.producto),t.zb(5),t.dc("ngForOf",i.formulario))},directives:[r.q,r.F,r.E,r.k,r.t,r.u,r.s,r.P,c.d,c.e,r.y,r.O,r.z,s.i,r.d,r.r,r.p,r.w,r.j,s.j],styles:[".imagen_empresa[_ngcontent-%COMP%]{width:100%}"]}),o})()},YcJ4:function(o,i,e){"use strict";e.r(i),e.d(i,"AdministrarServiciosPageModule",(function(){return f}));var t=e("ofXK"),n=e("3Pt+"),r=e("TEn/"),c=e("tyNb"),s=e("mrSG"),a=e("NKqT"),l=e("JFkf"),b=e("/+FQ"),p=e("fXoL"),u=e("+1S5");function d(o,i){if(1&o){const o=p.Pb();p.Ob(0,"ion-icon",10),p.Wb("click",(function(){p.gc(o);const i=p.Yb().$implicit;return p.Yb().borrar_servicio(i.id_servicio)})),p.Nb()}}function h(o,i){if(1&o){const o=p.Pb();p.Ob(0,"ion-icon",11),p.Wb("click",(function(){p.gc(o);const i=p.Yb().$implicit;return p.Yb().ver_servicio(i.id_servicio)})),p.Nb()}}function m(o,i){if(1&o){const o=p.Pb();p.Ob(0,"ion-item",5),p.Ob(1,"ion-label",6),p.Ob(2,"b"),p.kc(3),p.Nb(),p.Nb(),p.Ob(4,"ion-buttons"),p.jc(5,d,1,0,"ion-icon",7),p.Nb(),p.Ob(6,"ion-buttons"),p.Ob(7,"ion-icon",8),p.Wb("click",(function(){p.gc(o);const e=i.$implicit;return p.Yb().modificar_servicio(e.id_servicio)})),p.Nb(),p.Nb(),p.Ob(8,"ion-buttons"),p.jc(9,h,1,0,"ion-icon",9),p.Nb(),p.Nb()}if(2&o){const o=i.$implicit;p.zb(3),p.lc(o.nombre_servicio),p.zb(2),p.dc("ngIf",1==o.modificable),p.zb(4),p.dc("ngIf",1==o.producto)}}const v=[{path:"",component:(()=>{class o{constructor(o,i,e){this.modalController=o,this.api=i,this.alertController=e}ngOnInit(){this.actualizar_informacion()}actualizar_informacion(){this.api.mostrar_servicios().subscribe(o=>{this.servicios=o,this.servicios=this.servicios.result,console.log(this.servicios)})}crear_servicio(){return Object(s.a)(this,void 0,void 0,(function*(){const o=yield this.modalController.create({component:a.a,cssClass:"my-custom-class"});return yield o.present()}))}ver_servicio(o){return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.modalController.create({component:l.a,cssClass:"modal_grande",componentProps:{id_servicio:o}});return yield i.present()}))}borrar_servicio(o){return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.alertController.create({header:"Seguro que desea eliminar el servicio?",buttons:[{text:"No",handler:()=>{}},{text:"Si",handler:()=>{this.eliminar_servicio(o)}}]});yield i.present()}))}eliminar_servicio(o){this.api.baja_servicio(o).subscribe(o=>{console.log(o),this.actualizar_informacion()},o=>{console.log(o)})}modificar_servicio(o){return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.modalController.create({component:b.a,cssClass:"modal_grande",componentProps:{id_servicio:o}});return yield i.present()}))}}return o.\u0275fac=function(i){return new(i||o)(p.Jb(r.I),p.Jb(u.a),p.Jb(r.a))},o.\u0275cmp=p.Db({type:o,selectors:[["app-administrar-servicios"]],decls:10,vars:1,consts:[[2,"margin-left","30%","width","40%"],[2,"text-align","center"],["lines","full",1,"titulo_lista_servicios",2,"margin-bottom","20px"],[3,"click"],["lines","full","class","lista_servicios",4,"ngFor","ngForOf"],["lines","full",1,"lista_servicios"],[2,"text-align","left"],["style","margin-right: 10px;","name","trash-outline","color","danger",3,"click",4,"ngIf"],["name","create-outline",2,"margin-right","10px",3,"click"],["name","enter-outline",3,"click",4,"ngIf"],["name","trash-outline","color","danger",2,"margin-right","10px",3,"click"],["name","enter-outline",3,"click"]],template:function(o,i){1&o&&(p.Ob(0,"ion-content"),p.Ob(1,"div",0),p.Ob(2,"ion-card",1),p.Ob(3,"ion-item",2),p.Ob(4,"ion-label",1),p.Ob(5,"b"),p.kc(6,"Servicios"),p.Nb(),p.Nb(),p.Ob(7,"ion-button",3),p.Wb("click",(function(){return i.crear_servicio()})),p.kc(8," Crear servicio "),p.Nb(),p.Nb(),p.jc(9,m,10,3,"ion-item",4),p.Nb(),p.Nb(),p.Nb()),2&o&&(p.zb(9),p.dc("ngForOf",i.servicios))},directives:[r.k,r.f,r.t,r.u,r.d,t.i,r.e,t.j,r.r],styles:[".lista_servicios[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.boton_nuevo_servicio[_ngcontent-%COMP%]{--background:transparent}ion-item[_ngcontent-%COMP%]{width:100%}"]}),o})()},{path:"crear-servicio",loadChildren:()=>e.e(27).then(e.bind(null,"b/Hj")).then(o=>o.CrearServicioPageModule)},{path:"ver-servicio",loadChildren:()=>e.e(30).then(e.bind(null,"THUM")).then(o=>o.VerServicioPageModule)},{path:"modificar-servicio",loadChildren:()=>e.e(28).then(e.bind(null,"3tg3")).then(o=>o.ModificarServicioPageModule)}];let g=(()=>{class o{}return o.\u0275mod=p.Hb({type:o}),o.\u0275inj=p.Gb({factory:function(i){return new(i||o)},imports:[[c.h.forChild(v)],c.h]}),o})(),f=(()=>{class o{}return o.\u0275mod=p.Hb({type:o}),o.\u0275inj=p.Gb({factory:function(i){return new(i||o)},imports:[[t.b,n.a,r.G,g]]}),o})()}}]);