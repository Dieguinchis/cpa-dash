function _createForOfIteratorHelper(e,i){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||i&&e&&"number"==typeof e.length){o&&(e=o);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return c=e.done,e},e:function(e){s=!0,r=e},f:function(){try{c||null==o.return||o.return()}finally{if(s)throw r}}}}function _unsupportedIterableToArray(e,i){if(e){if("string"==typeof e)return _arrayLikeToArray(e,i);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,i):void 0}}function _arrayLikeToArray(e,i){(null==i||i>e.length)&&(i=e.length);for(var o=0,n=new Array(i);o<i;o++)n[o]=e[o];return n}function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var o=0;o<i.length;o++){var n=i[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,i,o){return i&&_defineProperties(e.prototype,i),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"2HF3":function(e,i,o){"use strict";o.r(i),o.d(i,"ProgramarVisitaPageModule",(function(){return L}));var n=o("ofXK"),t=o("3Pt+"),r=o("TEn/"),c=o("tyNb"),s=o("wd/R"),a=o("fXoL"),l=o("89nv"),u=o("u//c");function b(e,i){if(1&e&&(a.Mb(0,"ion-select-option",12),a.ic(1),a.Lb()),2&e){var o=i.$implicit;a.cc("value",o.id_cliente),a.zb(1),a.jc(o.razon_social_cliente)}}function d(e,i){if(1&e&&(a.Mb(0,"ion-select-option",12),a.ic(1),a.Lb()),2&e){var o=i.$implicit;a.cc("value",o.id_sucursal),a.zb(1),a.jc(o.razon_social_sucursal)}}function f(e,i){if(1&e&&(a.Mb(0,"ion-select-option",12),a.ic(1),a.Lb()),2&e){var o=i.$implicit;a.cc("value",o.id_servicio),a.zb(1),a.jc(o.nombre_servicio)}}function v(e,i){if(1&e&&(a.Mb(0,"ion-select-option",12),a.ic(1),a.Lb()),2&e){var o=i.$implicit;a.cc("value",o.id_tecnico),a.zb(1),a.lc("",o.nombre_tecnico," ",o.apellido_tecnico,"")}}function g(e,i){if(1&e){var o=a.Nb();a.Mb(0,"div"),a.Mb(1,"ion-label",15),a.ic(2),a.Lb(),a.Mb(3,"ion-item",16),a.Mb(4,"ion-label",1),a.ic(5,"Seleccionar t\xe9cnico a cargo"),a.Lb(),a.Mb(6,"ion-select",4),a.Ub("ngModelChange",(function(e){return a.ec(o),i.$implicit.tecnico=e})),a.hc(7,v,2,3,"ion-select-option",3),a.Lb(),a.Lb(),a.Lb()}if(2&e){var n=i.$implicit,t=a.Wb(2);a.zb(2),a.jc(n.nombre_equipo),a.zb(4),a.bc("ngModel",n.tecnico),a.zb(1),a.bc("ngForOf",t.listado_tecnicos)}}function p(e,i){if(1&e&&(a.Mb(0,"div",13),a.Mb(1,"h2",13),a.ic(2),a.Lb(),a.hc(3,g,8,3,"div",14),a.Lb()),2&e){var o=i.$implicit;a.zb(2),a.jc(o.nombre_servicio),a.zb(1),a.bc("ngForOf",o.equipos)}}var _,h,m,y=[{path:"",component:(_=function(){function e(i,o){var n=this;_classCallCheck(this,e),this.api=i,this.api_tecnicos=o,this.serviciosConEquipos=[],this.serviciosElegidos=[],this.serviciosParaEnviar=[],this.dayNames=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],this.monthNames=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.api.mostrar_servicios().subscribe((function(e){n.listado_servicios=e,n.listado_servicios=n.listado_servicios.result,console.log(n.listado_servicios,"servicios"),n.api.listado_equipos().subscribe((function(e){n.equipos=e.result,console.log(n.equipos,"equipos");var i,o=_createForOfIteratorHelper(n.listado_servicios);try{for(o.s();!(i=o.n()).done;){var t=i.value;t.equipos=[];var r,c=_createForOfIteratorHelper(n.equipos);try{for(c.s();!(r=c.n()).done;){var s=r.value;s.id_servicio==t.id_servicio&&t.equipos.push(s)}}catch(a){c.e(a)}finally{c.f()}t.equipos.length<1&&t.equipos.push({id_equipo:0,id_servicio:t.id_servicio,nombre_equipo:"Servicio principal"})}}catch(a){o.e(a)}finally{o.f()}console.log(n.listado_servicios,"servicios completos")}))}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.api.listado_clientes().subscribe((function(i){e.listado_clientes=i,e.listado_clientes=e.listado_clientes.result,console.log(e.listado_clientes)})),this.api_tecnicos.listado_tecnicos().subscribe((function(i){e.listado_tecnicos=i,e.listado_tecnicos=e.listado_tecnicos.result,console.log(e.listado_tecnicos)}),(function(e){console.log(e)})),this.fecha_actual=s().format()}},{key:"sucursalesCliente",value:function(e){var i=this;this.api.informacion_cliente(e).subscribe((function(o){i.listado_sucursales_cliente=o,console.log(o),i.listado_sucursales_cliente=i.listado_sucursales_cliente.result.sucursales.datosSucursal,i.sucursal_elegida=null,i.id_cliente_elegido=e,console.log(i.listado_sucursales_cliente)}))}},{key:"programarVisita",value:function(){var e,i=_createForOfIteratorHelper(this.serviciosElegidos);try{for(i.s();!(e=i.n()).done;){var o,n=e.value,t=_createForOfIteratorHelper(n.equipos);try{for(t.s();!(o=t.n()).done;){var r=o.value;this.serviciosParaEnviar.push({id_servicio:n.id_servicio,id_tecnico:r.tecnico,id_equipo:r.id_equipo})}}catch(c){t.e(c)}finally{t.f()}}}catch(c){i.e(c)}finally{i.f()}console.log(this.serviciosParaEnviar),this.api.crear_visita({id_cliente:this.id_cliente_elegido,id_sucursal:this.sucursal_elegida,servicios:this.serviciosParaEnviar,fecha_visita:this.fecha_elegida}).subscribe((function(e){console.log(e),location.reload()}))}},{key:"test",value:function(){this.serviciosElegidos=[];var e,i=_createForOfIteratorHelper(this.servicios_elegidosAux);try{for(i.s();!(e=i.n()).done;){var o,n=e.value,t=_createForOfIteratorHelper(this.listado_servicios);try{for(t.s();!(o=t.n()).done;){var r=o.value;r.id_servicio==n&&this.serviciosElegidos.push(r)}}catch(c){t.e(c)}finally{t.f()}}}catch(c){i.e(c)}finally{i.f()}console.log(this.serviciosElegidos)}}]),e}(),_.\u0275fac=function(e){return new(e||_)(a.Jb(l.a),a.Jb(u.a))},_.\u0275cmp=a.Db({type:_,selectors:[["app-programar-visita"]],decls:26,vars:13,consts:[[2,"margin-top","15px"],["fixed","",2,"text-align","center"],[3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],["multiple","true",3,"ngModel","ngModelChange","ionChange"],["style","text-align: center;",4,"ngFor","ngForOf"],["displayFormat","DDDD D MMMM YYYY HH:mm","max","2022",3,"ngModel","doneText","cancelText","monthNames","dayNames","min","value","ngModelChange"],[2,"width","100%","text-align","center"],[3,"click"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"],[3,"value"],[2,"text-align","center"],[4,"ngFor","ngForOf"],["fixed","",2,"text-align","center","color","var(--ion-color-secondary)","font-weight","bold"],[2,"margin-top","10px"]],template:function(e,i){1&e&&(a.Mb(0,"ion-content"),a.Mb(1,"ion-item",0),a.Mb(2,"ion-label",1),a.ic(3,"Seleccionar un cliente"),a.Lb(),a.Mb(4,"ion-select",2),a.Ub("ionChange",(function(e){return i.sucursalesCliente(e.target.value)})),a.hc(5,b,2,2,"ion-select-option",3),a.Lb(),a.Lb(),a.Mb(6,"ion-item"),a.Mb(7,"ion-label",1),a.ic(8,"Seleccionar una sucursal"),a.Lb(),a.Mb(9,"ion-select",4),a.Ub("ngModelChange",(function(e){return i.sucursal_elegida=e})),a.hc(10,d,2,2,"ion-select-option",3),a.Lb(),a.Lb(),a.Mb(11,"ion-item"),a.Mb(12,"ion-label",1),a.ic(13,"Seleccionar servicios a ofrecer"),a.Lb(),a.Mb(14,"ion-select",5),a.Ub("ngModelChange",(function(e){return i.servicios_elegidosAux=e}))("ionChange",(function(){return i.test()})),a.hc(15,f,2,2,"ion-select-option",3),a.Lb(),a.Lb(),a.hc(16,p,4,2,"div",6),a.Mb(17,"ion-item"),a.Mb(18,"ion-label",1),a.ic(19,"Elegir una fecha"),a.Lb(),a.Mb(20,"ion-datetime",7),a.Ub("ngModelChange",(function(e){return i.fecha_elegida=e})),a.Lb(),a.Lb(),a.Mb(21,"div",8),a.Mb(22,"ion-button",9),a.Ub("click",(function(){return i.programarVisita()})),a.ic(23,"Agendar"),a.Lb(),a.Lb(),a.Mb(24,"div",10),a.Kb(25,"img",11),a.Lb(),a.Lb()),2&e&&(a.zb(5),a.bc("ngForOf",i.listado_clientes),a.zb(4),a.bc("ngModel",i.sucursal_elegida),a.zb(1),a.bc("ngForOf",i.listado_sucursales_cliente),a.zb(4),a.bc("ngModel",i.servicios_elegidosAux),a.zb(1),a.bc("ngForOf",i.listado_servicios),a.zb(1),a.bc("ngForOf",i.serviciosElegidos),a.zb(4),a.cc("min",i.fecha_actual),a.cc("value",i.fecha_actual),a.bc("ngModel",i.fecha_elegida)("doneText","Listo")("cancelText","Cancelar")("monthNames",i.monthNames)("dayNames",i.dayNames))},directives:[r.g,r.m,r.n,r.q,r.I,n.i,t.d,t.e,r.h,r.c,r.r],styles:["ion-item[_ngcontent-%COMP%]{margin-bottom:10px}.imagen_empresa[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]{width:50%;margin-left:25%}h2[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]}),_)}],M=((m=function e(){_classCallCheck(this,e)}).\u0275mod=a.Hb({type:m}),m.\u0275inj=a.Gb({factory:function(e){return new(e||m)},imports:[[c.h.forChild(y)],c.h]}),m),L=((h=function e(){_classCallCheck(this,e)}).\u0275mod=a.Hb({type:h}),h.\u0275inj=a.Gb({factory:function(e){return new(e||h)},imports:[[n.b,t.a,r.A,M]]}),h)}}]);