(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"2HF3":function(i,e,o){"use strict";o.r(e),o.d(e,"ProgramarVisitaPageModule",(function(){return v}));var s=o("ofXK"),t=o("3Pt+"),c=o("TEn/"),n=o("tyNb"),l=o("wd/R"),a=o("fXoL"),r=o("89nv"),b=o("u//c");function u(i,e){if(1&i&&(a.Mb(0,"ion-select-option",12),a.ic(1),a.Lb()),2&i){const i=e.$implicit;a.cc("value",i.id_cliente),a.zb(1),a.jc(i.razon_social_cliente)}}function d(i,e){if(1&i&&(a.Mb(0,"ion-select-option",12),a.ic(1),a.Lb()),2&i){const i=e.$implicit;a.cc("value",i.id_sucursal),a.zb(1),a.jc(i.razon_social_sucursal)}}function g(i,e){if(1&i&&(a.Mb(0,"ion-select-option",12),a.ic(1),a.Lb()),2&i){const i=e.$implicit;a.cc("value",i.id_servicio),a.zb(1),a.jc(i.nombre_servicio)}}function h(i,e){if(1&i&&(a.Mb(0,"ion-select-option",12),a.ic(1),a.Lb()),2&i){const i=e.$implicit;a.cc("value",i.id_tecnico),a.zb(1),a.lc("",i.nombre_tecnico," ",i.apellido_tecnico,"")}}function _(i,e){if(1&i){const i=a.Nb();a.Mb(0,"div"),a.Mb(1,"ion-label",15),a.ic(2),a.Lb(),a.Mb(3,"ion-item",16),a.Mb(4,"ion-label",1),a.ic(5,"Seleccionar t\xe9cnico a cargo"),a.Lb(),a.Mb(6,"ion-select",4),a.Ub("ngModelChange",(function(o){return a.ec(i),e.$implicit.tecnico=o})),a.hc(7,h,2,3,"ion-select-option",3),a.Lb(),a.Lb(),a.Lb()}if(2&i){const i=e.$implicit,o=a.Wb(2);a.zb(2),a.jc(i.nombre_equipo),a.zb(4),a.bc("ngModel",i.tecnico),a.zb(1),a.bc("ngForOf",o.listado_tecnicos)}}function p(i,e){if(1&i&&(a.Mb(0,"div",13),a.Mb(1,"h2",13),a.ic(2),a.Lb(),a.hc(3,_,8,3,"div",14),a.Lb()),2&i){const i=e.$implicit;a.zb(2),a.jc(i.nombre_servicio),a.zb(1),a.bc("ngForOf",i.equipos)}}const m=[{path:"",component:(()=>{class i{constructor(i,e){this.api=i,this.api_tecnicos=e,this.serviciosConEquipos=[],this.serviciosElegidos=[],this.serviciosParaEnviar=[],this.dayNames=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],this.monthNames=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.api.mostrar_servicios().subscribe(i=>{this.listado_servicios=i,this.listado_servicios=this.listado_servicios.result,console.log(this.listado_servicios,"servicios"),this.api.listado_equipos().subscribe(i=>{this.equipos=i.result,console.log(this.equipos,"equipos");for(let e of this.listado_servicios){e.equipos=[];for(let i of this.equipos)i.id_servicio==e.id_servicio&&e.equipos.push(i)}console.log(this.listado_servicios,"servicios completos")})})}ngOnInit(){this.api.listado_clientes().subscribe(i=>{this.listado_clientes=i,this.listado_clientes=this.listado_clientes.result,console.log(this.listado_clientes)}),this.api_tecnicos.listado_tecnicos().subscribe(i=>{this.listado_tecnicos=i,this.listado_tecnicos=this.listado_tecnicos.result,console.log(this.listado_tecnicos)},i=>{console.log(i)}),this.fecha_actual=l().format()}sucursalesCliente(i){this.api.informacion_cliente(i).subscribe(e=>{this.listado_sucursales_cliente=e,console.log(e),this.listado_sucursales_cliente=this.listado_sucursales_cliente.result.sucursales.datosSucursal,this.sucursal_elegida=null,this.id_cliente_elegido=i,console.log(this.listado_sucursales_cliente)})}programarVisita(){for(let i of this.serviciosElegidos)for(let e of i.equipos)this.serviciosParaEnviar.push({id_servicio:i.id_servicio,id_tecnico:e.tecnico,id_equipo:e.id_equipo});console.log(this.serviciosParaEnviar),this.api.crear_visita({id_cliente:this.id_cliente_elegido,id_sucursal:this.sucursal_elegida,servicios:this.serviciosParaEnviar,fecha_visita:this.fecha_elegida}).subscribe(i=>{console.log(i),location.reload()})}test(){this.serviciosElegidos=[];for(let i of this.servicios_elegidosAux)for(let e of this.listado_servicios)e.id_servicio==i&&this.serviciosElegidos.push(e);console.log(this.serviciosElegidos)}}return i.\u0275fac=function(e){return new(e||i)(a.Jb(r.a),a.Jb(b.a))},i.\u0275cmp=a.Db({type:i,selectors:[["app-programar-visita"]],decls:26,vars:13,consts:[[2,"margin-top","15px"],["fixed","",2,"text-align","center"],[3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],["multiple","true",3,"ngModel","ngModelChange","ionChange"],["style","text-align: center;",4,"ngFor","ngForOf"],["displayFormat","DDDD D MMMM YYYY HH:mm","max","2022",3,"ngModel","doneText","cancelText","monthNames","dayNames","min","value","ngModelChange"],[2,"width","100%","text-align","center"],[3,"click"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"],[3,"value"],[2,"text-align","center"],[4,"ngFor","ngForOf"],["fixed","",2,"text-align","center","color","var(--ion-color-secondary)","font-weight","bold"],[2,"margin-top","10px"]],template:function(i,e){1&i&&(a.Mb(0,"ion-content"),a.Mb(1,"ion-item",0),a.Mb(2,"ion-label",1),a.ic(3,"Seleccionar un cliente"),a.Lb(),a.Mb(4,"ion-select",2),a.Ub("ionChange",(function(i){return e.sucursalesCliente(i.target.value)})),a.hc(5,u,2,2,"ion-select-option",3),a.Lb(),a.Lb(),a.Mb(6,"ion-item"),a.Mb(7,"ion-label",1),a.ic(8,"Seleccionar una sucursal"),a.Lb(),a.Mb(9,"ion-select",4),a.Ub("ngModelChange",(function(i){return e.sucursal_elegida=i})),a.hc(10,d,2,2,"ion-select-option",3),a.Lb(),a.Lb(),a.Mb(11,"ion-item"),a.Mb(12,"ion-label",1),a.ic(13,"Seleccionar servicios a ofrecer"),a.Lb(),a.Mb(14,"ion-select",5),a.Ub("ngModelChange",(function(i){return e.servicios_elegidosAux=i}))("ionChange",(function(){return e.test()})),a.hc(15,g,2,2,"ion-select-option",3),a.Lb(),a.Lb(),a.hc(16,p,4,2,"div",6),a.Mb(17,"ion-item"),a.Mb(18,"ion-label",1),a.ic(19,"Elegir una fecha"),a.Lb(),a.Mb(20,"ion-datetime",7),a.Ub("ngModelChange",(function(i){return e.fecha_elegida=i})),a.Lb(),a.Lb(),a.Mb(21,"div",8),a.Mb(22,"ion-button",9),a.Ub("click",(function(){return e.programarVisita()})),a.ic(23,"Agendar"),a.Lb(),a.Lb(),a.Mb(24,"div",10),a.Kb(25,"img",11),a.Lb(),a.Lb()),2&i&&(a.zb(5),a.bc("ngForOf",e.listado_clientes),a.zb(4),a.bc("ngModel",e.sucursal_elegida),a.zb(1),a.bc("ngForOf",e.listado_sucursales_cliente),a.zb(4),a.bc("ngModel",e.servicios_elegidosAux),a.zb(1),a.bc("ngForOf",e.listado_servicios),a.zb(1),a.bc("ngForOf",e.serviciosElegidos),a.zb(4),a.cc("min",e.fecha_actual),a.cc("value",e.fecha_actual),a.bc("ngModel",e.fecha_elegida)("doneText","Listo")("cancelText","Cancelar")("monthNames",e.monthNames)("dayNames",e.dayNames))},directives:[c.g,c.m,c.n,c.q,c.I,s.i,t.d,t.e,c.h,c.c,c.r],styles:["ion-item[_ngcontent-%COMP%]{margin-bottom:10px}.imagen_empresa[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]{width:50%;margin-left:25%}h2[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]}),i})()}];let f=(()=>{class i{}return i.\u0275mod=a.Hb({type:i}),i.\u0275inj=a.Gb({factory:function(e){return new(e||i)},imports:[[n.h.forChild(m)],n.h]}),i})(),v=(()=>{class i{}return i.\u0275mod=a.Hb({type:i}),i.\u0275inj=a.Gb({factory:function(e){return new(e||i)},imports:[[s.b,t.a,c.A,f]]}),i})()}}]);