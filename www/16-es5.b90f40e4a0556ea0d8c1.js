function _createForOfIteratorHelper(e,o){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||o&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var t,a=!0,c=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){c=!0,t=e},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw t}}}}function _unsupportedIterableToArray(e,o){if(e){if("string"==typeof e)return _arrayLikeToArray(e,o);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,o):void 0}}function _arrayLikeToArray(e,o){(null==o||o>e.length)&&(o=e.length);for(var i=0,n=new Array(o);i<o;i++)n[i]=e[i];return n}function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,o){for(var i=0;i<o.length;i++){var n=o[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,o,i){return o&&_defineProperties(e.prototype,o),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"1mX4":function(e,o,i){"use strict";i.d(o,"a",(function(){return u}));var n=i("fXoL"),r=i("TEn/"),t=i("jCJ1"),a=i("ofXK"),c=i("3Pt+");function s(e,o){if(1&e){var i=n.Pb();n.Ob(0,"ion-content"),n.Ob(1,"ion-item",2),n.Ob(2,"ion-label",3),n.kc(3," Razon social: "),n.Nb(),n.Ob(4,"ion-input",4),n.Wb("ngModelChange",(function(e){return n.gc(i),n.Yb().razon_social=e})),n.Nb(),n.Nb(),n.Ob(5,"ion-item",2),n.Ob(6,"ion-label",3),n.kc(7," Telefono: (solo numeros) "),n.Nb(),n.Ob(8,"ion-input",4),n.Wb("ngModelChange",(function(e){return n.gc(i),n.Yb().telefono=e})),n.Nb(),n.Nb(),n.Ob(9,"ion-item",2),n.Ob(10,"ion-label",3),n.kc(11," Email: "),n.Nb(),n.Ob(12,"ion-input",4),n.Wb("ngModelChange",(function(e){return n.gc(i),n.Yb().email=e})),n.Nb(),n.Nb(),n.Ob(13,"ion-item",2),n.Ob(14,"ion-label",3),n.kc(15," Direccion: "),n.Nb(),n.Ob(16,"ion-input",4),n.Wb("ngModelChange",(function(e){return n.gc(i),n.Yb().direccion=e})),n.Nb(),n.Nb(),n.Ob(17,"div",5),n.Ob(18,"ion-button",6),n.Wb("click",(function(){return n.gc(i),n.Yb().modificar_sucursal()})),n.kc(19,"Modificar"),n.Nb(),n.Nb(),n.Ob(20,"div",7),n.Kb(21,"img",8),n.Nb(),n.Nb()}if(2&e){var r=n.Yb();n.zb(4),n.dc("ngModel",r.razon_social),n.zb(4),n.dc("ngModel",r.telefono),n.zb(4),n.dc("ngModel",r.email),n.zb(4),n.dc("ngModel",r.direccion)}}var u=function(){var e=function(){function e(o,i,n){_classCallCheck(this,e),this.navParams=o,this.api=i,this.modalCtrl=n,this.id_sucursal=this.navParams.get("id_sucursal")}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.api.ver_sucursal(this.id_sucursal).subscribe((function(o){console.log(o),e.sucursal=o,e.sucursal=e.sucursal.result,e.razon_social=e.sucursal.sucursal[0].razon_social_sucursal,e.email=e.sucursal.sucursal[0].email_sucursal,e.telefono=e.sucursal.sucursal[0].telefono_sucursal,e.direccion=e.sucursal.sucursal[0].direccion_sucursal,e.id_cliente=e.sucursal.sucursal[0].id_cliente}),(function(e){console.log(e)}))}},{key:"modificar_sucursal",value:function(){var e=this;this.objeto={id_cliente:this.id_cliente,id_sucursal:this.id_sucursal,razon_social_sucursal:this.razon_social,direccion_sucursal:this.direccion,telefono_sucursal:this.telefono,email_sucursal:this.email},console.log(this.objeto),this.api.modificar_sucursal(this.objeto).subscribe((function(o){console.log(o),e.modalCtrl.dismiss({dismissed:!0})}),(function(e){console.log(e)}))}}]),e}();return e.\u0275fac=function(o){return new(o||e)(n.Jb(r.K),n.Jb(t.a),n.Jb(r.I))},e.\u0275cmp=n.Db({type:e,selectors:[["app-modificar-sucursal"]],decls:5,vars:1,consts:[["color","primary",2,"text-align","center"],[4,"ngIf"],["lines","full"],[1,"titulos"],[3,"ngModel","ngModelChange"],[2,"width","100%","text-align","center","margin-top","10px"],[3,"click"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"]],template:function(e,o){1&e&&(n.Ob(0,"ion-header"),n.Ob(1,"ion-toolbar",0),n.Ob(2,"ion-title"),n.kc(3,"Modificar sucursal"),n.Nb(),n.Nb(),n.Nb(),n.jc(4,s,22,4,"ion-content",1)),2&e&&(n.zb(4),n.dc("ngIf",o.sucursal))},directives:[r.q,r.F,r.E,a.j,r.k,r.t,r.u,r.s,r.P,c.d,c.e,r.d],styles:[""]}),e}()},aaHe:function(e,o,i){"use strict";i.d(o,"a",(function(){return m}));var n=i("mrSG"),r=i("fXoL"),t=i("jCJ1"),a=i("+1S5"),c=i("TEn/"),s=i("3Pt+"),u=i("ofXK");function l(e,o){if(1&e&&(r.Ob(0,"div"),r.Ob(1,"ion-select-option",8),r.kc(2),r.Nb(),r.Nb()),2&e){var i=r.Yb().$implicit;r.zb(1),r.ec("value",i.id_servicio),r.zb(1),r.lc(i.nombre_servicio)}}function b(e,o){if(1&e&&(r.Ob(0,"div"),r.jc(1,l,3,2,"div",5),r.Nb()),2&e){var i=o.$implicit;r.zb(1),r.dc("ngIf",1==i.qr)}}function d(e,o){if(1&e&&(r.Ob(0,"div"),r.Ob(1,"div"),r.Ob(2,"ion-select-option",8),r.kc(3),r.Nb(),r.Nb(),r.Nb()),2&e){var i=o.$implicit;r.zb(2),r.ec("value",i.id_producto),r.zb(1),r.lc(i.nombre_producto+" - "+i.tipo_producto)}}function p(e,o){if(1&e){var i=r.Pb();r.Ob(0,"ion-item"),r.Ob(1,"ion-label"),r.kc(2,"Producto Predeterminado"),r.Nb(),r.Ob(3,"ion-select",1),r.Wb("ngModelChange",(function(e){return r.gc(i),r.Yb().producto_predeterminado=e})),r.jc(4,d,4,2,"div",4),r.Ob(5,"ion-select-option",9),r.kc(6,"Sin Producto"),r.Nb(),r.Nb(),r.Nb()}if(2&e){var n=r.Yb();r.zb(3),r.dc("ngModel",n.producto_predeterminado),r.zb(1),r.dc("ngForOf",n.productos)}}var m=function(){var e=function(){function e(o,i,n,r,t){_classCallCheck(this,e),this.api_clientes=o,this.api_servicios=i,this.navParams=n,this.modalCtrl=r,this.alertController=t,this.id_sucursal=this.navParams.get("id_sucursal"),this.equipo_grupo=this.navParams.get("equipo_grupo")}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;console.log(this.equipo_grupo),this.api_clientes.listado_productosServicio(20).subscribe((function(o){console.log(o),e.productos=o.result})),console.log(this.id_sucursal),this.api_servicios.mostrar_servicios().subscribe((function(o){e.servicios=o,e.servicios=e.servicios.result,console.log(e.servicios)}))}},{key:"alta_workstation",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o,i,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("20"!=this.id_servicio){e.next=17;break}if(!this.id_servicio){e.next=14;break}if(o=this.equipo_grupo.equipos.filter((function(e){return e.zona==r.zona_workstation})),console.log("EQUIPOSZONA",o,o.some((function(e){return e.nro_equipo==r.nro_workstation}))),!o.some((function(e){return e.nro_equipo==r.nro_workstation}))||0==o.length){e.next=11;break}return e.next=6,this.alertController.create({header:"Error",message:"Ya existe un equipo con ese numero en la zona.",buttons:["OK"]});case 6:return i=e.sent,e.next=9,i.present();case 9:e.next=12;break;case 11:this.zona_workstation||(this.zona_workstation=this.nombre_workstation),this.nombre_workstation||(this.nombre_workstation=this.zona_workstation),this.object={nombre_equipos:this.nombre_workstation,id_servicio:this.id_servicio,id_sucursal:this.id_sucursal,id_equipo_grupo:this.equipo_grupo.id_equipo_grupo,producto_predeterminado:Number(this.producto_predeterminado),zona:this.zona_workstation,nro_equipo:this.nro_workstation},console.log(this.object),this.api_servicios.alta_workstation(this.object).subscribe((function(e){console.log(e.equipoCreado.insertId),r.modalCtrl.dismiss({dismissed:!0,data:{qr:1,nombre_equipos:r.nombre_workstation,id_servicio:r.id_servicio,id_equipo:e.equipoCreado.insertId,id_sucursal:r.id_sucursal,id_equipo_grupo:r.equipo_grupo.id_equipo_grupo,estado_servicio:"alta",modificable:0,producto_predeterminado:r.producto_predeterminado},id:e.equipoCreado.insertId})}));case 12:e.next=15;break;case 14:this.presentAlert();case 15:e.next=30;break;case 17:if(!this.id_servicio){e.next=29;break}if(!(o=this.equipo_grupo.equipos.filter((function(e){return e.zona==r.zona_workstation}))).some((function(e){return e.nro_equipo==r.nro_workstation}))){e.next=26;break}return e.next=21,this.alertController.create({header:"Error",message:"Ya existe un equipo con ese numero en la zona.",buttons:["OK"]});case 21:return n=e.sent,e.next=24,n.present();case 24:e.next=27;break;case 26:this.zona_workstation||(this.zona_workstation=this.nombre_workstation),this.nombre_workstation||(this.nombre_workstation=this.zona_workstation),this.object={nombre_equipos:this.nombre_workstation,id_servicio:this.id_servicio,id_sucursal:this.id_sucursal,id_equipo_grupo:this.equipo_grupo.id_equipo_grupo,zona:this.zona_workstation,nro_equipo:this.nro_workstation},console.log(this.object),this.api_servicios.alta_workstation(this.object).subscribe((function(e){console.log(e.equipoCreado.insertId),r.modalCtrl.dismiss({dismissed:!0,data:{qr:1,nombre_equipos:r.nombre_workstation,id_servicio:r.id_servicio,id_equipo:e.equipoCreado.insertId,id_sucursal:r.id_sucursal,id_equipo_grupo:r.equipo_grupo.id_equipo_grupo,estado_servicio:"alta",modificable:0},id:e.equipoCreado.insertId})}));case 27:e.next=30;break;case 29:this.presentAlert();case 30:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({message:"Para crear la workstation debes seleccionar el servicio que cumple",buttons:["OK"]});case 2:return o=e.sent,e.next=5,o.present();case 5:case"end":return e.stop()}}),e,this)})))}}]),e}();return e.\u0275fac=function(o){return new(o||e)(r.Jb(t.a),r.Jb(a.a),r.Jb(c.K),r.Jb(c.I),r.Jb(c.a))},e.\u0275cmp=r.Db({type:e,selectors:[["app-alta-workstation"]],decls:22,vars:6,consts:[["lines","full"],[3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange","ionChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"text-align","center"],["expand","full",3,"click"],[3,"value"],["value","null"]],template:function(e,o){1&e&&(r.Ob(0,"ion-content"),r.Ob(1,"ion-item",0),r.Ob(2,"ion-label"),r.kc(3,"Nombre del workstation: "),r.Nb(),r.Ob(4,"ion-input",1),r.Wb("ngModelChange",(function(e){return o.nombre_workstation=e})),r.Nb(),r.Nb(),r.Ob(5,"ion-item",0),r.Ob(6,"ion-label"),r.kc(7,"Zona del workstation: "),r.Nb(),r.Ob(8,"ion-input",1),r.Wb("ngModelChange",(function(e){return o.zona_workstation=e})),r.Nb(),r.Nb(),r.Ob(9,"ion-item",0),r.Ob(10,"ion-label"),r.kc(11,"Numero del workstation: "),r.Nb(),r.Ob(12,"ion-input",2),r.Wb("ngModelChange",(function(e){return o.nro_workstation=e})),r.Nb(),r.Nb(),r.Ob(13,"ion-item",0),r.Ob(14,"ion-label"),r.kc(15,"Servicio que cumple"),r.Nb(),r.Ob(16,"ion-select",3),r.Wb("ngModelChange",(function(e){return o.id_servicio=e}))("ionChange",(function(){return o.producto_predeterminado=null})),r.jc(17,b,2,1,"div",4),r.Nb(),r.Nb(),r.jc(18,p,7,2,"ion-item",5),r.Ob(19,"div",6),r.Ob(20,"ion-button",7),r.Wb("click",(function(){return o.alta_workstation()})),r.kc(21,"Dar de alta"),r.Nb(),r.Nb(),r.Nb()),2&e&&(r.zb(4),r.dc("ngModel",o.nombre_workstation),r.zb(4),r.dc("ngModel",o.zona_workstation),r.zb(4),r.dc("ngModel",o.nro_workstation),r.zb(4),r.dc("ngModel",o.id_servicio),r.zb(1),r.dc("ngForOf",o.servicios),r.zb(1),r.dc("ngIf","20"==o.id_servicio))},directives:[c.k,c.t,c.u,c.s,c.P,s.d,s.e,c.L,c.y,c.O,u.i,u.j,c.d,c.z],styles:["ion-content[_ngcontent-%COMP%]{--background:#dfdfdf;border:2px solid #000}"]}),e}()},cZ9Q:function(e,o,i){"use strict";i.d(o,"a",(function(){return j}));var n=i("mrSG"),r=i("aaHe"),t=i("AytR"),a=i("fXoL"),c=i("TEn/"),s=i("jCJ1"),u=i("X9o6"),l=i("+1S5"),b=i("89nv"),d=i("ofXK");function p(e,o){if(1&e){var i=a.Pb();a.Ob(0,"ion-icon",30),a.Wb("click",(function(){return a.gc(i),a.Yb(2).deleteImprimirQrSucursal()})),a.Nb()}if(2&e){var n=a.Yb(2);a.dc("title","Eliminar QR de la lista ("+n.showDeleteQrSucursal.count+")")}}function m(e,o){1&e&&(a.Ob(0,"div"),a.Ob(1,"ion-item"),a.Ob(2,"ion-label",31),a.kc(3,"No se encontraron WorkStation"),a.Nb(),a.Nb(),a.Nb())}function f(e,o){1&e&&(a.Ob(0,"div",32),a.Kb(1,"ion-spinner",33),a.Nb())}function g(e,o){1&e&&(a.Ob(0,"ion-label"),a.Ob(1,"b"),a.kc(2,"Producto predeterminado"),a.Nb(),a.Nb())}function h(e,o){1&e&&(a.Ob(0,"div"),a.Ob(1,"ion-item"),a.Ob(2,"ion-label",31),a.kc(3,"No se encontraron equipos"),a.Nb(),a.Nb(),a.Nb())}function _(e,o){if(1&e){var i=a.Pb();a.Ob(0,"ion-label"),a.kc(1),a.Ob(2,"ion-icon",54),a.Wb("click",(function(){a.gc(i);var e=a.Yb(2).$implicit;return a.Yb(5).elegirProducto(e)})),a.Nb(),a.Nb()}if(2&e){var n=a.Yb(2).$implicit;a.zb(1),a.mc(" ",n.producto_predeterminado_nombre?n.producto_predeterminado_nombre:"Sin producto"," ")}}function v(e,o){if(1&e){var i=a.Pb();a.Ob(0,"img",55),a.Wb("click",(function(){a.gc(i);var e=a.Yb(2).$implicit;return a.Yb(5).descargarQrEquipo(e)})),a.Nb()}if(2&e){var n=a.Yb(2).$implicit;a.dc("src",n.codigo_qr_equipo,a.hc)}}function k(e,o){if(1&e){var i=a.Pb();a.Ob(0,"img",55),a.Wb("click",(function(){a.gc(i);var e=a.Yb(2).$implicit;return a.Yb(5).descargarQrEquipo(e)})),a.Nb()}if(2&e){var n=a.Yb(2).$implicit;a.dc("src",n.codigo_qr_equipo,a.hc)}}function O(e,o){if(1&e){var i=a.Pb();a.Ob(0,"ion-icon",30),a.Wb("click",(function(){a.gc(i);var e=a.Yb(2),o=e.$implicit,n=e.index,r=a.Yb(2).index;return a.Yb(3).deleteImprimirQr(o,n,r)})),a.Nb()}if(2&e){var n=a.Yb(2).index,r=a.Yb(2).index,t=a.Yb(3);a.dc("title","Eliminar QR de la lista ("+t.showDeleteQr[r][n].count+")")}}function N(e,o){if(1&e){var i=a.Pb();a.Ob(0,"ion-row",46),a.Ob(1,"ion-col",47),a.Ob(2,"ion-label"),a.kc(3),a.Nb(),a.Nb(),a.Ob(4,"ion-col",48),a.jc(5,_,3,1,"ion-label",0),a.Nb(),a.Ob(6,"ion-col",49),a.Ob(7,"ion-label"),a.kc(8),a.Nb(),a.Nb(),a.Ob(9,"ion-col",43),a.Ob(10,"ion-card",14),a.Ob(11,"div"),a.Ob(12,"a",15),a.Wb("click",(function(){a.gc(i);var e=a.Yb().$implicit;return a.Yb(5).descargarQrEquipo(e)})),a.jc(13,v,1,1,"img",50),a.jc(14,k,1,1,"img",50),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(15,"ion-col",11),a.Ob(16,"ion-icon",18),a.Wb("click",(function(){a.gc(i);var e=a.Yb().$implicit;return a.Yb(5).descargarQrEquipo(e)})),a.Nb(),a.Ob(17,"ion-icon",51),a.Wb("click",(function(){a.gc(i);var e=a.Yb(),o=e.$implicit,n=e.index,r=a.Yb(2).index;return a.Yb(3).addmprimirQr(o,n,r)})),a.Nb(),a.jc(18,O,1,1,"ion-icon",19),a.Nb(),a.Ob(19,"ion-col",5),a.Ob(20,"ion-icon",36),a.Wb("click",(function(){a.gc(i);var e=a.Yb(),o=e.$implicit,n=e.index,r=a.Yb(2).index;return a.Yb(3).borrar_equipo(o,r,n)})),a.Nb(),a.Ob(21,"ion-icon",52),a.Wb("click",(function(){a.gc(i);var e=a.Yb().$implicit,o=a.Yb(2).$implicit;return a.Yb(3).editName(e,o)})),a.Nb(),a.Ob(22,"ion-icon",53),a.Wb("click",(function(){a.gc(i);var e=a.Yb().$implicit;return a.Yb(5).actualizarEquipo(e)})),a.Nb(),a.Nb(),a.Nb()}if(2&e){var n=a.Yb(),r=n.$implicit,t=n.index,c=a.Yb(2).index,s=a.Yb(3);a.zb(3),a.mc(" ",r.nombre," "),a.zb(2),a.dc("ngIf",20==r.id_servicio),a.zb(3),a.lc(r.nombre_servicio),a.zb(5),a.dc("ngIf",r.actualizado),a.zb(1),a.dc("ngIf",!r.actualizado),a.zb(4),a.dc("ngIf",s.showDeleteQr[c][t].show)}}function q(e,o){if(1&e&&(a.Ob(0,"div"),a.jc(1,N,23,6,"ion-row",45),a.Nb()),2&e){var i=o.$implicit;a.zb(1),a.dc("ngIf",null!=i.nombre_equipo)}}function w(e,o){if(1&e&&(a.Ob(0,"div"),a.jc(1,q,2,1,"div",44),a.Nb()),2&e){var i=a.Yb().$implicit;a.zb(1),a.dc("ngForOf",i.equipos)}}function y(e,o){if(1&e){var i=a.Pb();a.Ob(0,"div",21),a.Ob(1,"ion-grid"),a.Ob(2,"ion-row"),a.Ob(3,"ion-col",35),a.kc(4),a.Ob(5,"ion-icon",36),a.Wb("click",(function(){a.gc(i);var e=o.$implicit,n=o.index;return a.Yb(3).borrar_equipo_grupo(e.id_equipo_grupo,n)})),a.Nb(),a.Nb(),a.Ob(6,"ion-col",37),a.Ob(7,"ion-item",38),a.Ob(8,"ion-icon",39),a.Wb("click",(function(){a.gc(i);var e=o.$implicit;return a.Yb(3).descargarQrThisWorkstation(e)})),a.Nb(),a.Ob(9,"ion-icon",40),a.Wb("click",(function(){a.gc(i);var e=o.$implicit;return a.Yb(3).imprimirQrThisWorkstation(e)})),a.Nb(),a.Ob(10,"ion-button",15),a.Wb("click",(function(){a.gc(i);var e=o.$implicit,n=o.index;return a.Yb(3).altaWorkstation(e,n)})),a.kc(11,"Agregar workstation"),a.Nb(),a.Ob(12,"ion-button",15),a.Wb("click",(function(){a.gc(i);var e=o.$implicit;return a.Yb(3).elegirPlano(e)})),a.kc(13,"Asignar plano"),a.Nb(),a.Ob(14,"ion-button",15),a.Wb("click",(function(){a.gc(i);var e=o.$implicit;return a.Yb(3).cambiarProductoSector(e)})),a.kc(15,"Producto predeterminado"),a.Nb(),a.Nb(),a.Nb(),a.Ob(16,"ion-col",41),a.Ob(17,"p"),a.kc(18),a.Nb(),a.Nb(),a.Nb(),a.Ob(19,"ion-item",9),a.Ob(20,"ion-grid"),a.Ob(21,"ion-row"),a.Ob(22,"ion-col",11),a.Ob(23,"ion-label"),a.Ob(24,"b"),a.kc(25,"Workstation"),a.Nb(),a.Nb(),a.Nb(),a.Ob(26,"ion-col",10),a.jc(27,g,3,0,"ion-label",0),a.Nb(),a.Ob(28,"ion-col",42),a.Ob(29,"ion-label"),a.Ob(30,"b"),a.kc(31,"Servicio"),a.Nb(),a.Nb(),a.Nb(),a.Ob(32,"ion-col",43),a.Ob(33,"ion-label"),a.Ob(34,"b"),a.kc(35,"Codigo QR"),a.Nb(),a.Nb(),a.Nb(),a.Ob(36,"ion-col",11),a.Kb(37,"ion-label"),a.Nb(),a.Ob(38,"ion-col",5),a.Ob(39,"ion-label"),a.Ob(40,"b"),a.kc(41,"Acciones"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.jc(42,h,4,0,"div",0),a.jc(43,w,2,1,"div",0),a.Nb(),a.Nb()}if(2&e){var n=o.$implicit;a.zb(4),a.mc(" ",n.nombre_equipo_grupo," "),a.zb(14),a.lc(n.plano?n.plano.name:"Sin plano"),a.zb(9),a.dc("ngIf",20==(null==n||null==n.equipos[0]?null:n.equipos[0].id_servicio)),a.zb(15),a.dc("ngIf",0==n.equipos.length||0==n.length),a.zb(1),a.dc("ngIf",n.equipos.length>0)}}function x(e,o){if(1&e&&(a.Ob(0,"div"),a.jc(1,y,44,5,"div",34),a.Nb()),2&e){var i=a.Yb(2);a.zb(1),a.dc("ngForOf",i.grupoWorkStation)}}function z(e,o){if(1&e){var i=a.Pb();a.Ob(0,"div"),a.Ob(1,"ion-row",2),a.Ob(2,"ion-col",3),a.Ob(3,"b",4),a.kc(4,"Informacion de la sucursal"),a.Nb(),a.Nb(),a.Ob(5,"ion-col",5),a.kc(6,"Acciones: "),a.Nb(),a.Ob(7,"ion-col",6),a.Ob(8,"ion-icon",7),a.Wb("click",(function(){return a.gc(i),a.Yb().descargarAllQrSucursal()})),a.Nb(),a.Nb(),a.Ob(9,"ion-col",6),a.Ob(10,"ion-icon",8),a.Wb("click",(function(){return a.gc(i),a.Yb().imprimirAllQrSucursal()})),a.Nb(),a.Nb(),a.Kb(11,"ion-col",5),a.Nb(),a.Ob(12,"ion-item",9),a.Ob(13,"ion-grid"),a.Ob(14,"ion-row"),a.Ob(15,"ion-col",10),a.Ob(16,"ion-label"),a.Ob(17,"b"),a.kc(18,"Sucursal"),a.Nb(),a.Nb(),a.Nb(),a.Ob(19,"ion-col",11),a.Ob(20,"ion-label"),a.Ob(21,"b"),a.kc(22,"Telefono"),a.Nb(),a.Nb(),a.Nb(),a.Ob(23,"ion-col",10),a.Ob(24,"ion-label"),a.Ob(25,"b"),a.kc(26,"Mail"),a.Nb(),a.Nb(),a.Nb(),a.Ob(27,"ion-col",11),a.Ob(28,"ion-label"),a.Ob(29,"b"),a.kc(30,"Codigo QR"),a.Nb(),a.Nb(),a.Nb(),a.Ob(31,"ion-col",11),a.Ob(32,"ion-label"),a.Ob(33,"b"),a.kc(34,"Acciones"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(35,"ion-item",9),a.Ob(36,"ion-grid"),a.Ob(37,"ion-row"),a.Ob(38,"ion-col",12),a.Ob(39,"ion-label"),a.kc(40),a.Nb(),a.Nb(),a.Ob(41,"ion-col",13),a.Ob(42,"ion-label"),a.kc(43),a.Nb(),a.Nb(),a.Ob(44,"ion-col",12),a.Ob(45,"ion-label"),a.kc(46),a.Nb(),a.Nb(),a.Ob(47,"ion-col",11),a.Ob(48,"ion-card",14),a.Ob(49,"div"),a.Ob(50,"a",15),a.Wb("click",(function(){return a.gc(i),a.Yb().descargarSucursal()})),a.Ob(51,"img",16),a.Wb("click",(function(){return a.gc(i),a.Yb().descargarSucursal()})),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(52,"ion-col",17),a.Ob(53,"ion-icon",18),a.Wb("click",(function(){return a.gc(i),a.Yb().descargarSucursal()})),a.Nb(),a.jc(54,p,1,1,"ion-icon",19),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Kb(55,"div",20),a.Ob(56,"ion-row",21),a.Ob(57,"ion-col",22),a.Ob(58,"ion-item",23),a.Ob(59,"ion-label",24),a.Ob(60,"b"),a.kc(61,"Workstations/equipos"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(62,"ion-col",25),a.Ob(63,"ion-item",26),a.Kb(64,"ion-label"),a.Ob(65,"ion-icon",27),a.Wb("click",(function(){return a.gc(i),a.Yb().descargarQrAllWorkstations()})),a.Nb(),a.Ob(66,"ion-icon",28),a.Wb("click",(function(){return a.gc(i),a.Yb().imprimirQrAllWorkstations()})),a.Nb(),a.Ob(67,"ion-button",15),a.Wb("click",(function(){return a.gc(i),a.Yb().alertAltaGrupoWorkstation()})),a.kc(68,"Agregar grupo de workstations"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.jc(69,m,4,0,"div",0),a.jc(70,f,2,0,"div",29),a.jc(71,x,2,1,"div",0),a.Nb()}if(2&e){var n=a.Yb();a.zb(40),a.lc(n.sucursal.sucursal[0].razon_social_sucursal),a.zb(3),a.lc(n.sucursal.sucursal[0].telefono_sucursal),a.zb(3),a.lc(n.sucursal.sucursal[0].email_sucursal),a.zb(5),a.dc("src",n.sucursal.sucursal[0].codigo_qr,a.hc),a.zb(3),a.dc("ngIf",n.showDeleteQrSucursal.show),a.zb(15),a.dc("ngIf",null==n.grupoWorkStation&&!n.loadingEquipos),a.zb(1),a.dc("ngIf",n.loadingEquipos),a.zb(1),a.dc("ngIf",null!=n.grupoWorkStation&&!n.loadingEquipos)}}function C(e,o){if(1&e){var i=a.Pb();a.Ob(0,"ion-item",60),a.Ob(1,"ion-icon",61),a.Wb("click",(function(){a.gc(i);var e=a.Yb().$implicit;return a.Yb(2).openPdf(e.url_imagen_plano)})),a.Nb(),a.Ob(2,"ion-label",15),a.Wb("click",(function(){a.gc(i);var e=a.Yb().$implicit;return a.Yb(2).openPdf(e.url_imagen_plano)})),a.kc(3),a.Nb(),a.Ob(4,"ion-icon",62),a.Wb("click",(function(){a.gc(i);var e=a.Yb().$implicit;return a.Yb(2).alert_eliminar_plano(e.id_plano)})),a.Nb(),a.Nb()}if(2&e){var n=a.Yb().$implicit;a.zb(3),a.lc(n.name)}}function P(e,o){if(1&e&&(a.Ob(0,"div"),a.jc(1,C,5,1,"ion-item",59),a.Nb()),2&e){var i=a.Yb(2);a.zb(1),a.dc("ngIf",i.sucursal.planos.length>0)}}function S(e,o){1&e&&(a.Ob(0,"ion-item",60),a.Ob(1,"ion-label"),a.kc(2,"No hay planos cargados"),a.Nb(),a.Nb())}function Y(e,o){if(1&e){var i=a.Pb();a.Ob(0,"div",56),a.Ob(1,"ion-item",23),a.Ob(2,"ion-label"),a.Ob(3,"b"),a.kc(4,"Planos de la sucursal"),a.Nb(),a.Nb(),a.Ob(5,"input",57),a.Wb("change",(function(e){return a.gc(i),a.Yb().showFile(e.target.files)})),a.Nb(),a.Ob(6,"ion-icon",58),a.Wb("click",(function(){return a.gc(i),a.Yb().agregar_plano()})),a.Nb(),a.Nb(),a.jc(7,P,2,1,"div",44),a.jc(8,S,3,0,"ion-item",59),a.Nb()}if(2&e){var n=a.Yb();a.zb(5),a.dc("disabled",n.disabled),a.zb(2),a.dc("ngForOf",n.sucursal.planos),a.zb(1),a.dc("ngIf",0==n.sucursal.planos.length)}}function W(e,o){if(1&e){var i=a.Pb();a.Ob(0,"ion-footer"),a.Ob(1,"ion-toolbar",63),a.Ob(2,"ion-title"),a.kc(3),a.Nb(),a.Ob(4,"ion-buttons",64),a.Ob(5,"ion-button",65),a.Wb("click",(function(){return a.gc(i),a.Yb().printSelect()})),a.kc(6,"Imprimir"),a.Nb(),a.Ob(7,"ion-button",66),a.Wb("click",(function(){return a.gc(i),a.Yb().deletePrintSelect()})),a.kc(8,"Cancelar"),a.Nb(),a.Nb(),a.Nb(),a.Nb()}if(2&e){var n=a.Yb();a.zb(3),a.mc("QR'S Seleccionados (",n.qrsToPrint.length,")")}}var j=function(){var e=function(){function e(o,i,n,r,t,a,c,s){_classCallCheck(this,e),this.navParams=o,this.api_sucursales=i,this.modalController=n,this.imageCompress=r,this.loadingController=t,this.api_servicios=a,this.alertController=c,this.api_visitas=s,this.id_sucursal=this.navParams.get("id_sucursal"),this.imagen=[],this.disabled=!1,this.fileNames=[],this.filesToUpload=[],this.qrsToPrint=[],this.showDeleteQrSucursal={show:!1,count:0},this.showDeleteQr=[],this.loadingEquipos=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this.actualizar_informacion(!1)}},{key:"altaWorkstation",value:function(e,o){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,n=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.modalController.create({component:r.a,cssClass:"modal-chiquito",componentProps:{id_sucursal:this.id_sucursal,equipo_grupo:e}});case 2:return(i=o.sent).onDidDismiss().then((function(e){n.actualizar_informacion(!1)})),o.next=6,i.present();case 6:return o.abrupt("return",o.sent);case 7:case"end":return o.stop()}}),o,this)})))}},{key:"altaGrupoWorkstation",value:function(e){var o=this;this.api_servicios.alta_Grupo_workstation({nombre_equipo_grupo:e,id_sucursal:this.id_sucursal}).subscribe((function(e){o.actualizar_informacion(!1)}))}},{key:"alertAltaGrupoWorkstation",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Crear Grupo de Workstation",inputs:[{name:"nombre",type:"text",placeholder:"nombre"}],buttons:[{text:"Cancelar",handler:function(){}},{text:"Crear",handler:function(e){i.altaGrupoWorkstation(e.nombre),i.actualizar_informacion(!0)}}]});case 2:return o=e.sent,e.next=5,o.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"borrar_equipo",value:function(e,o,i){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var t,a=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({header:"Eliminar "+e.nombre_equipo,message:"Estas seguro que deseas eliminar "+e.nombre_equipo,buttons:["Cancelar",{text:"Borrar",handler:function(){return Object(n.a)(a,void 0,void 0,regeneratorRuntime.mark((function n(){var r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadingController.create({message:"Eliminado, Por favor espere."});case 2:this.loading=n.sent,this.loading.present(),this.api_sucursales.borrar_equipo(e.id_equipo).subscribe((function(e){r.grupoWorkStation[o].equipos.splice(i,1),r.loadingController.dismiss()}));case 5:case"end":return n.stop()}}),n,this)})))}}]});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}}),r,this)})))}},{key:"borrar_equipo_grupo",value:function(e,o){var i=this;this.api_sucursales.eliminar_Grupo_workstation(e).subscribe((function(e){i.grupoWorkStation.splice(o,1)}))}},{key:"prueba",value:function(e){console.log(e)}},{key:"actualizar_informacion",value:function(e){var o=this;this.api_sucursales.listado_productosServicio(20).subscribe((function(e){console.log(e),o.productos=e.result})),this.loadingEquipos=!0,this.api_sucursales.informacion_sucursal(this.id_sucursal).subscribe((function(i){o.sucursal=i,o.sucursal=o.sucursal.result,console.warn(o.sucursal);for(var n=0;n<o.sucursal.planos.length;n++)Object.defineProperty(o.sucursal.planos[n],"name",{value:o.sucursal.planos[n].url_imagen_plano.slice(27)});console.log("sucursal: ",o.sucursal),console.log("sucursal: ",o.sucursal),e&&o.loadingController.dismiss()})),this.api_sucursales.listado_grupoWorkstations(this.id_sucursal).subscribe((function(e){console.log("Grupo1",e.result);var i=0,n=[],r=0,t=!0;if(null!=e.result){e.result.forEach((function(e){var a;if(e.nombre=e.zona==e.nombre_equipo?e.nombre_equipo+" - "+e.nro_equipo:e.nombre_equipo+" - "+e.zona+" - "+e.nro_equipo,e.id_equipo_grupo==i){if(o.showDeleteQr[r].push({show:!1,count:0}),e.producto_predeterminado){var c=o.productos.find((function(o){return o.id_producto==e.producto_predeterminado}));e.producto_predeterminado_nombre=(null==c?void 0:c.nombre_producto)+" - "+(null==c?void 0:c.tipo_producto)}n[r].equipos.push({id_equipo:e.id_equipo,id_servicio:e.id_servicio,id_sucursal:e.id_sucursal,nombre_equipo:e.nombre_equipo,codigo_qr_equipo:e.codigo_qr_equipo,estado_servicio:e.estado_servicio,nombre_servicio:e.nombre_servicio,producto_predeterminado:e.producto_predeterminado,producto_predeterminado_nombre:e.producto_predeterminado_nombre,zona:e.zona,nro_equipo:e.nro_equipo,nombre:e.nombre}),t=!1}else{if(t||r++,i=e.id_equipo_grupo,console.log("element?",e),n.push({nombre_equipo_grupo:e.nombre_equipo_grupo?e.nombre_equipo_grupo:null,id_equipo_grupo:e.id_equipo_grupo?e.id_equipo_grupo:null,equipos:[],plano:null===(a=o.sucursal)||void 0===a?void 0:a.planos.find((function(o){return o.id_plano==(e.id_plano?e.id_plano:null)}))}),o.showDeleteQr.push([]),e.producto_predeterminado){var s=o.productos.find((function(o){return o.id_producto==e.producto_predeterminado}));e.producto_predeterminado_nombre=(null==s?void 0:s.nombre_producto)+" - "+(null==s?void 0:s.tipo_producto)}n[r].equipos.push({id_equipo:e.id_equipo,id_servicio:e.id_servicio,id_sucursal:e.id_sucursal,nombre_equipo:e.nombre_equipo,codigo_qr_equipo:e.codigo_qr_equipo,estado_servicio:e.estado_servicio,nombre_servicio:e.nombre_servicio,producto_predeterminado:e.producto_predeterminado,producto_predeterminado_nombre:e.producto_predeterminado_nombre,zona:e.zona,nro_equipo:e.nro_equipo,nombre:e.nombre}),o.showDeleteQr[r].push({show:!1,count:0}),t=!1}})),console.log(o.showDeleteQr),o.grupoWorkStation=n,console.log("grupo2: ",o.grupoWorkStation);var a,c=_createForOfIteratorHelper(o.grupoWorkStation);try{for(c.s();!(a=c.n()).done;){a.value.equipos.sort((function(e,o){var i=e.nombre.split(" - ");i.pop(),i=i.join(" - ");var n=o.nombre.split(" - ");return n.pop(),i>(n=n.join(" - "))?1:i<n?-1:n==i?e.nro_equipo-o.nro_equipo:0}))}}catch(s){c.e(s)}finally{c.f()}}o.loadingEquipos=!1}))}},{key:"editName",value:function(e,o){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var r,t=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.alertController.create({header:"Modificar",inputs:[{type:"textarea",value:e.nombre_equipo,placeholder:"Nombre"},{type:"textarea",value:e.zona,placeholder:"Zona"},{type:"number",value:e.nro_equipo,placeholder:"Numero"}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Guardar",handler:function(i){console.log(i),t.loadingController.create({message:"Guardando Cambios"}).then((function(r){return Object(n.a)(t,void 0,void 0,regeneratorRuntime.mark((function n(){var t,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.present(),(t=JSON.parse(JSON.stringify(e))).nombre_equipo=i[0],t.zona=i[1],t.nro_equipo=i[2],t.nombre=t.nombre_equipo+" - "+t.zona+" - "+t.nro_equipo,console.log("EQUIPO",e),!o.equipos.some((function(e){return e.nro_equipo==t.nro_equipo&&e.zona==t.zona}))){n.next=11;break}return n.next=5,this.alertController.create({header:"Error",message:"Ya existe un equipo con ese numero en la zona.",buttons:["OK"]});case 5:return a=n.sent,n.next=8,a.present();case 8:r.dismiss(),n.next=12;break;case 11:this.api_visitas.actualizar_equipo(t).then((function(o){e.nombre_equipo=i[0],e.zona=i[1],e.nro_equipo=i[2],e.nombre=e.nombre_equipo+" - "+e.zona+" - "+e.nro_equipo,r.dismiss(),console.log(o)})).catch((function(e){console.log(e),r.dismiss()}));case 12:case"end":return n.stop()}}),n,this)})))}))}}]});case 2:return r=i.sent,i.next=5,r.present();case 5:case"end":return i.stop()}}),i,this)})))}},{key:"actualizarEquipo",value:function(e){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.loadingController.create({message:"Actualizando"});case 2:return i=o.sent,o.next=5,i.present();case 5:this.api_visitas.actualizar_equipo(e).then((function(o){i.dismiss(),e.codigo_qr_equipo=o.equipoCreado.url,console.log(e),console.log(o),e.actualizado=!0})).catch((function(e){console.log(e),i.dismiss()}));case 6:case"end":return o.stop()}}),o,this)})))}},{key:"openPdf",value:function(e){window.open(e)}},{key:"agregar_plano",value:function(){document.getElementById("inputUploadFile").click()}},{key:"showFile",value:function(e){if(e.length>0){for(var o in e){var i=e[o].name,n=this.filesToUpload.filter((function(e){return e.name==i}));0==n.length?this.filesToUpload.push(e[o]):alert("Ya existe: "+i)}this.filesToUpload.splice(-2,2),this.uploadFile(this.filesToUpload),this.filesToUpload=[],i=null,n=null}}},{key:"uploadFile",value:function(e){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,n,r=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.loadingController.create({message:"Subiendo Archivos"});case 2:for(o.sent.present(),this.disabled=!0,i=0;i<e.length;i++)(n=new FormData).append("file",e[i],e[i].name),n.append("id_sucursal",this.sucursal.sucursal[0].id_sucursal),this.api_sucursales.upload("/planos/crear",n).then((function(e){console.log(e),r.sucursal.planos=[],r.actualizar_informacion(!0)})).catch((function(e){r.loadingController.dismiss(),console.log("Error al subir el plano ",e),alert("El plano no se subio")}));this.disabled=!1;case 6:case"end":return o.stop()}}),o,this)})))}},{key:"eliminar_plano",value:function(e){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return console.log(e),o.next=3,this.loadingController.create({message:"Eliminado plano, Por favor espere."});case 3:return this.loading=o.sent,o.next=6,this.loading.present();case 6:this.api_sucursales.eliminar_plano(e).subscribe((function(e){i.api_sucursales.informacion_sucursal(i.id_sucursal).subscribe((function(e){i.sucursal=e,i.sucursal=i.sucursal.result;for(var o=0;o<i.sucursal.planos.length;o++)Object.defineProperty(i.sucursal.planos[o],"name",{value:i.sucursal.planos[o].url_imagen_plano.slice(27)});console.log("sucursal: ",i.sucursal),i.loadingController.dismiss()}))}),(function(e){i.loading.dismiss(),console.log("Error al borrar el plano ",e),i.loadingController.dismiss(),alert("Ocurrio un error")}));case 7:case"end":return o.stop()}}),o,this)})))}},{key:"alert_eliminar_plano",value:function(e){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,n=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.alertController.create({header:"Seguro que desea eliminar el plano?",buttons:[{text:"No",handler:function(){}},{text:"Si",handler:function(){n.eliminar_plano(e)}}]});case 2:return i=o.sent,o.next=5,i.present();case 5:case"end":return o.stop()}}),o,this)})))}},{key:"Imprimir",value:function(){this.api_servicios.getZpl({base:this.sucursal.sucursal[0].codigo_qr}).toPromise().then((function(e){console.log(e.codigo);var o=window.open("","PRINT","height=400,width=600");o.document.write("<html><head><title>"+document.title+"</title>"),o.document.write("</head><body >"),o.document.write("<h3>"+e.codigo+"</h3>"),o.document.write("</body></html>"),o.document.close(),o.focus(),o.print()}))}},{key:"imprimirQrAllWorkstations",value:function(){var e=[];this.grupoWorkStation.forEach((function(o){o.equipos.forEach((function(o){e.push(o.codigo_qr_equipo)}))})),console.log(e),this.imprimir(e)}},{key:"imprimirQrThisWorkstation",value:function(e){var o=[];e.equipos.forEach((function(e){o.push(e.codigo_qr_equipo)})),console.log(o),this.imprimir(o)}},{key:"addmprimirQr",value:function(e,o,i){this.qrsToPrint.push(e.codigo_qr_equipo),this.showDeleteQr[i][o].show=!0,this.showDeleteQr[i][o].count++}},{key:"deleteImprimirQr",value:function(e,o,i){var n=this.qrsToPrint.indexOf(e.codigo_qr_equipo);-1!=n&&(this.qrsToPrint.splice(n,1),this.showDeleteQr[i][o].count--),-1==(n=this.qrsToPrint.indexOf(e.codigo_qr_equipo))&&(this.showDeleteQr[i][o].show=!1)}},{key:"addImprimirQrSucursal",value:function(){this.qrsToPrint.push(this.sucursal.sucursal[0].codigo_qr),this.showDeleteQrSucursal.show=!0,this.showDeleteQrSucursal.count++}},{key:"deleteImprimirQrSucursal",value:function(){var e=this.qrsToPrint.indexOf(this.sucursal.sucursal[0].codigo_qr);-1!=e&&(this.qrsToPrint.splice(e,1),this.showDeleteQrSucursal.count--),-1==(e=this.qrsToPrint.indexOf(this.sucursal.sucursal[0].codigo_qr))&&(this.showDeleteQrSucursal.show=!1)}},{key:"imprimirAllQrSucursal",value:function(){var e=[];e.push(this.sucursal.sucursal[0].codigo_qr),this.grupoWorkStation.forEach((function(o){o.equipos.forEach((function(o){e.push(o.codigo_qr_equipo)}))})),this.imprimir(e)}},{key:"printSelect",value:function(){this.imprimir(this.qrsToPrint)}},{key:"deletePrintSelect",value:function(){this.showDeleteQrSucursal.count=0,this.showDeleteQrSucursal.show=!1,this.showDeleteQr.forEach((function(e){e.forEach((function(e){e.show=!1,e.count=0}))})),this.qrsToPrint=[]}},{key:"imprimir",value:function(e){var o=window.open("","PRINT","width=21,5cm");o.document.write("<html><head><title>"+document.title+"</title>"),o.document.write("</head><body>");for(var i=0;i<e.length;i++)o.document.write('<img style="margin: 0.2cm ;padding-left: 0.52cm;padding-top: 0;padding-bottom: 0.52cm; padding-right: 0.52cm; height: 5cm; width: 5cm; border-style: solid; border-width: 1px; border-color: rgb(97, 97, 97);" src="'+e[i]+'">');o.document.write("</body></html>"),o.document.close(),o.focus(),o.print()}},{key:"test",value:function(e){console.warn(e)}},{key:"descargar",value:function(){}},{key:"descargarSucursal",value:function(){var e=document.createElement("a");e.download=this.sucursal.sucursal[0].id_sucursal+".png",e.href=t.a.api.base_url+"getfile/sucursales/"+this.sucursal.sucursal[0].id_sucursal,e.click()}},{key:"descargarQrEquipo",value:function(e){var o=document.createElement("a");o.download=e.id_equipo+".png",o.href=t.a.api.base_url+"getfile/equipos/"+e.id_equipo,o.click()}},{key:"descargarQrThisWorkstation",value:function(e){for(var o=null,i=0;i<e.equipos.length;i++){var n=e.equipos[i];o=0==i?n.id_equipo.toString():o+","+n.id_equipo.toString()}var r=document.createElement("a");r.download="qrs.png",r.href=t.a.api.base_url+"getZip?type=equipos&name="+e.nombre_equipo_grupo+"&data="+o,r.click()}},{key:"descargarAllQrSucursal",value:function(){var e=[],o=null;e.push(this.sucursal.sucursal[0].id_sucursal),this.grupoWorkStation.forEach((function(o){o.equipos.forEach((function(o){e.push(o.id_equipo)}))}));for(var i=0;i<e.length;i++){var n=e[i];o=0==i?n.toString():o+","+n.toString()}var r=document.createElement("a");r.download="qrs.png",r.href=t.a.api.base_url+"getZip?type=all&name="+this.sucursal.sucursal[0].razon_social_sucursal+"&data="+o,r.click()}},{key:"descargarQrAllWorkstations",value:function(){var e=[],o=null;this.grupoWorkStation.forEach((function(o){o.equipos.forEach((function(o){e.push(o.id_equipo)}))}));for(var i=0;i<e.length;i++){var n=e[i];o=0==i?n.toString():o+","+n.toString()}var r=document.createElement("a");r.download="qrs.png",r.href=t.a.api.base_url+"getZip?type=equipos&name=equipos_"+this.sucursal.sucursal[0].razon_social_sucursal+"&data="+o,r.click()}},{key:"elegirProducto",value:function(e){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,n,r,t,a,c=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=[],n=_createForOfIteratorHelper(this.productos);try{for(n.s();!(r=n.n()).done;)t=r.value,i.push(e.producto_predeterminado==t.id_producto?{label:t.nombre_producto+" - "+t.tipo_producto,value:t.id_producto,checked:!0,type:"radio"}:{label:t.nombre_producto+" - "+t.tipo_producto,value:t.id_producto,type:"radio"})}catch(s){n.e(s)}finally{n.f()}return i.push({label:"Sin Producto",value:null,type:"radio"}),console.log(i),o.next=6,this.alertController.create({subHeader:e.nombre_equipo,header:"Producto predeterminado",inputs:i,buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Aceptar",handler:function(o){var i=JSON.parse(JSON.stringify(e));e.producto_predeterminado=o,e.estado_servicio=void 0,e.modificable=void 0,e.nombre_equipo_grupo=void 0,e.nombre_servicio=void 0,e.producto=void 0,e.qr=void 0,c.api_visitas.actualizar_equipo(e).then((function(o){var n;console.log(o),(n=(n=o).equipoCreado.retorno).producto_predeterminado?(e.nombre_servicio=i.nombre_servicio,e.producto_predeterminado=c.productos.find((function(e){return e.id_producto==n.producto_predeterminado})).id_producto,e.producto_predeterminado_nombre=c.productos.find((function(e){return e.id_producto==n.producto_predeterminado})).nombre_producto+" - "+c.productos.find((function(e){return e.id_producto==n.producto_predeterminado})).tipo_producto):(e.nombre_servicio=i.nombre_servicio,e.producto_predeterminado=null,e.producto_predeterminado_nombre=null)})).catch((function(e){console.error(e)}))}}]});case 6:return a=o.sent,o.next=9,a.present();case 9:case"end":return o.stop()}}),o,this)})))}},{key:"elegirPlano",value:function(e){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,n,r,t,a,c=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=[],n=_createForOfIteratorHelper(this.sucursal.planos);try{for(n.s();!(r=n.n()).done;)t=r.value,i.push({label:t.name,value:t.id_plano,type:"radio"})}catch(s){n.e(s)}finally{n.f()}return i.push({label:"Sin Plano",value:null,type:"radio"}),console.log(i),o.next=6,this.alertController.create({subHeader:e.nombre_equipo_grupo,header:"Elegir plano",inputs:i,cssClass:"wide-alert",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Aceptar",handler:function(o){e.id_plano=o,c.api_visitas.setPlano(e).subscribe((function(e){console.log(e),c.actualizar_informacion(!1)}))}}]});case 6:return a=o.sent,o.next=9,a.present();case 9:case"end":return o.stop()}}),o,this)})))}},{key:"cambiarProductoSector",value:function(e){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,n,r,t,a,c=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:console.log(e),i=[],n=_createForOfIteratorHelper(this.productos);try{for(n.s();!(r=n.n()).done;)t=r.value,i.push({label:t.nombre_producto+" - "+t.tipo_producto,value:t.id_producto,type:"radio"})}catch(s){n.e(s)}finally{n.f()}return i.push({label:"Sin Producto",value:null,type:"radio"}),o.next=7,this.alertController.create({subHeader:e.nombre_equipo_grupo,header:"Producto predeterminado",inputs:i,buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Aceptar",handler:function(o){for(var i=0;i<e.equipos.length;i++){console.log(i);var n=e.equipos[i];n.producto_predeterminado=o,n.estado_servicio=void 0,n.modificable=void 0,n.nombre_equipo_grupo=void 0,n.nombre_servicio=void 0,n.producto=void 0,n.qr=void 0,console.log(n),c.api_visitas.actualizar_equipo(n).then((function(e){var o;console.log(e),(o=(o=e).equipoCreado.retorno).producto_predeterminado?(n.producto_predeterminado=c.productos.find((function(e){return e.id_producto==o.producto_predeterminado})).id_producto,n.producto_predeterminado_nombre=c.productos.find((function(e){return e.id_producto==o.producto_predeterminado})).nombre_producto+" - "+c.productos.find((function(e){return e.id_producto==o.producto_predeterminado})).tipo_producto,c.actualizar_informacion(!1)):(n.producto_predeterminado=null,n.producto_predeterminado_nombre=null,c.actualizar_informacion(!1))})).catch((function(e){console.error(e)}))}}}]});case 7:return a=o.sent,o.next=10,a.present();case 10:case"end":return o.stop()}}),o,this)})))}}]),e}();return e.\u0275fac=function(o){return new(o||e)(a.Jb(c.K),a.Jb(s.a),a.Jb(c.I),a.Jb(u.a),a.Jb(c.H),a.Jb(l.a),a.Jb(c.a),a.Jb(b.a))},e.\u0275cmp=a.Db({type:e,selectors:[["app-ver-sucursal"]],decls:4,vars:3,consts:[[4,"ngIf"],["style","margin-top: 10px;",4,"ngIf"],[2,"text-align","center","background-color","white","padding","1%"],["size","9"],[2,"margin-top","15px"],["size","1"],["size","0.5",2,"font-size","24px !important"],["color","primary","title","Descargar Todos los QRs de la sucursal","name","cloud-download-outline",3,"click"],["color","primary","title","Imprimir Toda la informacion de la sucursal","name","print-outline",3,"click"],["lines","full"],["size","3"],["size","2"],["size","3",2,"margin-top","10px"],["size","2",2,"margin-top","10px"],[2,"width","50px","margin-top","0px"],[3,"click"],[2,"z-index","-1 !important",3,"src","click"],["size","2",2,"font-size","24px !important"],["color","primary","title","Descargar este QR","name","cloud-download-outline",2,"margin-top","15px",3,"click"],["style","margin-top:15px; color: red !important;","name","print-outline",3,"title","click",4,"ngIf"],[2,"margin-top","5px"],[2,"background-color","white"],["size","5"],["lines","none",2,"text-align","center"],[2,"font-size","100% !important"],["size","7"],["lines","none",2,"text-align","right"],["color","primary","title","Descargar los QR'S de TODAS las Workstations/equipos","name","cloud-download-outline",3,"click"],["color","primary","title","Imprimir los QR'S de TODAS las Workstations/equipos","name","print-outline",3,"click"],["class","loadding",4,"ngIf"],["name","print-outline",2,"margin-top","15px","color","red !important",3,"title","click"],[2,"width","100%","text-align","center"],[1,"loadding"],[2,"margin-top","10px","color","#3b3b3f"],["style","background-color: white;",4,"ngFor","ngForOf"],["size","1.25",1,"grupoequipo"],["name","trash-outline","color","danger",2,"margin-top","15px",3,"click"],["size","6.5"],["lines","none",2,"text-align","left"],["color","primary","title","Descargar los QR'S de ESTA Workstation/equipo","name","cloud-download-outline",3,"click"],["color","primary","title","Imprimir los QR'S de ESTA Workstation/equipo","name","print-outline",3,"click"],["size","4.25"],["size","2.5"],["size","1.5"],[4,"ngFor","ngForOf"],["class","equipos",4,"ngIf"],[1,"equipos"],["size","2",2,"margin-top","15px"],["size","3",2,"margin-top","15px"],["size","2.5",2,"margin-top","15px"],[3,"src","click",4,"ngIf"],["color","primary","title","Seleccionar ESTE QR para Imprimir","name","print-outline",2,"margin-top","15px",3,"click"],["color","primary","name","create-outline",2,"padding-left","5px",3,"click"],["name","refresh-outline",3,"click"],["color","primary","slot","start","name","create-outline",3,"click"],[3,"src","click"],[2,"margin-top","10px"],["id","inputUploadFile","title"," ","type","file","name","",2,"visibility","hidden",3,"disabled","change"],["slot","end","name","add-circle-outline","color","primary",3,"click"],["button","",4,"ngIf"],["button",""],["name","eye","slot","start",3,"click"],["slot","end","name","trash-outline",2,"color","red",3,"click"],["color","primary"],["slot","end"],[1,"printButton",3,"click"],[1,"printButtonCancel",3,"click"]],template:function(e,o){1&e&&(a.Ob(0,"ion-content"),a.jc(1,z,72,8,"div",0),a.jc(2,Y,9,3,"div",1),a.Nb(),a.jc(3,W,9,1,"ion-footer",0)),2&e&&(a.zb(1),a.dc("ngIf",o.sucursal),a.zb(1),a.dc("ngIf",o.sucursal),a.zb(1),a.dc("ngIf",o.qrsToPrint.length>0))},directives:[c.k,d.j,c.w,c.j,c.r,c.t,c.p,c.u,c.f,c.d,c.A,d.i,c.o,c.F,c.E,c.e],styles:[".planos[_ngcontent-%COMP%]{width:98%;height:98%;padding:5%}.equipos[_ngcontent-%COMP%]{height:65px;margin-left:3%}.grupoequipo[_ngcontent-%COMP%]{align-items:center;align-self:center;align-content:center;vertical-align:center}ion-label[_ngcontent-%COMP%]{font-size:80%!important}.cardPlanos[_ngcontent-%COMP%]{width:100%!important;height:100%!important}ion-slides[_ngcontent-%COMP%]{--bullet-background:#000;height:100%}.deletePlano[_ngcontent-%COMP%]{--background:rgba(56,129,255,0);--background-activated:rgba(56,129,255,0);--background-activated-opacity:1;--background-focused:rgba(56,129,255,0);--background-focused-opacity:1;--background-hover:rgba(56,129,255,0);--background-hover-opacity:1;--border-color:rgba(56,129,255,0);--border-radius:8px;--border-style:solid;--border-width:8px;--box-shadow:10px 10px;--color:rgba(56,129,255,0);--color-activated:rgba(56,129,255,0);--color-focused:rgba(56,129,255,0);--color-hover:rgba(56,129,255,0);--opacity:1;--padding-bottom:4px;--padding-end:4px;--padding-start:4px;--padding-top:4px;--ripple-color:rgba(56,129,255,0);--transition:background-color 15ms linear}.printButton[_ngcontent-%COMP%]{--background-activated:rgba(56,129,255,0.48)!important;--background-activated-opacity:1;--background-focused:rgba(56,129,255,0.48)!important;--background-focused-opacity:1;--background-hover:rgba(56,129,255,0.48)!important;--background-hover-opacity:1;--border-color:#3880ff}.printButton[_ngcontent-%COMP%], .printButtonCancel[_ngcontent-%COMP%]{--border-radius:8px;--border-style:solid;--border-width:1px;--opacity:1;--ripple-color:#1e1e1e;--transition:background-color 15ms linear}.printButtonCancel[_ngcontent-%COMP%]{--background:rgba(255,8,0,0.76)!important;--background-activated:#ff0800!important;--background-activated-opacity:1;--background-focused:#ff0800!important;--background-focused-opacity:1;--background-hover:#ff0800!important;--background-hover-opacity:1;--border-color:#ff0800}.loadding[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;text-align:center;justify-content:center;align-items:center;color:var(--ion-color-light);background-color:#fff;color:#fff;padding-bottom:5%}ion-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),e}()},mca5:function(e,o,i){"use strict";i.r(o),i.d(o,"VerClientePageModule",(function(){return C}));var n=i("ofXK"),r=i("3Pt+"),t=i("TEn/"),a=i("tyNb"),c=i("mrSG"),s=i("wfI0"),u=i("cZ9Q"),l=i("lENo"),b=i("1mX4"),d=i("fXoL"),p=i("jCJ1"),m=i("89nv");function f(e,o){if(1&e&&(d.Ob(0,"ion-item",8),d.Ob(1,"ion-col",3),d.Ob(2,"ion-label"),d.kc(3),d.Nb(),d.Nb(),d.Ob(4,"ion-col",3),d.Ob(5,"ion-label"),d.kc(6),d.Nb(),d.Nb(),d.Ob(7,"ion-col",3),d.Ob(8,"ion-label"),d.kc(9),d.Nb(),d.Nb(),d.Ob(10,"ion-col",3),d.Ob(11,"ion-label"),d.kc(12),d.Nb(),d.Nb(),d.Nb()),2&e){var i=d.Yb(2);d.zb(3),d.mc(" ",i.cliente.clienteDatos[0].razon_social_cliente," "),d.zb(3),d.mc(" ",i.cliente.clienteDatos[0].telefono," "),d.zb(3),d.mc(" ",i.cliente.clienteDatos[0].email," "),d.zb(3),d.mc(" ",i.cliente.clienteDatos[0].direccion," ")}}function g(e,o){if(1&e){var i=d.Pb();d.Ob(0,"div"),d.Ob(1,"ion-item",8),d.Ob(2,"ion-col",3),d.kc(3),d.Nb(),d.Ob(4,"ion-col",3),d.kc(5),d.Nb(),d.Ob(6,"ion-col",3),d.kc(7),d.Nb(),d.Ob(8,"ion-col",9),d.kc(9),d.Nb(),d.Ob(10,"ion-col",12),d.Ob(11,"ion-icon",13),d.Wb("click",(function(){d.gc(i);var e=o.$implicit;return d.Yb(2).modificar_sucursal(e.id_sucursal)})),d.Nb(),d.Ob(12,"ion-icon",14),d.Wb("click",(function(){d.gc(i);var e=o.$implicit;return d.Yb(2).baja_sucursal(e.id_sucursal)})),d.Nb(),d.Ob(13,"ion-icon",15),d.Wb("click",(function(){d.gc(i);var e=o.$implicit;return d.Yb(2).verSucursal(e.id_sucursal)})),d.Nb(),d.Nb(),d.Nb(),d.Nb()}if(2&e){var n=o.$implicit;d.zb(3),d.lc(n.razon_social_sucursal),d.zb(2),d.lc(n.telefono_sucursal),d.zb(2),d.lc(n.email_sucursal),d.zb(2),d.mc(" ",n.direccion_sucursal," ")}}function h(e,o){if(1&e){var i=d.Pb();d.Ob(0,"ion-icon",18),d.Wb("click",(function(){d.gc(i);var e=d.Yb(2).$implicit;return d.Yb(2).eliminarVisitaAlert(e)})),d.Nb()}}function _(e,o){if(1&e){var i=d.Pb();d.Ob(0,"ion-icon",19),d.Wb("click",(function(){d.gc(i);var e=d.Yb(2).$implicit;return d.Yb(2).marcarEntregadoAlert(e)})),d.Nb()}}function v(e,o){if(1&e){var i=d.Pb();d.Mb(0),d.Ob(1,"ion-item",8),d.Ob(2,"ion-col",11),d.kc(3),d.Zb(4,"date"),d.Nb(),d.Ob(5,"ion-col",11),d.kc(6),d.Nb(),d.Ob(7,"ion-col",9),d.kc(8),d.Nb(),d.Ob(9,"ion-col",12),d.Ob(10,"ion-icon",15),d.Wb("click",(function(){d.gc(i);var e=d.Yb().$implicit;return d.Yb(2).verVisita(e.id_visita)})),d.Nb(),d.jc(11,h,1,0,"ion-icon",16),d.jc(12,_,1,0,"ion-icon",17),d.Nb(),d.Nb(),d.Lb()}if(2&e){var n=d.Yb().$implicit;d.zb(3),d.lc(d.ac(4,5,n.fecha_visita,"dd/MM/yyyy hh:mm")),d.zb(3),d.lc(n.razon_social_sucursal),d.zb(2),d.mc(" ",n.estado_visitas," "),d.zb(3),d.dc("ngIf","pendiente"==n.estado_visitas||"en proceso"==n.estado_visitas),d.zb(1),d.dc("ngIf","finalizada"==n.estado_visitas)}}function k(e,o){if(1&e&&(d.Ob(0,"div"),d.jc(1,v,13,8,"ng-container",0),d.Nb()),2&e){var i=o.$implicit;d.zb(1),d.dc("ngIf","eliminado"!=i.estado_visitas)}}function O(e,o){if(1&e){var i=d.Pb();d.Ob(0,"ion-content"),d.Ob(1,"div",1),d.Ob(2,"ion-item",2),d.Ob(3,"ion-grid"),d.Ob(4,"ion-row"),d.Ob(5,"ion-col",3),d.Ob(6,"ion-label"),d.Ob(7,"b"),d.kc(8,"Razon social"),d.Nb(),d.Nb(),d.Nb(),d.Ob(9,"ion-col",3),d.Ob(10,"ion-label"),d.Ob(11,"b"),d.kc(12,"Telefono"),d.Nb(),d.Nb(),d.Nb(),d.Ob(13,"ion-col",3),d.Ob(14,"ion-label"),d.Ob(15,"b"),d.kc(16,"Email"),d.Nb(),d.Nb(),d.Nb(),d.Ob(17,"ion-col",3),d.Ob(18,"ion-label"),d.Ob(19,"b"),d.kc(20,"Direccion"),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.jc(21,f,13,4,"ion-item",4),d.Nb(),d.Ob(22,"ion-grid"),d.Ob(23,"ion-row"),d.Ob(24,"ion-col"),d.Ob(25,"ion-item",5),d.Ob(26,"ion-label",6),d.Ob(27,"b"),d.kc(28,"Sucursales"),d.Nb(),d.Nb(),d.Ob(29,"ion-button",7),d.Wb("click",(function(){return d.gc(i),d.Yb().altaSucursal()})),d.kc(30,"Agregar sucursal"),d.Nb(),d.Nb(),d.Ob(31,"ion-item",8),d.Ob(32,"ion-col",3),d.kc(33,"Razon social sucursal"),d.Nb(),d.Ob(34,"ion-col",3),d.kc(35,"Telefono sucursal"),d.Nb(),d.Ob(36,"ion-col",3),d.kc(37,"Email sucursal"),d.Nb(),d.Ob(38,"ion-col",9),d.kc(39,"Direccion sucursal"),d.Nb(),d.Nb(),d.jc(40,g,14,4,"div",10),d.Nb(),d.Ob(41,"ion-col"),d.Ob(42,"ion-item",5),d.Ob(43,"ion-label",6),d.Ob(44,"b"),d.kc(45,"Visitas"),d.Nb(),d.Nb(),d.Nb(),d.Ob(46,"ion-item",8),d.Ob(47,"ion-col",11),d.kc(48,"Fecha de la visita"),d.Nb(),d.Ob(49,"ion-col",11),d.kc(50,"Sucursal"),d.Nb(),d.Ob(51,"ion-col",9),d.kc(52,"Estado"),d.Nb(),d.Ob(53,"ion-col",9),d.kc(54,"Acciones"),d.Nb(),d.Nb(),d.jc(55,k,2,1,"div",10),d.Nb(),d.Nb(),d.Nb(),d.Nb()}if(2&e){var n=d.Yb();d.zb(21),d.dc("ngIf",n.cliente),d.zb(19),d.dc("ngForOf",n.cliente.sucursales.datosSucursal),d.zb(15),d.dc("ngForOf",n.cliente.sucursales.visitas)}}var N,q,w,y=[{path:"",component:(N=function(){function e(o,i,n,r,t,a,c){_classCallCheck(this,e),this.activatedRoute=o,this.api_clientes=i,this.modalController=n,this.alertController=r,this.loadingController=t,this.toastController=a,this.apiVisitasService=c}return _createClass(e,[{key:"ngOnInit",value:function(){this.actualizar_informacion()}},{key:"altaSucursal",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.activatedRoute.snapshot.paramMap.get("id_cliente"),e.next=3,this.modalController.create({component:s.a,cssClass:"my-custom-class",componentProps:{id_cliente:o}});case 3:return i=e.sent,e.next=6,i.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"verSucursal",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return this.activatedRoute.snapshot.paramMap.get("id_cliente"),o.next=3,this.modalController.create({component:u.a,cssClass:"modal_grande",componentProps:{id_sucursal:e}});case 3:return i=o.sent,o.next=6,i.present();case 6:return o.abrupt("return",o.sent);case 7:case"end":return o.stop()}}),o,this)})))}},{key:"verVisita",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.modalController.create({component:l.a,cssClass:"my-custom-class",componentProps:{id_visita:e}});case 2:return i=o.sent,o.next=5,i.present();case 5:return o.abrupt("return",o.sent);case 6:case"end":return o.stop()}}),o,this)})))}},{key:"baja_sucursal",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,n=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.alertController.create({header:"Seguro que desea eliminar la sucursal?",buttons:[{text:"No",handler:function(){}},{text:"Si",handler:function(){n.eliminar_sucursal(e)}}]});case 2:return i=o.sent,o.next=5,i.present();case 5:case"end":return o.stop()}}),o,this)})))}},{key:"eliminar_sucursal",value:function(e){this.api_clientes.eliminar_sucursal(e).subscribe((function(e){location.reload()}),(function(e){console.log(e)}))}},{key:"actualizar_informacion",value:function(){var e=this,o=this.activatedRoute.snapshot.paramMap.get("id_cliente");this.api_clientes.informacion_cliente(o).subscribe((function(o){e.cliente=o,e.cliente=e.cliente.result}))}},{key:"modificar_sucursal",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,n=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.modalController.create({component:b.a,cssClass:"my-custom-class",componentProps:{id_sucursal:e}});case 2:return(i=o.sent).onDidDismiss().then((function(e){n.actualizar_informacion()})),o.next=6,i.present();case 6:return o.abrupt("return",o.sent);case 7:case"end":return o.stop()}}),o,this)})))}},{key:"eliminarVisitaAlert",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.alertController.create({header:"Seguro que desea eliminar la visita?",buttons:[{text:"No",handler:function(){}},{text:"Si",handler:function(){i.eliminarVisita(e)}}]});case 2:o.sent.present();case 3:case"end":return o.stop()}}),o,this)})))}},{key:"eliminarVisita",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,n=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.loadingController.create({message:"Eliminando la visita"});case 2:(i=o.sent).present(),this.api_clientes.cambiar_estado_visita(e.id_visita,"eliminado").then((function(e){n.actualizar_informacion(),i.dismiss(),n.toastController.create({message:"Se elimino correctamente",duration:2e3,color:"success"}).then((function(e){e.present()})),console.log(e)})).catch((function(e){i.dismiss(),n.toastController.create({message:"Hubo un error al eliminar",duration:2e3,color:"danger"}).then((function(e){e.present()})),console.error(e)}));case 4:case"end":return o.stop()}}),o,this)})))}},{key:"marcarEntregadoAlert",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,n=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.alertController.create({header:"Atenci\xf3n",message:"\xbfEstas seguro que deseas marcar esta visita como entregada?",buttons:[{text:"No",role:"cancel"},{text:"Si",handler:function(){n.marcarEntregado(e.id_visita)}}]});case 2:return i=o.sent,o.next=5,i.present();case 5:case"end":return o.stop()}}),o,this)})))}},{key:"marcarEntregado",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,n=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.loadingController.create({message:"Cargando visita"});case 2:(i=o.sent).present(),this.api_clientes.cambiar_estado_visita(e,"entregado").then((function(e){n.actualizar_informacion(),i.dismiss(),n.toastController.create({message:"Se Marco como entregada",duration:2e3,color:"success"}).then((function(e){e.present()}))})).catch((function(e){i.dismiss(),n.toastController.create({message:"Hubo un error al marcar como entregada",duration:2e3,color:"danger"}).then((function(e){e.present()})),console.error(e)}));case 4:case"end":return o.stop()}}),o,this)})))}}]),e}(),N.\u0275fac=function(e){return new(e||N)(d.Jb(a.a),d.Jb(p.a),d.Jb(t.I),d.Jb(t.a),d.Jb(t.H),d.Jb(t.Q),d.Jb(m.a))},N.\u0275cmp=d.Db({type:N,selectors:[["app-ver-cliente"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"informacion_cliente"],["lines","full",1,"titulos"],["size","3"],["lines","full",4,"ngIf"],["lines","none"],[2,"text-align","center"],[3,"click"],["lines","full"],["size","2"],[4,"ngFor","ngForOf"],["size","4"],["size","1"],["name","create-outline",2,"margin-right","5px",3,"click"],["name","trash-outline","color","danger",2,"margin-right","5px",3,"click"],["color","primary","name","enter-outline",3,"click"],["color","danger","name","trash-outline",3,"click",4,"ngIf"],["style","padding-left: 5px;","name","mail-outline",3,"click",4,"ngIf"],["color","danger","name","trash-outline",3,"click"],["name","mail-outline",2,"padding-left","5px",3,"click"]],template:function(e,o){1&e&&d.jc(0,O,56,3,"ion-content",0),2&e&&d.dc("ngIf",o.cliente)},directives:[n.j,t.k,t.t,t.p,t.w,t.j,t.u,t.d,n.i,t.r],pipes:[n.d],styles:[".informacion_cliente[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;margin-top:10px}ion-icon[_ngcontent-%COMP%]{cursor:pointer}.no-pointer[_ngcontent-%COMP%]{cursor:default;color:grey}"]}),N)},{path:"alta-sucursal",loadChildren:function(){return i.e(21).then(i.bind(null,"pY+/")).then((function(e){return e.AltaSucursalPageModule}))}},{path:"ver-sucursal",loadChildren:function(){return i.e(25).then(i.bind(null,"l4Rn")).then((function(e){return e.VerSucursalPageModule}))}},{path:"ver-visita",loadChildren:function(){return i.e(26).then(i.bind(null,"R0jV")).then((function(e){return e.VerVisitaPageModule}))}},{path:"modificar-sucursal",loadChildren:function(){return i.e(22).then(i.bind(null,"+l8E")).then((function(e){return e.ModificarSucursalPageModule}))}},{path:"modificar-visita",loadChildren:function(){return i.e(23).then(i.bind(null,"6Ypc")).then((function(e){return e.ModificarVisitaPageModule}))}}],x=((q=function e(){_classCallCheck(this,e)}).\u0275mod=d.Hb({type:q}),q.\u0275inj=d.Gb({factory:function(e){return new(e||q)},imports:[[a.h.forChild(y)],a.h]}),q),z=i("X9o6"),C=((w=function e(){_classCallCheck(this,e)}).\u0275mod=d.Hb({type:w}),w.\u0275inj=d.Gb({factory:function(e){return new(e||w)},providers:[z.a],imports:[[n.b,r.a,t.G,x]]}),w)},wfI0:function(e,o,i){"use strict";i.d(o,"a",(function(){return c}));var n=i("fXoL"),r=i("TEn/"),t=i("jCJ1"),a=i("3Pt+"),c=function(){var e=function(){function e(o,i,n){_classCallCheck(this,e),this.navParams=o,this.api=i,this.modalCtrl=n,this.id_cliente=this.navParams.get("id_cliente")}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"cargar_sucursal",value:function(){this.direccion&&this.razon_social?this.api.alta_sucursal({id_cliente:this.id_cliente,razon_social_sucursal:this.razon_social,direccion_sucursal:this.direccion,telefono_sucursal:this.telefono,email_sucursal:this.email}).subscribe((function(e){console.log(e),location.reload()})):alert("Los campos direccion y razon social son obligatorios")}},{key:"cancelar",value:function(){this.modalCtrl.dismiss({dismissed:!0})}}]),e}();return e.\u0275fac=function(o){return new(o||e)(n.Jb(r.K),n.Jb(t.a),n.Jb(r.I))},e.\u0275cmp=n.Db({type:e,selectors:[["app-alta-sucursal"]],decls:24,vars:4,consts:[["lines","full"],[1,"titulos"],[3,"ngModel","ngModelChange"],[2,"width","100%","text-align","center","margin-top","15px"],[3,"click"],[2,"margin-top","25px"],["src","../../../assets/LogoCPA-01.png",1,"imagen_empresa"]],template:function(e,o){1&e&&(n.Ob(0,"ion-content"),n.Ob(1,"ion-item",0),n.Ob(2,"ion-label",1),n.kc(3," *Razon social: "),n.Nb(),n.Ob(4,"ion-input",2),n.Wb("ngModelChange",(function(e){return o.razon_social=e})),n.Nb(),n.Nb(),n.Ob(5,"ion-item",0),n.Ob(6,"ion-label",1),n.kc(7," Telefono: "),n.Nb(),n.Ob(8,"ion-input",2),n.Wb("ngModelChange",(function(e){return o.telefono=e})),n.Nb(),n.Nb(),n.Ob(9,"ion-item",0),n.Ob(10,"ion-label",1),n.kc(11," Email: "),n.Nb(),n.Ob(12,"ion-input",2),n.Wb("ngModelChange",(function(e){return o.email=e})),n.Nb(),n.Nb(),n.Ob(13,"ion-item",0),n.Ob(14,"ion-label",1),n.kc(15," *Direccion: "),n.Nb(),n.Ob(16,"ion-input",2),n.Wb("ngModelChange",(function(e){return o.direccion=e})),n.Nb(),n.Nb(),n.Ob(17,"div",3),n.Ob(18,"ion-button",4),n.Wb("click",(function(){return o.cancelar()})),n.kc(19,"Cancelar"),n.Nb(),n.Ob(20,"ion-button",4),n.Wb("click",(function(){return o.cargar_sucursal()})),n.kc(21,"Cargar"),n.Nb(),n.Nb(),n.Ob(22,"div",5),n.Kb(23,"img",6),n.Nb(),n.Nb()),2&e&&(n.zb(4),n.dc("ngModel",o.razon_social),n.zb(4),n.dc("ngModel",o.telefono),n.zb(4),n.dc("ngModel",o.email),n.zb(4),n.dc("ngModel",o.direccion))},directives:[r.k,r.t,r.u,r.s,r.P,a.d,a.e,r.d],styles:[""]}),e}()}}]);