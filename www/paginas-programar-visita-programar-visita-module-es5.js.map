{"version":3,"sources":["webpack:///src/app/paginas/programar-visita/programar-visita.page.html","webpack:///src/app/paginas/programar-visita/programar-visita-routing.module.ts","webpack:///src/app/paginas/programar-visita/programar-visita.module.ts","webpack:///src/app/paginas/programar-visita/programar-visita.page.scss","webpack:///src/app/paginas/programar-visita/programar-visita.page.ts"],"names":["routes","path","component","ProgramarVisitaPageRoutingModule","imports","forChild","exports","ProgramarVisitaPageModule","declarations","ProgramarVisitaPage","api","api_tecnicos","alertController","serviciosConEquipos","serviciosElegidos","serviciosParaEnviar","grupoWorkStation","grupoWorkStationElegidos","show","servicios_elegidosAux","id_cliente_elegido","sucursal_elegida","equiposCargados","workStationCargados","dayNames","monthNames","custom","cssClass","console","warn","mostrar_servicios","subscribe","data","listado_servicios","result","log","error","listado_clientes","sort","ordenarClientes","listado_tecnicos","ordenarTecnicos","fecha_actual","format","id_cliente","informacion_cliente","listado_sucursales_cliente","sucursales","datosSucursal","ordenarSucursales","listado_equipos_id","res","equipos","servicio","equipo","id_servicio","push","length","id_equipo","nombre_equipo","listado_grupoWorkstations","flag","array","i","first","status","alert","message","forEach","element","id_equipo_grupo","id_sucursal","codigo_qr_equipo","estado_servicio","nombre_servicio","qr","nro_equipo","zona","nombre_equipo_grupo","id_tecnico","tecnico","arrAux","workstation","index","index2","selected","find","equipoAux","crear_visita","fecha_elegida","location","reload","servicioID","arrayWorkstation","val","toString","includes","checkExist","ordenarEquipos","resp","undefined","a","b","razon_social_cliente","toLowerCase","razon_social_sucursal","nombre_tecnico","h","tecnicos","input","name","type","label","value","checked","create","header","inputs","buttons","text","role","handler","JSON","parse","stringify","present","t","tecnicoPrincipal","aux","grupo","selector","template"],"mappings":"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","file":"paginas-programar-visita-programar-visita-module-es5.js","sourcesContent":["export default \"<ion-content>\\r\\n    <!-- <ion-button (click)=\\\"onClick()\\\" expand=\\\"block\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\r\\n        Click me\\r\\n    </ion-button> -->\\r\\n    <ion-item style=\\\"margin-top: 15px;\\\">\\r\\n        <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar un cliente</ion-label>\\r\\n        <ion-select [interfaceOptions]=\\\"custom\\\" (ionChange)=\\\"sucursalesCliente($event.target.value)\\\">\\r\\n            <ion-select-option  *ngFor=\\\"let cliente of listado_clientes\\\" value=\\\"{{cliente.id_cliente}}\\\">{{cliente.razon_social_cliente}}</ion-select-option>\\r\\n        </ion-select>\\r\\n    </ion-item>\\r\\n    \\r\\n    <ion-item>\\r\\n        <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar una sucursal</ion-label>\\r\\n        <ion-select [interfaceOptions]=\\\"custom\\\" [disabled]=\\\"id_cliente_elegido == null\\\" (ionChange)=\\\"selectSucursal()\\\" [(ngModel)]=\\\"sucursal_elegida\\\">\\r\\n            <ion-select-option *ngFor=\\\"let sucursal of listado_sucursales_cliente\\\" value=\\\"{{sucursal.id_sucursal}}\\\">{{sucursal.razon_social_sucursal}}</ion-select-option>\\r\\n        </ion-select>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item>\\r\\n        <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar servicios a ofrecer</ion-label>\\r\\n        <ion-select [interfaceOptions]=\\\"custom\\\" [disabled]=\\\"(sucursal_elegida == null) && !equiposCargados && !workStationCargados\\\" [(ngModel)]=\\\"servicios_elegidosAux\\\"multiple=\\\"true\\\" (ionChange)=\\\"serviciosElegidosChange()\\\">\\r\\n            <ion-select-option *ngFor=\\\"let servicio of listado_servicios\\\" value=\\\"{{servicio.id_servicio}}\\\">{{servicio.nombre_servicio}}</ion-select-option>\\r\\n        </ion-select>\\r\\n    </ion-item>\\r\\n\\r\\n    <div *ngIf=\\\"grupoWorkStationElegidos.length > 0\\\">\\r\\n        <h2 style=\\\"text-align: center;\\\">Tecnico principal</h2>\\r\\n        <div>\\r\\n            <ion-item style=\\\"margin-top: 10px;\\\">\\r\\n                <ion-label fixed style=\\\"text-align: center;\\\">Tecnico principal</ion-label>\\r\\n                <ion-select (ionChange)=\\\"selectTecnicoPrincipal()\\\" [interfaceOptions]=\\\"custom\\\" [(ngModel)]=\\\"tecnicoPrincipal\\\">\\r\\n                    <ion-select-option *ngFor=\\\"let tecnico of listado_tecnicos\\\" [value]=\\\"tecnico\\\">{{tecnico.nombre_tecnico}} {{tecnico.apellido_tecnico}}</ion-select-option>\\r\\n                </ion-select>\\r\\n            </ion-item>\\r\\n        </div>    \\r\\n    </div>\\r\\n\\r\\n    <div *ngFor=\\\"let servicio of serviciosElegidos\\\" style=\\\"text-align: center;\\\">\\r\\n        <h2 style=\\\"text-align: center;\\\">{{servicio.nombre_servicio}}</h2>\\r\\n        <div *ngFor=\\\"let equipo of servicio.equipos\\\">\\r\\n            <ion-label fixed style=\\\"text-align: center;color: var(--ion-color-secondary);font-weight: bold;\\\">{{equipo.nombre_equipo}}</ion-label>\\r\\n            <ion-item style=\\\"margin-top: 10px;\\\">\\r\\n                <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar técnico a cargo</ion-label>\\r\\n                <ion-select [interfaceOptions]=\\\"custom\\\" [(ngModel)]=\\\"equipo.tecnico\\\">\\r\\n                    <ion-select-option *ngFor=\\\"let tecnico of listado_tecnicos\\\" value=\\\"{{tecnico.id_tecnico}}\\\">{{tecnico.nombre_tecnico}} {{tecnico.apellido_tecnico}}</ion-select-option>\\r\\n                </ion-select>\\r\\n            </ion-item>\\r\\n        </div>\\r\\n    </div>\\r\\n    \\r\\n    <div *ngIf=\\\"show\\\">\\r\\n        <div *ngFor=\\\"let servicio of grupoWorkStationElegidos; let h = index\\\" style=\\\"text-align: center;\\\">\\r\\n            <h2 style=\\\"text-align: center;\\\">{{servicio.nombre_equipo_grupo}}</h2>\\r\\n            <ion-item style=\\\"margin-top: 10px;\\\" (click)=\\\"presentAlertCheckbox(servicio, h, servicio.tecnico)\\\">\\r\\n                <ion-label style=\\\"width: fit-content;\\\" fixed style=\\\"text-align: center;\\\">Seleccionar técnicos a cargo</ion-label>\\r\\n                <p *ngFor=\\\"let tecnico of servicio.tecnico\\\">{{tecnico.nombre_tecnico}}, </p>\\r\\n            </ion-item>\\r\\n\\r\\n            <div>\\r\\n                <ion-row>\\r\\n                    <ion-col offset=3 size=\\\"3\\\" style=\\\"text-align:start;\\\">\\r\\n                        <ion-label style=\\\"font-weight: bold;\\\">Equipo</ion-label>\\r\\n                    </ion-col>\\r\\n                    <ion-col *ngFor=\\\"let tecnico of servicio.tecnico\\\" [size]=\\\"3/servicio.tecnico.length\\\">\\r\\n                        {{tecnico.nombre_tecnico}}\\r\\n                    </ion-col>\\r\\n                </ion-row>\\r\\n            </div>\\r\\n            <div style=\\\"min-width:50%;\\\" *ngFor=\\\"let equipo of servicio.equipos ; let i = index\\\">\\r\\n                <ion-row>\\r\\n                    <ion-col offset=3 size=\\\"3\\\" style=\\\"text-align:start; border-bottom: 1px solid black;\\\">\\r\\n                        <ion-label style=\\\"color: var(--ion-color-secondary);font-weight: bold;\\\">{{equipo.nombre_equipo + ' - ' + equipo.zona + ' - ' + equipo.nro_equipo}}: {{equipo.nombre_servicio}}</ion-label>\\r\\n                    </ion-col>\\r\\n                    <ion-col style=\\\"border-bottom: 1px solid;\\\" *ngFor=\\\"let tecnico of servicio.tecnico; let t = index\\\" [size]=\\\"3/servicio.tecnico.length\\\">\\r\\n                        <ion-checkbox (click)=\\\"prueba(servicio, t,h, i)\\\" [(ngModel)]=\\\"tecnico.equipos[h][i].selected\\\" [checked]=\\\"servicio.tecnico.length == 1\\\" ></ion-checkbox>\\r\\n                    </ion-col>\\r\\n                </ion-row>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <!-- <ion-item>\\r\\n        <ion-label fixed style=\\\"text-align: center;\\\">Seleccionar técnico a cargo</ion-label>\\r\\n        <ion-select [(ngModel)]=\\\"tecnico_elegido\\\">\\r\\n            <ion-select-option *ngFor=\\\"let tecnico of listado_tecnicos\\\" value=\\\"{{tecnico.id_tecnico}}\\\">{{tecnico.nombre_tecnico}} {{tecnico.apellido_tecnico}}</ion-select-option>\\r\\n        </ion-select>\\r\\n    </ion-item> -->\\r\\n\\r\\n    <ion-item>\\r\\n        <ion-label fixed style=\\\"text-align: center;\\\">Elegir una fecha</ion-label>\\r\\n        <ion-datetime [(ngModel)]=\\\"fecha_elegida\\\" [doneText]=\\\"'Listo'\\\"\\r\\n        [cancelText]=\\\"'Cancelar'\\\" [monthNames]=\\\"monthNames\\\" [dayNames]=\\\"dayNames\\\" displayFormat=\\\"DDDD D MMMM YYYY HH:mm\\\" min=\\\"{{fecha_actual}}\\\" max=\\\"2022\\\" value=\\\"{{fecha_actual}}\\\"></ion-datetime>\\r\\n    </ion-item>\\r\\n\\r\\n    <div style=\\\"width: 100%; text-align: center;\\\">\\r\\n        <ion-button (click)=\\\"programarVisita()\\\">Agendar</ion-button>\\r\\n    </div>\\r\\n        \\r\\n    <div style=\\\"margin-top: 25px\\\">\\r\\n        <img class=\\\"imagen_empresa\\\" src='../../../assets/LogoCPA-01.png'>\\r\\n    </div>\\r\\n\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ProgramarVisitaPage } from './programar-visita.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProgramarVisitaPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ProgramarVisitaPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ProgramarVisitaPageRoutingModule } from './programar-visita-routing.module';\r\n\r\nimport { ProgramarVisitaPage } from './programar-visita.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ProgramarVisitaPageRoutingModule\r\n  ],\r\n  declarations: [ProgramarVisitaPage]\r\n})\r\nexport class ProgramarVisitaPageModule {}\r\n","export default \"ion-item {\\n  width: 50%;\\n  margin-left: 25%;\\n  margin-bottom: 10px;\\n}\\n\\n.imagen_empresa {\\n  width: 50%;\\n  margin-left: 25%;\\n}\\n\\nh2 {\\n  color: var(--ion-color-primary);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnaW5hcy9wcm9ncmFtYXItdmlzaXRhL0Q6XFxSZXBvc2l0b3Jpb3NcXGZyb250ZW5kX2NwYV9hZG1pbi9zcmNcXGFwcFxccGFnaW5hc1xccHJvZ3JhbWFyLXZpc2l0YVxccHJvZ3JhbWFyLXZpc2l0YS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2luYXMvcHJvZ3JhbWFyLXZpc2l0YS9wcm9ncmFtYXItdmlzaXRhLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFVBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0FDQ0o7O0FERUE7RUFDSSxVQUFBO0VBQ0EsZ0JBQUE7QUNDSjs7QURDQTtFQUNJLCtCQUFBO0FDRUoiLCJmaWxlIjoic3JjL2FwcC9wYWdpbmFzL3Byb2dyYW1hci12aXNpdGEvcHJvZ3JhbWFyLXZpc2l0YS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taXRlbXtcclxuICAgIHdpZHRoOiA1MCU7XHJcbiAgICBtYXJnaW4tbGVmdDogMjUlO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxufVxyXG5cclxuLmltYWdlbl9lbXByZXNhe1xyXG4gICAgd2lkdGg6IDUwJTtcclxuICAgIG1hcmdpbi1sZWZ0OiAyNSVcclxufVxyXG5oMntcclxuICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XHJcbn0iLCJpb24taXRlbSB7XG4gIHdpZHRoOiA1MCU7XG4gIG1hcmdpbi1sZWZ0OiAyNSU7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG59XG5cbi5pbWFnZW5fZW1wcmVzYSB7XG4gIHdpZHRoOiA1MCU7XG4gIG1hcmdpbi1sZWZ0OiAyNSU7XG59XG5cbmgyIHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcbn0iXX0= */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ApiVisitasService } from './servicios/api-visitas.service'\r\nimport * as moment from 'moment';\r\nimport { ServicioTecnicosService } from '../administrar-tecnicos/servicios/servicio-tecnicos.service'\r\nimport { AlertController } from '@ionic/angular';\r\nimport { element } from 'protractor';\r\n\r\n@Component({\r\n  selector: 'app-programar-visita',\r\n  templateUrl: './programar-visita.page.html',\r\n  styleUrls: ['./programar-visita.page.scss'],\r\n})\r\nexport class ProgramarVisitaPage implements OnInit {\r\n\r\n  public equipos;\r\n  public serviciosConEquipos = [];\r\n  public serviciosElegidos = [];\r\n  public serviciosParaEnviar = [];\r\n  public grupoWorkStation = []\r\n  public grupoWorkStationElegidos = []\r\n  public show = false\r\n  public tecnicoPrincipal;\r\n\r\n  servicios_elegidosAux: string[] = [];\r\n  id_cliente_elegido: any = null;\r\n  sucursal_elegida: any = null;\r\n  fecha_elegida: any;\r\n  tecnico_elegido: any;\r\n  equiposCargados: boolean = false\r\n  workStationCargados: boolean = false\r\n  listado_clientes: any;\r\n  listado_sucursales_cliente: any;\r\n  listado_servicios: any;\r\n  listado_tecnicos: any;\r\n\r\n  fecha_actual: any;\r\n  dayNames= ['Domingo','Lunes','Martes','Miercoles','Jueves','Viernes','Sabado']\r\n  monthNames = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre']\r\n\r\n  public custom = {\r\n    cssClass:'alertSize'\r\n  }\r\n\r\n  constructor(private api: ApiVisitasService, private api_tecnicos: ServicioTecnicosService, public alertController: AlertController) { \r\n   \r\n  }\r\n\r\n  ngOnInit() {\r\n    console.warn(1)\r\n    this.api.mostrar_servicios().subscribe(data =>{\r\n      console.warn(2)\r\n\r\n      this.listado_servicios = data;\r\n      this.listado_servicios = this.listado_servicios.result;\r\n      console.log(this.listado_servicios,'servicios')\r\n    }), (error => {\r\n      console.log('*1*1*1*1*1*1',error)\r\n    }); \r\n\r\n\r\n    this.api.listado_clientes().subscribe(data => {\r\n      this.listado_clientes = data;\r\n      this.listado_clientes = this.listado_clientes.result;\r\n      this.listado_clientes.sort(this.ordenarClientes);\r\n      console.log(this.listado_clientes)\r\n    }), \r\n    (error => {\r\n      console.log(error)\r\n    });\r\n    \r\n\r\n    this.api_tecnicos.listado_tecnicos().subscribe(data => {\r\n      this.listado_tecnicos = data;\r\n      this.listado_tecnicos = this.listado_tecnicos.result;\r\n      this.listado_tecnicos.sort(this.ordenarTecnicos);\r\n      console.log(this.listado_tecnicos)\r\n    }, (error => {\r\n      console.log(error)\r\n    }))\r\n\r\n    this.fecha_actual = moment().format();\r\n\r\n  }\r\n\r\n  sucursalesCliente(id_cliente){\r\n    this.api.informacion_cliente(id_cliente).subscribe(data => {\r\n      this.listado_sucursales_cliente = data\r\n      console.log(data)\r\n      this.listado_sucursales_cliente = this.listado_sucursales_cliente.result.sucursales.datosSucursal\r\n      this.sucursal_elegida = null;\r\n      this.id_cliente_elegido = id_cliente;\r\n      this.listado_sucursales_cliente.sort(this.ordenarSucursales);\r\n      console.log(this.listado_sucursales_cliente)\r\n    }), (error => {\r\n      console.log(error)\r\n    })\r\n  }\r\n\r\n  selectSucursal(){\r\n    if(this.sucursal_elegida != null){\r\n      this.api.listado_equipos_id(this.sucursal_elegida).subscribe((res:any)=>{  \r\n        this.equipos = res.result;\r\n        console.log(this.equipos,'equipos')\r\n        for ( let servicio of this.listado_servicios){\r\n          servicio.equipos = [];\r\n          for ( let equipo of this.equipos){\r\n  \r\n            if(equipo.id_servicio == servicio.id_servicio){\r\n  \r\n              servicio.equipos.push(equipo);\r\n            }\r\n          }\r\n          if (servicio.equipos.length < 1){\r\n            servicio.equipos.push({id_equipo: 0, id_servicio:servicio.id_servicio, nombre_equipo: 'Servicio principal'});\r\n          }\r\n        }\r\n        console.log(this.listado_servicios,'servicios completos');\r\n        this.equiposCargados = true\r\n      })\r\n    }\r\n\r\n    this.api.listado_grupoWorkstations(this.sucursal_elegida).subscribe((data:any) =>{\r\n      // console.log('Grupo1', data.result)\r\n      var flag = 0\r\n      var array = []\r\n      var i = 0\r\n      var first = true\r\n      if(data.status == 'error'){\r\n        alert('Ocurrio un error: ' + data.message)\r\n      }else{\r\n        data.result.forEach((element) => {\r\n          if(element.id_equipo_grupo == flag){\r\n            // console.log(element.id_equipo_grupo, ' ' ,flag)\r\n            array[i].equipos.push({id_equipo: element.id_equipo, id_servicio:element.id_servicio,id_sucursal:element.id_sucursal, nombre_equipo:element.nombre_equipo,codigo_qr_equipo:element.codigo_qr_equipo,estado_servicio:element.estado_servicio,nombre_servicio:element.nombre_servicio, qr:element.qr, nro_equipo: element.nro_equipo, zona:element.zona})\r\n          }else{\r\n            if(!first){\r\n              i++\r\n            }\r\n            flag = element.id_equipo_grupo\r\n            array.push({nombre_equipo_grupo:element.nombre_equipo_grupo,id_equipo_grupo:element.id_equipo_grupo,equipos:[]})\r\n            array[i].equipos.push({id_equipo: element.id_equipo, id_servicio:element.id_servicio,id_sucursal:element.id_sucursal, nombre_equipo:element.nombre_equipo,codigo_qr_equipo:element.codigo_qr_equipo,estado_servicio:element.estado_servicio,nombre_servicio:element.nombre_servicio,qr:element.qr, nro_equipo: element.nro_equipo, zona:element.zona})\r\n            first = false\r\n          }\r\n        });\r\n        this.grupoWorkStation = array\r\n      }\r\n\r\n      console.log('grupo2: ', this.grupoWorkStation)\r\n      this.workStationCargados = true\r\n\r\n    })\r\n  }\r\n\r\n  programarVisita(){\r\n    for(let servicio of this.serviciosElegidos){\r\n      for(let equipo of servicio.equipos){\r\n        this.serviciosParaEnviar.push({id_servicio: servicio.id_servicio, id_tecnico: equipo.tecnico, id_equipo: equipo.id_equipo})\r\n      }\r\n    }\r\n    var arrAux = []\r\n    for(let workstation of this.grupoWorkStationElegidos){\r\n      \r\n      workstation.tecnico?.forEach(tecnico => {\r\n        console.log(1)\r\n        for (let index = 0; index < tecnico.equipos.length; index++) {\r\n          const element = tecnico.equipos[index];\r\n          console.warn(element)\r\n          console.log(2)\r\n          if (element?.length >= 1) {\r\n            for (let index2 = 0; index2 < element.length; index2++) {\r\n              console.log(index2, \"/\", element.length)\r\n              const equipo = element[index2];\r\n              if (equipo?.selected){\r\n                if (!arrAux.find(equipoAux => (equipoAux.id_servicio == equipo.id_servicio) && (equipoAux.id_equipo == equipo.id_equipo))){\r\n                  console.log(\"SI IF\")\r\n                  console.warn(equipo)\r\n                  arrAux.push({id_servicio: equipo.id_servicio, id_tecnico: tecnico.id_tecnico, id_equipo: equipo.id_equipo})\r\n                  this.serviciosParaEnviar.push({id_servicio: equipo.id_servicio, id_tecnico: tecnico.id_tecnico, id_equipo: equipo.id_equipo})\r\n  \r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n    console.log(arrAux)\r\n    console.log(this.serviciosParaEnviar);\r\n    this.api.crear_visita({'id_cliente': this.id_cliente_elegido,\r\n                          'id_sucursal': this.sucursal_elegida,\r\n                          'servicios': this.serviciosParaEnviar,\r\n                          'fecha_visita': this.fecha_elegida}).subscribe(data => {\r\n                              console.log(data)\r\n                              location.reload();\r\n                           }), (error =>{\r\n                             console.log(error)\r\n                           })\r\n  }\r\n\r\n  serviciosElegidosChange(){\r\n    this.serviciosElegidos = [];\r\n    for (let servicioID of this.servicios_elegidosAux){\r\n      for(let servicio of this.listado_servicios){\r\n        if(servicio.id_servicio == servicioID && servicio.qr == 0){\r\n          this.serviciosElegidos.push(servicio);\r\n        }\r\n      }\r\n    }\r\n    var arrayWorkstation:any = [{nombre_equipo_grupo:null, id_equipo_grupo:null, tecnico: null ,equipos:[]}]\r\n    var i = 0\r\n    var first = true\r\n    // console.log(this.servicios_elegidosAux)\r\n    this.grupoWorkStation.forEach((workstation:any) =>{\r\n      workstation.equipos.forEach((servicio) => {\r\n        var val = servicio.id_servicio.toString()\r\n        if(this.servicios_elegidosAux.includes(val)){\r\n          if(this.checkExist(arrayWorkstation,workstation.nombre_equipo_grupo) || arrayWorkstation[0].nombre_equipo_grupo == null){\r\n              if(!first){\r\n                console.log('1')\r\n                i = i + 1\r\n                first = false\r\n                arrayWorkstation.push({nombre_equipo_grupo:workstation.nombre_equipo_grupo, id_equipo_grupo:workstation.id_equipo_grupo, tecnico: null ,equipos:[servicio]})\r\n              }else{\r\n                first = false\r\n                console.log('2')\r\n                arrayWorkstation = [{nombre_equipo_grupo:workstation.nombre_equipo_grupo, id_equipo_grupo:workstation.id_equipo_grupo, tecnico: null ,equipos:[servicio]}]  \r\n              }\r\n          }else{\r\n            console.log('3')\r\n            arrayWorkstation[i].equipos.push(servicio)\r\n          }\r\n        }\r\n      });\r\n    })\r\n    for (let index = 0; index < arrayWorkstation.length; index++) {\r\n      const element = arrayWorkstation[index];\r\n      console.log(element.equipos);\r\n      element.equipos.sort(this.ordenarEquipos);\r\n      \r\n    }\r\n    this.grupoWorkStationElegidos = arrayWorkstation\r\n    this.show = true\r\n    if(this.grupoWorkStationElegidos[0].nombre_equipo_grupo == null){\r\n      this.show = false\r\n    }\r\n    console.log('Servicio elegidos: ',arrayWorkstation)\r\n  }\r\n\r\n  checkExist(array,nombre_equipo_grupo){\r\n    var resp = []\r\n    resp = array.find(resp =>\r\n      (resp.nombre_equipo_grupo == nombre_equipo_grupo)\r\n    )\r\n    if(resp == undefined){\r\n      return true\r\n    }else{\r\n      return false\r\n    }\r\n  }\r\n\r\n  ordenarClientes(a,b){\r\n    if (a.razon_social_cliente.toLowerCase() > b.razon_social_cliente.toLowerCase()) {\r\n      return 1;\r\n    }\r\n    if (a.razon_social_cliente.toLowerCase() < b.razon_social_cliente.toLowerCase()) {\r\n      return -1;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  ordenarSucursales(a,b){\r\n    if (a.razon_social_sucursal.toLowerCase() > b.razon_social_sucursal.toLowerCase()) {\r\n      return 1;\r\n    }\r\n    if (a.razon_social_sucursal.toLowerCase() < b.razon_social_sucursal.toLowerCase()) {\r\n      return -1;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  ordenarEquipos(a,b){\r\n    if (a.nombre_equipo.toLowerCase() > b.nombre_equipo.toLowerCase()) {\r\n      return 1;\r\n    }\r\n    if (a.nombre_equipo.toLowerCase() < b.nombre_equipo.toLowerCase()) {\r\n      return -1;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  ordenarTecnicos(a,b){\r\n    if (a.nombre_tecnico.toLowerCase() > b.nombre_tecnico.toLowerCase()) {\r\n      return 1;\r\n    }\r\n    if (a.nombre_tecnico.toLowerCase() < b.nombre_tecnico.toLowerCase()) {\r\n      return -1;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  async presentAlertCheckbox(servicio, h, tecnicos) {\r\n    if (!tecnicos){\r\n      tecnicos = []\r\n    }\r\n    var input = []\r\n    for (let tecnico of this.listado_tecnicos) {\r\n      console.log(tecnico)\r\n      if (tecnicos.includes(tecnico)){\r\n        input.push({\r\n          name: tecnico.nombre_tecnico,\r\n          type: 'checkbox',\r\n          label: tecnico.nombre_tecnico,\r\n          value: tecnico,\r\n          checked:true\r\n        })\r\n      }else{\r\n        input.push({\r\n          name: tecnico.nombre_tecnico,\r\n          type: 'checkbox',\r\n          label: tecnico.nombre_tecnico,\r\n          value: tecnico,\r\n        })\r\n      }\r\n    }\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Checkbox',\r\n      inputs: input,\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: () => {\r\n            console.log('Confirm Cancel');\r\n          }\r\n        }, {\r\n          text: 'Ok',\r\n          handler: (data) => {\r\n            servicio.tecnico = data;\r\n            servicio.tecnico.forEach(tecnico => {\r\n              if (!tecnico.equipos) {\r\n                tecnico.equipos = [];\r\n                \r\n              }\r\n              tecnico.equipos[h] = [];\r\n              for (let index = 0; index < servicio.equipos.length; index++) {\r\n                const element = servicio.equipos[index];\r\n                if (servicio.tecnico.length == 1){\r\n                  element.selected = true;\r\n                }else{\r\n                  element.selected = false;\r\n                }\r\n                tecnico.equipos[h].push(JSON.parse(JSON.stringify(element)));\r\n                \r\n              }\r\n              console.log(tecnico);\r\n            });\r\n            console.log(data,\"data\");\r\n            console.log(servicio);\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  prueba(servicio, t,h, i){\r\n    for (let index = 0; index < servicio.tecnico.length; index++) {\r\n      const tecnico = servicio.tecnico[index];\r\n      if (t != index) {\r\n        if (tecnico.equipos[h][i].selected) {\r\n          tecnico.equipos[h][i].selected = false;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  selectTecnicoPrincipal(){\r\n    console.log(this.serviciosElegidos)\r\n    console.log(this.tecnicoPrincipal)\r\n    var aux = []\r\n    for (let servicio of this.serviciosElegidos) {\r\n      for (let equipo of servicio.equipos) {\r\n        equipo.tecnico = this.tecnicoPrincipal.id_tecnico.toString();\r\n      }\r\n    }\r\n    for (let grupo of this.grupoWorkStationElegidos) {\r\n      grupo.equipos.forEach(equipo => {\r\n        equipo.selected = true;\r\n      });\r\n      aux.push(grupo.equipos);\r\n    }\r\n    for (let grupo of this.grupoWorkStationElegidos) {\r\n      grupo.tecnico = [];\r\n      grupo.tecnico[0] = this.tecnicoPrincipal;\r\n      grupo.tecnico[0].equipos = aux;\r\n    }\r\n\r\n    console.log(this.grupoWorkStationElegidos)\r\n  }\r\n\r\n}\r\n"]}